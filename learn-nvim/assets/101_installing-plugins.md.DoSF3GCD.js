import{_ as s,c as a,a2 as e,o as n}from"./chunks/framework.DXKzXLg0.js";const c=JSON.parse('{"title":"Installing plugins","description":"","frontmatter":{},"headers":[],"relativePath":"101/installing-plugins.md","filePath":"101/installing-plugins.md"}'),t={name:"101/installing-plugins.md"};function l(p,i,h,o,k,d){return n(),a("div",null,i[0]||(i[0]=[e(`<h1 id="installing-plugins" tabindex="-1">Installing plugins <a class="header-anchor" href="#installing-plugins" aria-label="Permalink to &quot;Installing plugins&quot;">​</a></h1><p>Here we are going to talk about two features: <a href="https://neovim.io/doc/user/pack.html#_using-vim-packages" target="_blank" rel="noreferrer">Vim packages</a> and <a href="https://neovim.io/doc/user/pack.html#_plugin-manager" target="_blank" rel="noreferrer">vim.pack</a>.</p><p><strong>Vim package</strong> is the mechanism used in Vim to include a plugin into the <a href="https://neovim.io/doc/user/options.html#&#39;runtimepath&#39;" target="_blank" rel="noreferrer">runtimepath</a>. This means the possibility to use a plugin <em>without a plugin manager</em> exists in Vim and Neovim.</p><p><strong>vim.pack</strong> is a Neovim feature, a plugin manager that is currently under development. It is not available in any stable release yet. If you want to test it you&#39;ll need to compile Neovim from source or download a <a href="https://github.com/neovim/neovim/releases/tag/nightly" target="_blank" rel="noreferrer">nightly version</a> .</p><h2 id="vim-package" tabindex="-1">Vim package <a class="header-anchor" href="#vim-package" aria-label="Permalink to &quot;Vim package&quot;">​</a></h2><p>The documentation says...</p><blockquote><p>A Vim &quot;package&quot; is a directory that contains plugins.</p></blockquote><p>But the story doesn&#39;t end there. There are two types of packages: optional and automatically loaded. And as many other things in Vim, packages need to follow a specific file structure. Imagine this.</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>example</span></span>
<span class="line"><span>├── opt</span></span>
<span class="line"><span>│   └── package-one</span></span>
<span class="line"><span>│       └── plugin</span></span>
<span class="line"><span>│           └── plugin-one.vim</span></span>
<span class="line"><span>└── start</span></span>
<span class="line"><span>    ├── package-two</span></span>
<span class="line"><span>    │   └── plugin</span></span>
<span class="line"><span>    │       └── plugin-two.lua</span></span>
<span class="line"><span>    └── package-three</span></span>
<span class="line"><span>        ├── doc</span></span>
<span class="line"><span>        │   └── plugin-three.txt</span></span>
<span class="line"><span>        └── lua</span></span>
<span class="line"><span>            └── plugin-three.lua</span></span></code></pre></div><p>Packages in the <code>opt</code> directory are considered optional. Neovim will not use them until we execute the command <a href="https://neovim.io/doc/user/repeat.html#%3Apackadd" target="_blank" rel="noreferrer">:packadd</a>.</p><p>Packages in <code>start</code> will be loaded automatically during Neovim&#39;s startup process.</p><p>A package can actually contain any number of runtime files. It can have color schemes, syntax files, documentation, and more. On the other hand, a plugin is just a script that&#39;s executed at some point in time. In the real world though you won&#39;t find a single soul using the term <strong>Vim package</strong>. What the documentation calls a package we (the community) call it a plugin.</p><h2 id="the-pack-directory" tabindex="-1">The pack directory <a class="header-anchor" href="#the-pack-directory" aria-label="Permalink to &quot;The pack directory&quot;">​</a></h2><p>This is where we learn how to create a new package. In other words, how to install new plugins without a plugin manager.</p><p>There is an option called <a href="https://neovim.io/doc/user/options.html#&#39;packpath&#39;" target="_blank" rel="noreferrer">packpath</a>, this is a list of directories where we can add a <code>pack</code> directory. And inside this <code>pack</code> directory we can have one or more packages.</p><p>Let&#39;s try to setup an example:</p><p>Usually our Neovim config directory is already included in the <code>packpath</code> list. This can be a valid location for packages.</p><p>Inside <code>pack</code> we need to create the top level directory that will contain the <code>opt</code> and <code>start</code> directories. I want to call this <code>vendor</code> (you can choose any name). So, depending on the operating system it could be in one of these paths:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>~/.config/nvim/pack/vendor/         (Unix and OSX)</span></span>
<span class="line"><span>~/AppData/Local/nvim/pack/vendor/   (Windows)</span></span></code></pre></div><p>Let&#39;s pretend we are on a linux system and we want to install <a href="https://github.com/folke/tokyonight.nvim" target="_blank" rel="noreferrer">tokyonight.nvim</a>, which is a fancy color scheme. All we have to do is execute this command on our terminal.</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/folke/tokyonight.nvim</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  ~/.config/nvim/pack/vendor/start/tokyonight.nvim</span></span></code></pre></div><p>After we download a plugin we should generate the help tags, so the <code>:help</code> command can find the documentation of the plugin.</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nvim</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --headless</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;helptags ALL&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;quit&#39;</span></span></code></pre></div><p>And that&#39;s it. Now <code>tokyonight.nvim</code> will be available to us.</p><h2 id="built-in-plugin-manager" tabindex="-1">Built-in plugin manager <a class="header-anchor" href="#built-in-plugin-manager" aria-label="Permalink to &quot;Built-in plugin manager&quot;">​</a></h2><blockquote><p>Note: this is an experimental feature still under development.</p></blockquote><p>The Vim package mechanism has a very limited scope. It&#39;s only goal is to make the editor aware that a plugin exists. The burden of management is on the <strong>user</strong>. How to install a new plugin? How to update a plugin? How to delete a plugin? <strong>You</strong> need to find the solution to all those problems.</p><p>On Neovim <code>v0.12</code> there will be a plugin manager in the form of a lua module. This will be under the <code>vim</code> global, in a table field called <code>pack</code>. In a lua file we could do something like this.</p><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vim.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pack</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;https://github.com/neovim/nvim-lspconfig&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;https://github.com/nvim-mini/mini.nvim&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p><code>vim.pack</code> will use <code>git</code> to download plugins. And the plugins will be installed as optional packages. So we have the possibility to install a plugin but choose when to load it. Do note the default behavior in <a href="https://neovim.io/doc/user/pack.html#vim.pack.add()" target="_blank" rel="noreferrer">vim.pack.add()</a> is to load the plugin immediately. So if we need to use a feature that needs one these plugins, we do it after the call to <code>vim.pack.add()</code>.</p><p>Here the first argument will be the list of plugins we want to install. And each plugin can be a string which contains the link to the git repository or a &quot;<a href="https://neovim.io/doc/user/pack.html#vim.pack.Spec" target="_blank" rel="noreferrer">plugin spec</a>.&quot; For example, the following function call does the same thing as the one I showed before.</p><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vim.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pack</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;https://github.com/neovim/nvim-lspconfig&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;nvim-lspconfig&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    version </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;master&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;https://github.com/nvim-mini/mini.nvim&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;mini.nvim&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    version </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;main&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>We would use the <strong>plugin spec</strong> form if we need to provide more information to <code>vim.pack</code>. We could download a specific version of the plugin instead fetching the latest commit from the default branch (<code>main</code> or <code>master</code>).</p><p>To update plugins we use the function <a href="https://neovim.io/doc/user/pack.html#vim.pack.update()" target="_blank" rel="noreferrer">vim.pack.update()</a>. This will download the latest commits from the git repository and show a &quot;confirmation buffer.&quot; This will give us the opportunity to review the changes before the plugin manager updates the code of the plugin. To confirm the changes we simply save the buffer with the <code>:write</code> command, and to discard them we close the buffer with the <code>:quit</code> command.</p><p>To delete a plugin we use the function <a href="https://neovim.io/doc/user/pack.html#vim.pack.del()" target="_blank" rel="noreferrer">vim.pack.del()</a>. This will delete the plugin directory from disk.</p><p>Is worth mention <code>vim.pack</code> does not offer any &quot;Ex-command&quot; or vim function. If we want to update our plugins in Neovim&#39;s command-line mode we have to use the <code>:lua</code> command. Like this.</p><div class="language-vim vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vim</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:lua </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim.pack.update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><p>This is a little bit of a problem for users that have all their configuration in vimscript, in an <code>init.vim</code> file. But there is a solution, the <code>v:lua</code> variable. With it we can call a lua function using vimscript syntax. So this should work just fine in an <code>init.vim</code> file.</p><div class="language-vim vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vim</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> v:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lua.vim.pack.add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   &quot;https://github.com/neovim/nvim-lspconfig&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   &quot;https://github.com/nvim-mini/mini.nvim&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">\\</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre></div><p>Notice here we use a regular vimscript array, and that will be converted to a lua table internally. If you need to use a plugin spec then you use a vimscript object.</p><div class="language-vim vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vim</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> v:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lua.vim.pack.add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">\\</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;src&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://github.com/neovim/nvim-lspconfig&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;master&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">\\</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;src&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://github.com/nvim-mini/mini.nvim&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">\\</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre></div><p>Be aware that <code>:lua</code> is a command and <code>v:lua</code> is a variable. They are different and expect different syntax.</p><h2 id="preparing-for-the-future" tabindex="-1">Preparing for the future <a class="header-anchor" href="#preparing-for-the-future" aria-label="Permalink to &quot;Preparing for the future&quot;">​</a></h2><p>As mentioned before <code>vim.pack</code> is not available in any stable release just yet. And for some linux users it will take a couple of years before is available in their package managers. For example, any system based on Debian stable will only have Neovim <code>v0.10</code>. In this case if you want to use a plugin manager I recommend <a href="https://nvim-mini.org/mini.nvim/doc/mini-deps.html" target="_blank" rel="noreferrer">mini.deps</a>.</p><p>The design of <code>vim.pack</code> is actually based on <code>mini.deps</code>. Because of this I believe the transition from <code>mini.deps</code> to <code>vim.pack</code> should be fairly simple. So you can start using <code>mini.deps</code> right now and then migrate to the native solution whenever you have the chance.</p><p>The first thing we would have to do is install <a href="https://github.com/nvim-mini/mini.nvim" target="_blank" rel="noreferrer">mini.nvim</a>, which is the project that has <code>mini.deps</code>. But we have to do it in such a way that the plugin manager can manage itself.</p><p><code>mini.deps</code>&#39; documentation recommends downloading it in a sub-directory of Neovim&#39;s data directory. The location of this directory varies depending on the operating system, so to know the exact path execute this command on your terminal.</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nvim</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --headless</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;echo stdpath(&quot;data&quot;) . &quot;/site/pack/deps/start&quot;&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;quit&#39;</span></span></code></pre></div><p>Navigate to that location, you would want to execute the <code>git clone</code> command in that directory.</p><p>Now download <code>mini.nvim</code> with this command.</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --filter=blob:none</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/nvim-mini/mini.nvim</span></span></code></pre></div><p>The last step is to generate the help tags.</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nvim</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --headless</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;helptags ALL&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;quit&#39;</span></span></code></pre></div><p>We are ready to start using <code>mini.deps</code>, but in our personal configuration we have to make sure the module is present. So we load the lua module in a safe way.</p><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">local</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ok, MiniDeps </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pcall</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mini.deps&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ok </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  vim.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">notify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;[WARN] mini.deps module not found&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, vim.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">levels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WARN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><p>We do this to avoid any scary error message in case we forget to download <code>mini.deps</code> before copying our personal configuration into a new system. In that case we just get a warning and Neovim stays in a usable state.</p><p>If everything goes well all the functions of the <code>mini.deps</code> module will be stored in the variable <code>MiniDeps</code>. And so we can enable the module using the <code>.setup()</code> function.</p><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MiniDeps.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({})</span></span></code></pre></div><p><code>mini.deps</code> default settings should be good enough so we just have an empty lua table as the first argument. If we need to change any setting we add a table field inside the <code>{}</code>.</p><p>To install new plugins we use the <code>.add()</code> function.</p><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MiniDeps.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;neovim/nvim-lspconfig&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>And this works just like <code>vim.pack.add()</code>, it&#39;ll download the plugin as an optional package and load it immediately.</p><p>In <code>mini.deps</code> the <code>.add()</code> function can only handle one plugin. If we want more plugins we call <code>.add()</code> as many times as needed. For example:</p><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MiniDeps.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;neovim/nvim-lspconfig&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MiniDeps.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  source </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;nvim-mini/mini.nvim&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  checkout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;main&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>Notice here that <code>github</code> links have a special treatment, we don&#39;t have to write the entire URL, just the user (or organization) and the name of the repository. Also, the plugin spec is different. Instead of <code>src</code> we use <code>source</code>, instead of <code>version</code> we have <code>checkout</code>.</p><p>Now, if we put everything together we would end up with something like this in our personal configuration.</p><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">local</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ok, MiniDeps </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pcall</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mini.deps&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ok </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  vim.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">notify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;[WARN] mini.deps module not found&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, vim.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">levels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WARN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- See :help MiniDeps.config</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MiniDeps.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- NOTE: these are just example plugins.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- You don&#39;t have to actually install them.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MiniDeps.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;neovim/nvim-lspconfig&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MiniDeps.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  source </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;nvim-mini/mini.nvim&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  checkout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;main&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>I highly recommend reading <a href="https://nvim-mini.org/mini.nvim/doc/mini-deps.html" target="_blank" rel="noreferrer">mini.deps&#39; documentation</a> to know more about it.</p>`,68)]))}const g=s(t,[["render",l]]);export{c as __pageData,g as default};
