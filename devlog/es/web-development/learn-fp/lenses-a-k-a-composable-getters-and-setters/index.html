<!doctype html><html lang=es><head><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="text/html; charset=utf-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1.0,maximum-scale=1,viewport-fit=cover" name=viewport><meta content="interest-cohort=()" http-equiv=Permissions-Policy><title>
  Lenses o mejor dicho getters y setters combinables | Devlog
</title><link href=https://vonheikemen.github.io/devlog/print.css media=print rel=stylesheet><link href=https://vonheikemen.github.io/devlog/styles.css rel=stylesheet><link href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface" rel=stylesheet><link href=https://hachyderm.io/@vonheikemen rel=me><link href=https://twitter.com/VonHeikemen_ rel=me><meta content="javascript, paradigma-funcional, software, coding, development" name=keywords><meta content="Vamos implementar lenses desde cero" name=description><link href=https://dev.to/vonheikemen/lenses-o-mejor-dicho-getters-y-setters-combinables-kfo rel=canonical><body class=theme-base-custom><div class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><a href=https://vonheikemen.github.io/devlog/es/><h1>Devlog</h1></a></div><ul class=sidebar-nav><li class=sidebar-nav-item><a href=/>whoami</a><li class=sidebar-nav-item><a href=https://vonheikemen.github.io/devlog/es/tags/>Explorar tags</a><li class=sidebar-nav-item><a href=https://vonheikemen.github.io/devlog/>Devlog in english</a><li class=sidebar-nav-item><a href=https://vonheikemen.github.io/devlog/atom.xml>RSS</a></ul> © 2020-2026 Heiker Curiel</div></div><div class="content container"><div class=post><h1 class=post-title>Lenses o mejor dicho getters y setters combinables</h1><span class=post-date>2019-11-27 | Originalmente publicado en <a href=https://dev.to/vonheikemen/lenses-o-mejor-dicho-getters-y-setters-combinables-kfo> dev.to </a> | 7 minutos | <a href=https://vonheikemen.github.io/devlog/web-development/learn-fp/lenses-a-k-a-composable-getters-and-setters/> Read in english </a> </span><p>Esta vez vamos a descubrir qué son lenses (lentes en inglés), cómo se ven en javascript y espero que al final de todo esto podamos crear una implementación casi adecuada.<p>Pero primero vamos a retroceder un poco y vamos a preguntarnos.<h2 id=que-son-getter-y-setter>¿Qué son getter y setter?</h2><p>Son funciones que deben cumplir un propósito, extraer o asignar un valor. Pero claro eso no es lo único que pueden hacer. En la mayoría de los casos (que yo he visto) se usan para observar los cambios a una variable y causar algún efecto o para colocar validaciones que impidan algún comportamiento no deseado.<p>En javascript pueden ser explícitos.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> Some</span><span style=color:#9cabca>() {</span></span>
<span class=giallo-l><span style=color:#957fb8>  let</span><span> thing</span><span style=color:#e6c384> =</span><span style=color:#98bb6c> 'stuff'</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#9cabca> {</span></span>
<span class=giallo-l><span style=color:#7e9cd8>    get_thing</span><span style=color:#9cabca>() {</span></span>
<span class=giallo-l><span style=color:#727169>      // puedes hacer lo que sea aquí</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>      return</span><span> thing</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>    },</span></span>
<span class=giallo-l><span style=color:#7e9cd8>    set_thing</span><span style=color:#9cabca>(</span><span>value</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#727169>      // igual aquí</span></span>
<span class=giallo-l><span>      thing</span><span style=color:#e6c384> =</span><span> value</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>    }</span></span>
<span class=giallo-l><span style=color:#9cabca>  }</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>let</span><span> obj</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> Some</span><span style=color:#9cabca>();</span></span>
<span class=giallo-l><span>obj</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>get_thing</span><span style=color:#9cabca>();</span><span style=color:#727169> // => 'stuff'</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>obj</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>set_thing</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>'other stuff'</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>obj</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>get_thing</span><span style=color:#9cabca>();</span><span style=color:#727169> // => 'other stuff'</span></span></code></pre><p>O pueden ser implícitos.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>let</span><span> some</span><span style=color:#e6c384> =</span><span style=color:#9cabca> {};</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>Object</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>defineProperty</span><span style=color:#9cabca>(</span><span>some</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> 'thing'</span><span style=color:#9cabca>, {</span></span>
<span class=giallo-l><span style=color:#7e9cd8>  get</span><span style=color:#9cabca>() {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>    return</span><span style=color:#98bb6c> 'thing'</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>  },</span></span>
<span class=giallo-l><span style=color:#7e9cd8>  set</span><span style=color:#9cabca>(</span><span>value</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span>    console</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>log</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>"no pasarás"</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>  }</span></span>
<span class=giallo-l><span style=color:#9cabca>});</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>some</span><span style=color:#9cabca>.</span><span style=color:#e6c384>thing</span><span style=color:#727169> // => 'thing'</span></span>
<span class=giallo-l><span>some</span><span style=color:#9cabca>.</span><span style=color:#e6c384>thing =</span><span style=color:#98bb6c> 'what?'</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#727169>//</span></span>
<span class=giallo-l><span style=color:#727169>// no pasarás</span></span>
<span class=giallo-l><span style=color:#727169>//</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>some</span><span style=color:#9cabca>.</span><span style=color:#e6c384>thing</span><span style=color:#727169> // => 'thing'</span></span></code></pre><p>¿Pero qué tiene eso de malo que algunas personas sienten la necesidad de usar alternativas como lenses?<p>Comencemos con el segundo ejemplo. Puedo decirles a algunas personas no les gustan las cosas mágicas, el sólo hecho de tener una función que se ha estado ejecutando sin su conocimiento es suficiente para evitarlos.<p>El primer ejemplo es más interesante. Vamos a verlo otra vez.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span>obj</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>get_thing</span><span style=color:#9cabca>();</span><span style=color:#727169> // => 'stuff'</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>obj</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>set_thing</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>'other stuff'</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>obj</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>get_thing</span><span style=color:#9cabca>();</span><span style=color:#727169> // => 'other stuff'</span></span></code></pre><p>Se ejecuta <code>get_thing</code> el resultado es <code>stuff</code>, hasta ahora todo bien. Pero aquí viene el problema, cuando lo usas otra vez y de la misma manera obtienes <code>other stuff</code>. Tienes que rastrear la última llamada a <code>set_thing</code> para saber lo que obtendrás. No tienes la capacidad de predicir el resultado de <code>get_thing</code>, no puedes estar 100% seguro sin mirar (o saber) otras partes del código.<h2 id=hay-una-alternativa-mejor>¿Hay una alternativa mejor?</h2><p>No diría mejor. Intentemos crear estos lenses, después pueden decidir si les gusta o no.<p>¿Qué necesitamos? Lenses son un concepto que se encuentra en el paradigma de la programación funcional, entonces lo primero que haremos será crear unas funciones auxiliares. Estas serán nuestra primera versión de getter y setter.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#727169>// Getter</span></span>
<span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> prop</span><span style=color:#9cabca>(</span><span>key</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span> obj</span><span style=color:#957fb8> =></span><span> obj</span><span style=color:#9cabca>[</span><span>key</span><span style=color:#9cabca>];</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#727169>// Setter</span></span>
<span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> assoc</span><span style=color:#9cabca>(</span><span>key</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#9cabca> (</span><span>val</span><span style=color:#9cabca>,</span><span> obj</span><span style=color:#9cabca>)</span><span style=color:#957fb8> =></span><span> Object</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>assign</span><span style=color:#9cabca>({},</span><span> obj</span><span style=color:#9cabca>, {[</span><span>key</span><span style=color:#9cabca>]:</span><span> val</span><span style=color:#9cabca>});</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>Ahora el "constructor."<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> Lens</span><span style=color:#9cabca>(</span><span>getter</span><span style=color:#9cabca>,</span><span> setter</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#9cabca> {</span><span> getter</span><span style=color:#9cabca>,</span><span> setter</span><span style=color:#9cabca> };</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#727169>// Eso es todo.</span></span></code></pre><p>Notarán que <code>Lens</code> no hace absolutamente nada, esto es a propósito. Desde ya pueden darse cuenta que la mayor parte del trabajo está en <code>getter</code> y <code>setter</code>. El resultado será tan eficiente como lo sean sus implementaciones de <code>getter</code> y <code>setter</code>.<p>Ahora, para hacer que un <code>lens</code> haga algo útil crearemos tres funciones.<p><code>view</code>: Extrae un valor.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> view</span><span style=color:#9cabca>(</span><span>lens</span><span style=color:#9cabca>,</span><span> obj</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>   return</span><span> lens</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>getter</span><span style=color:#9cabca>(</span><span>obj</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p><code>over</code>: transforma un valor usando un callback.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> over</span><span style=color:#9cabca>(</span><span>lens</span><span style=color:#9cabca>,</span><span> fn</span><span style=color:#9cabca>,</span><span> obj</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span> lens</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>setter</span><span style=color:#9cabca>(</span></span>
<span class=giallo-l><span style=color:#7e9cd8>    fn</span><span style=color:#9cabca>(</span><span>lens</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>getter</span><span style=color:#9cabca>(</span><span>obj</span><span style=color:#9cabca>)),</span></span>
<span class=giallo-l><span>    obj</span></span>
<span class=giallo-l><span style=color:#9cabca>  );</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p><code>set</code>: reemplaza un valor<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> always</span><span style=color:#9cabca>(</span><span>val</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#9cabca> ()</span><span style=color:#957fb8> =></span><span> val</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> set</span><span style=color:#9cabca>(</span><span>lens</span><span style=color:#9cabca>,</span><span> val</span><span style=color:#9cabca>,</span><span> obj</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#727169>  // no es genial? Ya estamos reusando funciones</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#7e9cd8> over</span><span style=color:#9cabca>(</span><span>lens</span><span style=color:#9cabca>,</span><span style=color:#7e9cd8> always</span><span style=color:#9cabca>(</span><span>val</span><span style=color:#9cabca>),</span><span> obj</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>Es momento de crear unas pruebas.<p>Digamos que tenemos un objeto llamado <code>alice</code>.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>const</span><span> alice</span><span style=color:#e6c384> =</span><span style=color:#9cabca> {</span></span>
<span class=giallo-l><span>  name</span><span style=color:#9cabca>:</span><span style=color:#98bb6c> 'Alice Jones'</span><span style=color:#9cabca>,</span></span>
<span class=giallo-l><span>  address</span><span style=color:#9cabca>: [</span><span style=color:#98bb6c>'22 Walnut St'</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> 'San Francisco'</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> 'CA'</span><span style=color:#9cabca>],</span></span>
<span class=giallo-l><span>  pets</span><span style=color:#9cabca>: {</span><span> dog</span><span style=color:#9cabca>:</span><span style=color:#98bb6c> 'joker'</span><span style=color:#9cabca>,</span><span> cat</span><span style=color:#9cabca>:</span><span style=color:#98bb6c> 'batman'</span><span style=color:#9cabca> }</span></span>
<span class=giallo-l><span style=color:#9cabca>};</span></span></code></pre><p>Empecemos con algo simple, vamos a inspeccionar un valor. Tendríamos que hacer esto.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>const</span><span> result</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> view</span><span style=color:#9cabca>(</span></span>
<span class=giallo-l><span style=color:#7e9cd8>  Lens</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>prop</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>'name'</span><span style=color:#9cabca>),</span><span style=color:#7e9cd8> assoc</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>'name'</span><span style=color:#9cabca>)),</span></span>
<span class=giallo-l><span>  alice</span></span>
<span class=giallo-l><span style=color:#9cabca>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>result</span><span style=color:#727169> // => "Alice Jones"</span></span></code></pre><p>Veo que no están impresionados y eso está bien. Acabo de escribir un montón de cosas sólo para ver un nombre. Pero este es el asunto, todo eso son funciones aisladas. Siempre tenemos la opción de combinarlas y crear nuevas. Empecemos con <code>Lens(prop, assoc)</code>, vamos usarlo con mucha frecuencia.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> Lprop</span><span style=color:#9cabca>(</span><span>key</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#7e9cd8> Lens</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>prop</span><span style=color:#9cabca>(</span><span>key</span><span style=color:#9cabca>),</span><span style=color:#7e9cd8> assoc</span><span style=color:#9cabca>(</span><span>key</span><span style=color:#9cabca>));</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>Y ahora...<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>const</span><span> result</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> view</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>Lprop</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>'name'</span><span style=color:#9cabca>),</span><span> alice</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>result</span><span style=color:#727169> // => "Alice Jones"</span></span></code></pre><p>Pueden incluso ir más allá y crear una función que sólo acepte el objeto que contiene los datos.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>const</span><span style=color:#7e9cd8> get_name</span><span style=color:#e6c384> =</span><span> obj</span><span style=color:#957fb8> =></span><span style=color:#7e9cd8> view</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>Lprop</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>'name'</span><span style=color:#9cabca>),</span><span> obj</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#727169>// o con aplicación parcial</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>const</span><span> get_name</span><span style=color:#e6c384> =</span><span> view</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>bind</span><span style=color:#9cabca>(</span><span style=color:#ffa066>null</span><span style=color:#9cabca>,</span><span style=color:#7e9cd8> Lprop</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>'name'</span><span style=color:#9cabca>));</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#727169>// o usando una dependencia.</span></span>
<span class=giallo-l><span style=color:#727169>// view = curry(view);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>const</span><span> get_name</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> view</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>Lprop</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>'name'</span><span style=color:#9cabca>));</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#727169>// y lo mismo aplica para `set` y `over`</span></span></code></pre><p>Suficiente. Volvamos a nuestras pruebas. Vamos con <code>over</code>, vamos a transformar el texto a mayúsculas.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>const</span><span style=color:#7e9cd8> upper</span><span style=color:#e6c384> =</span><span> str</span><span style=color:#957fb8> =></span><span> str</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>toUpperCase</span><span style=color:#9cabca>();</span></span>
<span class=giallo-l><span style=color:#957fb8>const</span><span> uppercase_alice</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> over</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>Lprop</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>'name'</span><span style=color:#9cabca>),</span><span> upper</span><span style=color:#9cabca>,</span><span> alice</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#727169>// vieron lo que hice?</span></span>
<span class=giallo-l><span style=color:#7e9cd8>get_name</span><span style=color:#9cabca>(</span><span>uppercase_alice</span><span style=color:#9cabca>)</span><span style=color:#727169> // => "ALICE JONES"</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#7e9cd8>get_name</span><span style=color:#9cabca>(</span><span>alice</span><span style=color:#9cabca>)</span><span style=color:#727169>           // => "Alice Jones"</span></span></code></pre><p>Es el turno de <code>set</code>.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>const</span><span> alice_smith</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> set</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>Lprop</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>'name'</span><span style=color:#9cabca>),</span><span style=color:#98bb6c> 'Alice smith'</span><span style=color:#9cabca>,</span><span> alice</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#7e9cd8>get_name</span><span style=color:#9cabca>(</span><span>alice_smith</span><span style=color:#9cabca>)</span><span style=color:#727169> // => "Alice smith"</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#7e9cd8>get_name</span><span style=color:#9cabca>(</span><span>alice</span><span style=color:#9cabca>)</span><span style=color:#727169>       // => "Alice Jones"</span></span></code></pre><p>Todo muy bonito pero <code>name</code> es sólo una propiedad, ¿Qué pasa con los objetos anidados o los arreglos? Bueno, es ahí donde nuestra implementación se vuelve algo incómoda. Justo ahora tendríamos que hacer algo así.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>let</span><span> dog</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> Lens</span><span style=color:#9cabca>(</span></span>
<span class=giallo-l><span>  obj</span><span style=color:#957fb8> =></span><span style=color:#7e9cd8> prop</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>'dog'</span><span style=color:#9cabca>)(</span><span style=color:#7e9cd8>prop</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>'pets'</span><span style=color:#9cabca>)(</span><span>obj</span><span style=color:#9cabca>)),</span></span>
<span class=giallo-l><span>  obj</span><span style=color:#957fb8> =></span><span style=color:#7e9cd8> assoc</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>'dog'</span><span style=color:#9cabca>)(</span><span style=color:#7e9cd8>assoc</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>'pets'</span><span style=color:#9cabca>)(</span><span>obj</span><span style=color:#9cabca>))</span></span>
<span class=giallo-l><span style=color:#9cabca>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#7e9cd8>view</span><span style=color:#9cabca>(</span><span>dog</span><span style=color:#9cabca>,</span><span> alice</span><span style=color:#9cabca>);</span><span style=color:#727169> // => "joker"</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#727169>// o traemos una dependencia, `compose`</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>dog</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> Lens</span><span style=color:#9cabca>(</span></span>
<span class=giallo-l><span style=color:#7e9cd8>  compose</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>prop</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>"dog"</span><span style=color:#9cabca>),</span><span style=color:#7e9cd8> prop</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>"pets"</span><span style=color:#9cabca>)),</span></span>
<span class=giallo-l><span style=color:#7e9cd8>  compose</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>assoc</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>"dog"</span><span style=color:#9cabca>),</span><span style=color:#7e9cd8> assoc</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>"pets"</span><span style=color:#9cabca>))</span></span>
<span class=giallo-l><span style=color:#9cabca>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#7e9cd8>view</span><span style=color:#9cabca>(</span><span>dog</span><span style=color:#9cabca>,</span><span> alice</span><span style=color:#9cabca>);</span><span style=color:#727169> // => "joker"</span></span></code></pre><p>Los escucho. No se preocupen, no los dejaría escribir cosas así. Es por cosas como esta que algunos van y dicen "usa <a rel="noopener external" href=https://ramdajs.com/ target=_blank>Ramda</a> y ya" (y tienen razón) ¿Pero qué hace ramda que lo hace tan especial?<h2 id=el-toque-especial>El toque especial</h2><p>Si van a la documentación de ramda y buscan "lens" verán que tienen una función llamada <code>lensProp</code> que basicamente hace lo mismo que <code>Lprop</code>. Y si van al código fuente verán esto.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> lensProp</span><span style=color:#9cabca>(</span><span>k</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#7e9cd8> lens</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>prop</span><span style=color:#9cabca>(</span><span>k</span><span style=color:#9cabca>),</span><span style=color:#7e9cd8> assoc</span><span style=color:#9cabca>(</span><span>k</span><span style=color:#9cabca>));</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>Miren eso. Ahora bien, los comentarios en el código y la documentación sugieren que trabaja con una sola propiedad. Volvamos a nuestra búsqueda en su documentación. Ahora prestemos atención a esa curiosa función llamada <code>lensPath</code>. Parece que hace exactamente lo que queremos. Una vez más vemos el código fuente y ¿qué vemos?<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> lensPath</span><span style=color:#9cabca>(</span><span>p</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#7e9cd8> lens</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>path</span><span style=color:#9cabca>(</span><span>p</span><span style=color:#9cabca>),</span><span style=color:#7e9cd8> assocPath</span><span style=color:#9cabca>(</span><span>p</span><span style=color:#9cabca>));</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#727169>// Bienvenidos al paradigma funcional</span></span></code></pre><p>El secreto está en otras funciones que no tienen ningún vinculo específico con <code>lenses</code>. ¿No es genial?<p>¿Qué hay en esa función <code>path</code>? Vamos a revisar. Voy a mostrarles una versión ligeramente diferente, pero el comportamiento es el mismo.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> path</span><span style=color:#9cabca>(</span><span>keys</span><span style=color:#9cabca>,</span><span> obj</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  if</span><span style=color:#9cabca> (</span><span style=color:#ff5d62>arguments</span><span style=color:#9cabca>.</span><span>length</span><span style=color:#e6c384> ===</span><span style=color:#d27e99> 1</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#727169>    // esto es para imitar la dependencia `curry`</span></span>
<span class=giallo-l><span style=color:#727169>    // esto es lo que pasa</span></span>
<span class=giallo-l><span style=color:#727169>    // retornan una función que recuerda `keys`</span></span>
<span class=giallo-l><span style=color:#727169>    // y espera el argumento `obj`</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>    return</span><span> path</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>bind</span><span style=color:#9cabca>(</span><span style=color:#ff5d62>this</span><span style=color:#9cabca>,</span><span> keys</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>  }</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>  var</span><span> result</span><span style=color:#e6c384> =</span><span> obj</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#957fb8>  var</span><span> idx</span><span style=color:#e6c384> =</span><span style=color:#d27e99> 0</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  while</span><span style=color:#9cabca> (</span><span>idx</span><span style=color:#e6c384> &lt;</span><span> keys</span><span style=color:#9cabca>.</span><span>length</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#727169>    // no nos agrada null</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>    if</span><span style=color:#9cabca> (</span><span>result</span><span style=color:#e6c384> ==</span><span style=color:#ffa066> null</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>      return</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>    }</span></span>
<span class=giallo-l><span>    </span></span>
<span class=giallo-l><span style=color:#727169>    // así obtenemos los objetos anidados</span></span>
<span class=giallo-l><span>    result</span><span style=color:#e6c384> =</span><span> result</span><span style=color:#9cabca>[</span><span>keys</span><span style=color:#9cabca>[</span><span>idx</span><span style=color:#9cabca>]];</span></span>
<span class=giallo-l><span>    idx</span><span style=color:#e6c384> +=</span><span style=color:#d27e99> 1</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>  }</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span> result</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>Haré lo mismo con <code>assocPath</code>. En este caso en ramda usan algunas funciones internas pero en esencia esto es lo que pasa.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> assocPath</span><span style=color:#9cabca>(</span><span>path</span><span style=color:#9cabca>,</span><span> value</span><span style=color:#9cabca>,</span><span> obj</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#727169>  // otra vez esto</span></span>
<span class=giallo-l><span style=color:#727169>  // por eso tienen la función `curry`</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  if</span><span style=color:#9cabca> (</span><span style=color:#ff5d62>arguments</span><span style=color:#9cabca>.</span><span>length</span><span style=color:#e6c384> ===</span><span style=color:#d27e99> 1</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>    return</span><span> assocPath</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>bind</span><span style=color:#9cabca>(</span><span style=color:#ff5d62>this</span><span style=color:#9cabca>,</span><span> path</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>  }</span><span style=color:#957fb8;font-weight:700> else if</span><span style=color:#9cabca> (</span><span style=color:#ff5d62>arguments</span><span style=color:#9cabca>.</span><span>length</span><span style=color:#e6c384> ===</span><span style=color:#d27e99> 2</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>    return</span><span> assocPath</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>bind</span><span style=color:#9cabca>(</span><span style=color:#ff5d62>this</span><span style=color:#9cabca>,</span><span> path</span><span style=color:#9cabca>,</span><span> value</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>  }</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#727169>  // revisamos si está vacío</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  if</span><span style=color:#9cabca> (</span><span>path</span><span style=color:#9cabca>.</span><span>length</span><span style=color:#e6c384> ===</span><span style=color:#d27e99> 0</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>    return</span><span> value</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>  }</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>  var</span><span> index</span><span style=color:#e6c384> =</span><span> path</span><span style=color:#9cabca>[</span><span style=color:#d27e99>0</span><span style=color:#9cabca>];</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#727169>  // Cuidado: recursividad adelante</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  if</span><span style=color:#9cabca> (</span><span>path</span><span style=color:#9cabca>.</span><span>length</span><span style=color:#e6c384> ></span><span style=color:#d27e99> 1</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8>    var</span><span> is_empty</span><span style=color:#e6c384> =</span></span>
<span class=giallo-l><span style=color:#e6c384>      typeof</span><span> obj</span><span style=color:#e6c384> !==</span><span style=color:#98bb6c> 'object'</span><span style=color:#e6c384> ||</span><span> obj</span><span style=color:#e6c384> ===</span><span style=color:#ffa066> null</span><span style=color:#e6c384> || !</span><span>obj</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>hasOwnProperty</span><span style=color:#9cabca>(</span><span>index</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#727169>    // si el objeto actual está "vacío"</span></span>
<span class=giallo-l><span style=color:#727169>    // tenemos que crear otro</span></span>
<span class=giallo-l><span style=color:#727169>    // de lo contrario usamos el valor en `index`</span></span>
<span class=giallo-l><span style=color:#957fb8>    var</span><span> next</span><span style=color:#e6c384> =</span><span> is_empty</span></span>
<span class=giallo-l><span style=color:#e6c384>      ? typeof</span><span> path</span><span style=color:#9cabca>[</span><span style=color:#d27e99>1</span><span style=color:#9cabca>]</span><span style=color:#e6c384> ===</span><span style=color:#98bb6c> 'number'</span></span>
<span class=giallo-l><span style=color:#e6c384>        ?</span><span style=color:#9cabca> []</span></span>
<span class=giallo-l><span style=color:#e6c384>        :</span><span style=color:#9cabca> {}</span></span>
<span class=giallo-l><span style=color:#e6c384>      :</span><span> obj</span><span style=color:#9cabca>[</span><span>index</span><span style=color:#9cabca>];</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#727169>    // empecemos otra vez</span></span>
<span class=giallo-l><span style=color:#727169>    // pero ahora con un `path` reducido</span></span>
<span class=giallo-l><span style=color:#727169>    // y `next` es el nuevo `obj`</span></span>
<span class=giallo-l><span>    value</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> assocPath</span><span style=color:#9cabca>(</span><span style=color:#7aa89f>Array</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>prototype</span><span style=color:#9cabca>.</span><span>slice</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>call</span><span style=color:#9cabca>(</span><span>path</span><span style=color:#9cabca>,</span><span style=color:#d27e99> 1</span><span style=color:#9cabca>),</span><span> value</span><span style=color:#9cabca>,</span><span> next</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>  }</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#727169>  // el caso base</span></span>
<span class=giallo-l><span style=color:#727169>  // o copiamos un arreglo o un objeto</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  if</span><span style=color:#9cabca> (</span><span style=color:#e6c384>typeof</span><span> index</span><span style=color:#e6c384> ===</span><span style=color:#98bb6c> 'number'</span><span style=color:#e6c384> &&</span><span> Array</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>isArray</span><span style=color:#9cabca>(</span><span>obj</span><span style=color:#9cabca>)) {</span></span>
<span class=giallo-l><span style=color:#727169>    // 'copiamos' el arreglo</span></span>
<span class=giallo-l><span style=color:#957fb8>    var</span><span> arr</span><span style=color:#e6c384> =</span><span style=color:#9cabca> [].</span><span style=color:#7e9cd8>concat</span><span style=color:#9cabca>(</span><span>obj</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>    arr</span><span style=color:#9cabca>[</span><span>index</span><span style=color:#9cabca>]</span><span style=color:#e6c384> =</span><span> value</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>    return</span><span> arr</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>  }</span><span style=color:#957fb8;font-weight:700> else</span><span style=color:#9cabca> {</span></span>
<span class=giallo-l><span style=color:#727169>    // una copia como las de antes</span></span>
<span class=giallo-l><span style=color:#957fb8>    var</span><span> result</span><span style=color:#e6c384> =</span><span style=color:#9cabca> {};</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>    for</span><span style=color:#9cabca> (</span><span style=color:#957fb8>var</span><span> p</span><span style=color:#e6c384> in</span><span> obj</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span>      result</span><span style=color:#9cabca>[</span><span>p</span><span style=color:#9cabca>]</span><span style=color:#e6c384> =</span><span> obj</span><span style=color:#9cabca>[</span><span>p</span><span style=color:#9cabca>];</span></span>
<span class=giallo-l><span style=color:#9cabca>    }</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>    result</span><span style=color:#9cabca>[</span><span>index</span><span style=color:#9cabca>]</span><span style=color:#e6c384> =</span><span> value</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>    return</span><span> result</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>  }</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>Con nuestro nuevo conocimiento podemos crear <code>Lpath</code> y mejorar <code>Lprop</code>.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> Lpath</span><span style=color:#9cabca>(</span><span>keys</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#7e9cd8> Lens</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>path</span><span style=color:#9cabca>(</span><span>keys</span><span style=color:#9cabca>),</span><span style=color:#7e9cd8> assocPath</span><span style=color:#9cabca>(</span><span>keys</span><span style=color:#9cabca>));</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> Lprop</span><span style=color:#9cabca>(</span><span>key</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#7e9cd8> Lens</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>path</span><span style=color:#9cabca>([</span><span>key</span><span style=color:#9cabca>]),</span><span style=color:#7e9cd8> assocPath</span><span style=color:#9cabca>([</span><span>key</span><span style=color:#9cabca>]));</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>Ahora podemos hacer otras cosas, como manipular la propiedad <code>pets</code> de <code>alice</code>.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>const</span><span> dog_lens</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> Lpath</span><span style=color:#9cabca>([</span><span style=color:#98bb6c>'pets'</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> 'dog'</span><span style=color:#9cabca>]);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#7e9cd8>view</span><span style=color:#9cabca>(</span><span>dog_lens</span><span style=color:#9cabca>,</span><span> alice</span><span style=color:#9cabca>);</span><span style=color:#727169>     // => 'joker'</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>let</span><span> new_alice</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> over</span><span style=color:#9cabca>(</span><span>dog_lens</span><span style=color:#9cabca>,</span><span> upper</span><span style=color:#9cabca>,</span><span> alice</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#7e9cd8>view</span><span style=color:#9cabca>(</span><span>dog_lens</span><span style=color:#9cabca>,</span><span> new_alice</span><span style=color:#9cabca>);</span><span style=color:#727169> // => 'JOKER'</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>new_alice</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> set</span><span style=color:#9cabca>(</span><span>dog_lens</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> 'Joker'</span><span style=color:#9cabca>,</span><span> alice</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#7e9cd8>view</span><span style=color:#9cabca>(</span><span>dog_lens</span><span style=color:#9cabca>,</span><span> new_alice</span><span style=color:#9cabca>);</span><span style=color:#727169> // => 'Joker'</span></span></code></pre><p>Todo funciona de maravilla pero hay un pequeño detalle, nuestro constructor <code>Lens</code> no produce "instancias" combinables. Imaginen que tenemos lenses en varios lugares y queremos combinarlos de la siguiente manera.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#7e9cd8>compose</span><span style=color:#9cabca>(</span><span>pet_lens</span><span style=color:#9cabca>,</span><span> imaginary_lens</span><span style=color:#9cabca>,</span><span> dragon_lens</span><span style=color:#9cabca>);</span></span></code></pre><p>Eso no funcionaría porque <code>compose</code> espera una lista de funciones y lo que tenemos ahora son objetos. Pero podemos cambiar eso (de una forma muy curiosa) con algunos trucos propios de la programación funcional.<p>Empecemos con el constructor. En lugar de devolver un objeto vamos retornar una función, una que reciba "por partes" un callback, un objeto y que devuelva un <strong>Functor</strong> (eso es una cosa que tiene un método <code>map</code> que sigue <a rel="noopener external" href=https://github.com/fantasyland/fantasy-land#functor target=_blank>estas reglas</a>)<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> Lens</span><span style=color:#9cabca>(</span><span>getter</span><span style=color:#9cabca>,</span><span> setter</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span> fn</span><span style=color:#957fb8> =></span><span> obj</span><span style=color:#957fb8> =></span><span style=color:#9cabca> {</span></span>
<span class=giallo-l><span style=color:#957fb8>    const</span><span style=color:#7e9cd8> apply</span><span style=color:#e6c384> =</span><span> focus</span><span style=color:#957fb8> =></span><span style=color:#7e9cd8> setter</span><span style=color:#9cabca>(</span><span>focus</span><span style=color:#9cabca>,</span><span> obj</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#957fb8>    const</span><span> functor</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> fn</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>getter</span><span style=color:#9cabca>(</span><span>obj</span><span style=color:#9cabca>));</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>    return</span><span> functor</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>map</span><span style=color:#9cabca>(</span><span>apply</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>  };</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>¿Y eso de <code>fn => obj => </code>qué? Eso nos va ayudar con el problema que tenemos con <code>compose</code>. Después de que le proporcionas <code>getter</code> y <code>setter</code> te devuelve una función que es compatible con <code>compose</code>.<p>¿Y <code>functor.map</code>? Eso es para asegurarnos que podamos usar un lens como una unidad (como <code>Lprop('pets')</code>) y también como parte de una cadena usando <code>compose</code>.<p>En caso de que se pregunten qué diferencia hay con lo que hace ramda, ellos usan su propia implementación de la función <code>map</code>.<p>Ahora modificamos <code>view</code> y <code>over</code>. Empezando con <code>view</code>.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> view</span><span style=color:#9cabca>(</span><span>lens</span><span style=color:#9cabca>,</span><span> obj</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span style=color:#7e9cd8> constant</span><span style=color:#e6c384> =</span><span> value</span><span style=color:#957fb8> =></span><span style=color:#9cabca> ({</span><span> value</span><span style=color:#9cabca>,</span><span style=color:#7e9cd8> map</span><span style=color:#9cabca>: ()</span><span style=color:#957fb8> =></span><span style=color:#7e9cd8> constant</span><span style=color:#9cabca>(</span><span>value</span><span style=color:#9cabca>) });</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#7e9cd8> lens</span><span style=color:#9cabca>(</span><span>constant</span><span style=color:#9cabca>)(</span><span>obj</span><span style=color:#9cabca>).</span><span style=color:#e6c384>value</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>Esa función <code>constant</code> puede que parezca innecariamente compleja pero tiene su propósito. Las cosas se pueden enredar mucho cuando usas <code>compose</code>, esa estructura se asegura que el valor que queremos se mantenga intacto.<p>¿Y <code>over</code>? Es casi igual, excepto que en ese caso sí utilizamos la función <code>setter</code>.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> over</span><span style=color:#9cabca>(</span><span>lens</span><span style=color:#9cabca>,</span><span> fn</span><span style=color:#9cabca>,</span><span> obj</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span style=color:#7e9cd8> identity</span><span style=color:#e6c384> =</span><span> value</span><span style=color:#957fb8> =></span><span style=color:#9cabca> ({</span><span> value</span><span style=color:#9cabca>,</span><span style=color:#7e9cd8> map</span><span style=color:#9cabca>:</span><span> setter</span><span style=color:#957fb8> =></span><span style=color:#7e9cd8> identity</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>setter</span><span style=color:#9cabca>(</span><span>value</span><span style=color:#9cabca>)) });</span></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span style=color:#7e9cd8> apply</span><span style=color:#e6c384> =</span><span> val</span><span style=color:#957fb8> =></span><span style=color:#7e9cd8> identity</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>fn</span><span style=color:#9cabca>(</span><span>val</span><span style=color:#9cabca>));</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#7e9cd8> lens</span><span style=color:#9cabca>(</span><span>apply</span><span style=color:#9cabca>)(</span><span>obj</span><span style=color:#9cabca>).</span><span style=color:#e6c384>value</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>Y ahora deberíamos tener una implementación casi adecuada. Esto es lo que tenemos sin contar las dependencias (<code>path</code> and <code>assocPath</code>).<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> Lens</span><span style=color:#9cabca>(</span><span>getter</span><span style=color:#9cabca>,</span><span> setter</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span> fn</span><span style=color:#957fb8> =></span><span> obj</span><span style=color:#957fb8> =></span><span style=color:#9cabca> {</span></span>
<span class=giallo-l><span style=color:#957fb8>    const</span><span style=color:#7e9cd8> apply</span><span style=color:#e6c384> =</span><span> focus</span><span style=color:#957fb8> =></span><span style=color:#7e9cd8> setter</span><span style=color:#9cabca>(</span><span>focus</span><span style=color:#9cabca>,</span><span> obj</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#957fb8>    const</span><span> functor</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> fn</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>getter</span><span style=color:#9cabca>(</span><span>obj</span><span style=color:#9cabca>));</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>    return</span><span> functor</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>map</span><span style=color:#9cabca>(</span><span>apply</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>  };</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> view</span><span style=color:#9cabca>(</span><span>lens</span><span style=color:#9cabca>,</span><span> obj</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span style=color:#7e9cd8> constant</span><span style=color:#e6c384> =</span><span> value</span><span style=color:#957fb8> =></span><span style=color:#9cabca> ({</span><span> value</span><span style=color:#9cabca>,</span><span style=color:#7e9cd8> map</span><span style=color:#9cabca>: ()</span><span style=color:#957fb8> =></span><span style=color:#7e9cd8> constant</span><span style=color:#9cabca>(</span><span>value</span><span style=color:#9cabca>) });</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#7e9cd8> lens</span><span style=color:#9cabca>(</span><span>constant</span><span style=color:#9cabca>)(</span><span>obj</span><span style=color:#9cabca>).</span><span style=color:#e6c384>value</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> over</span><span style=color:#9cabca>(</span><span>lens</span><span style=color:#9cabca>,</span><span> fn</span><span style=color:#9cabca>,</span><span> obj</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span style=color:#7e9cd8> identity</span><span style=color:#e6c384> =</span><span> value</span><span style=color:#957fb8> =></span><span style=color:#9cabca> ({</span><span> value</span><span style=color:#9cabca>,</span><span style=color:#7e9cd8> map</span><span style=color:#9cabca>:</span><span> setter</span><span style=color:#957fb8> =></span><span style=color:#7e9cd8> identity</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>setter</span><span style=color:#9cabca>(</span><span>value</span><span style=color:#9cabca>)) });</span></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span style=color:#7e9cd8> apply</span><span style=color:#e6c384> =</span><span> val</span><span style=color:#957fb8> =></span><span style=color:#7e9cd8> identity</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>fn</span><span style=color:#9cabca>(</span><span>val</span><span style=color:#9cabca>));</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#7e9cd8> lens</span><span style=color:#9cabca>(</span><span>apply</span><span style=color:#9cabca>)(</span><span>obj</span><span style=color:#9cabca>).</span><span style=color:#e6c384>value</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> set</span><span style=color:#9cabca>(</span><span>lens</span><span style=color:#9cabca>,</span><span> val</span><span style=color:#9cabca>,</span><span> obj</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#7e9cd8> over</span><span style=color:#9cabca>(</span><span>lens</span><span style=color:#9cabca>,</span><span style=color:#7e9cd8> always</span><span style=color:#9cabca>(</span><span>val</span><span style=color:#9cabca>),</span><span> obj</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> Lprop</span><span style=color:#9cabca>(</span><span>key</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#7e9cd8> Lens</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>path</span><span style=color:#9cabca>([</span><span>key</span><span style=color:#9cabca>]),</span><span style=color:#7e9cd8> assocPath</span><span style=color:#9cabca>([</span><span>key</span><span style=color:#9cabca>]));</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> Lpath</span><span style=color:#9cabca>(</span><span>keys</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#7e9cd8> Lens</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>path</span><span style=color:#9cabca>(</span><span>keys</span><span style=color:#9cabca>),</span><span style=color:#7e9cd8> assocPath</span><span style=color:#9cabca>(</span><span>keys</span><span style=color:#9cabca>));</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> always</span><span style=color:#9cabca>(</span><span>val</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#9cabca> ()</span><span style=color:#957fb8> =></span><span> val</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>¿Me creerían si les digo que funciona? No deberían. Hagamos unas pruebas. Volvamos con <code>alice</code> y vamos añadirle otro objeto, <code>calie</code>.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>const</span><span> alice</span><span style=color:#e6c384> =</span><span style=color:#9cabca> {</span></span>
<span class=giallo-l><span>  name</span><span style=color:#9cabca>:</span><span style=color:#98bb6c> "Alice Jones"</span><span style=color:#9cabca>,</span></span>
<span class=giallo-l><span>  address</span><span style=color:#9cabca>: [</span><span style=color:#98bb6c>"22 Walnut St"</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> "San Francisco"</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> "CA"</span><span style=color:#9cabca>],</span></span>
<span class=giallo-l><span>  pets</span><span style=color:#9cabca>: {</span><span> dog</span><span style=color:#9cabca>:</span><span style=color:#98bb6c> "joker"</span><span style=color:#9cabca>,</span><span> cat</span><span style=color:#9cabca>:</span><span style=color:#98bb6c> "batman"</span><span style=color:#9cabca>,</span><span> imaginary</span><span style=color:#9cabca>: {</span><span> dragon</span><span style=color:#9cabca>:</span><span style=color:#98bb6c> "harley"</span><span style=color:#9cabca> } }</span></span>
<span class=giallo-l><span style=color:#9cabca>};</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>const</span><span> calie</span><span style=color:#e6c384> =</span><span style=color:#9cabca> {</span></span>
<span class=giallo-l><span>  name</span><span style=color:#9cabca>:</span><span style=color:#98bb6c> "calie Jones"</span><span style=color:#9cabca>,</span></span>
<span class=giallo-l><span>  address</span><span style=color:#9cabca>: [</span><span style=color:#98bb6c>"22 Walnut St"</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> "San Francisco"</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> "CA"</span><span style=color:#9cabca>],</span></span>
<span class=giallo-l><span>  pets</span><span style=color:#9cabca>: {</span><span> dog</span><span style=color:#9cabca>:</span><span style=color:#98bb6c> "riddler"</span><span style=color:#9cabca>,</span><span> cat</span><span style=color:#9cabca>:</span><span style=color:#98bb6c> "ivy"</span><span style=color:#9cabca>,</span><span> imaginary</span><span style=color:#9cabca>: {</span><span> dragon</span><span style=color:#9cabca>:</span><span style=color:#98bb6c> "hush"</span><span style=color:#9cabca> } },</span></span>
<span class=giallo-l><span>  friend</span><span style=color:#9cabca>: [</span><span>alice</span><span style=color:#9cabca>]</span></span>
<span class=giallo-l><span style=color:#9cabca>};</span></span></code></pre><p>Y porque teniamos todo planeado desde antes, ya tenemos unos lenses disponibles.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#727169>// uno genérico</span></span>
<span class=giallo-l><span style=color:#957fb8>const</span><span> head_lens</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> Lprop</span><span style=color:#9cabca>(</span><span style=color:#d27e99>0</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#727169>// otros específicos</span></span>
<span class=giallo-l><span style=color:#957fb8>const</span><span> bff_lens</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> compose</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>Lprop</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>'friend'</span><span style=color:#9cabca>),</span><span> head_lens</span><span style=color:#9cabca>);</span><span> </span></span>
<span class=giallo-l><span style=color:#957fb8>const</span><span> imaginary_lens</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> Lpath</span><span style=color:#9cabca>([</span><span style=color:#98bb6c>'pets'</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> 'imaginary'</span><span style=color:#9cabca>]);</span></span></code></pre><p>Supongamos que queremos manipular la propiedad <code>dragon</code> de cada una, todo lo que tenemos que hacer es combinar.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>const</span><span> dragon_lens</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> compose</span><span style=color:#9cabca>(</span><span>imaginary_lens</span><span style=color:#9cabca>,</span><span style=color:#7e9cd8> Lprop</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>'dragon'</span><span style=color:#9cabca>));</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#727169>// sólo porque sí</span></span>
<span class=giallo-l><span style=color:#957fb8>const</span><span> bff_dragon_lens</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> compose</span><span style=color:#9cabca>(</span><span>bff_lens</span><span style=color:#9cabca>,</span><span> dragon_lens</span><span style=color:#9cabca>);</span><span> </span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#727169>// demo</span></span>
<span class=giallo-l><span style=color:#957fb8>const</span><span style=color:#7e9cd8> upper</span><span style=color:#e6c384> =</span><span> str</span><span style=color:#957fb8> =></span><span> str</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>toUpperCase</span><span style=color:#9cabca>();</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#727169>// view</span></span>
<span class=giallo-l><span style=color:#7e9cd8>view</span><span style=color:#9cabca>(</span><span>dragon_lens</span><span style=color:#9cabca>,</span><span> calie</span><span style=color:#9cabca>);</span><span style=color:#727169>         // => "hush"</span></span>
<span class=giallo-l><span style=color:#7e9cd8>view</span><span style=color:#9cabca>(</span><span>bff_dragon_lens</span><span style=color:#9cabca>,</span><span> calie</span><span style=color:#9cabca>);</span><span style=color:#727169>     // => "harley"</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#727169>// over</span></span>
<span class=giallo-l><span style=color:#957fb8>let</span><span> new_calie</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> over</span><span style=color:#9cabca>(</span><span>dragon_lens</span><span style=color:#9cabca>,</span><span> upper</span><span style=color:#9cabca>,</span><span> calie</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#7e9cd8>view</span><span style=color:#9cabca>(</span><span>dragon_lens</span><span style=color:#9cabca>,</span><span> new_calie</span><span style=color:#9cabca>);</span><span style=color:#727169>     // => "HUSH"</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>new_calie</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> over</span><span style=color:#9cabca>(</span><span>bff_dragon_lens</span><span style=color:#9cabca>,</span><span> upper</span><span style=color:#9cabca>,</span><span> calie</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#7e9cd8>view</span><span style=color:#9cabca>(</span><span>bff_dragon_lens</span><span style=color:#9cabca>,</span><span> new_calie</span><span style=color:#9cabca>);</span><span style=color:#727169> // => "HARLEY"</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#727169>// set</span></span>
<span class=giallo-l><span>new_calie</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> set</span><span style=color:#9cabca>(</span><span>dragon_lens</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> 'fluffykins'</span><span style=color:#9cabca>,</span><span> calie</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#7e9cd8>view</span><span style=color:#9cabca>(</span><span>dragon_lens</span><span style=color:#9cabca>,</span><span> new_calie</span><span style=color:#9cabca>);</span><span style=color:#727169>     // => "fluffykins"</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>new_calie</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> set</span><span style=color:#9cabca>(</span><span>bff_dragon_lens</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> 'pumpkin'</span><span style=color:#9cabca>,</span><span> calie</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#7e9cd8>view</span><span style=color:#9cabca>(</span><span>bff_dragon_lens</span><span style=color:#9cabca>,</span><span> new_calie</span><span style=color:#9cabca>);</span><span style=color:#727169> // => "pumpkin"</span></span></code></pre><p>Así que acabamos de manipular un objeto anidado en varios niveles combinando lenses. Resolvimos un problema combinando funciones. Si no les parece genial no sé qué más decirles.<p>Estas cosas son difíciles de vender porque requieren de un estilo particular para poder aprovecharlos al máximo. Y para los que usan javascript, probablemente existe una librería que resuelve el mismo problema pero de una manera más conveniente o por lo menos que se ajuste a su estilo.<p>En fin, si aún están interesado en cómo funcionarían estos lenses en un contexto más complejo revisen <a rel="noopener external" href=https://github.com/kwasniew/hyperapp-realworld-example-app target=_blank>este repositorio</a>, es un <a rel="noopener external" href=https://github.com/gothinkster/realworld target=_blank>ejemplo de "real world app"</a> (algo así como un clon de medium.com) usa hyperapp para manejar la interfaz. El autor quiso usar lenses para manejar el estado de la aplicación.<h2 id=fuentes>Fuentes</h2><ul><li><a rel="noopener external" href=https://ramdajs.com/docs/ target=_blank>ramda - docs</a><li><a rel="noopener external" href=https://gist.github.com/branneman/f06bd451f74e5bc1725db23be682d4fe target=_blank>fp-lenses.js</a><li><a href="https://www.youtube.com/watch?v=IoVaArsh6tM" rel="noopener external" target=_blank>Lambda World 2018 - Functional Lenses in JavaScript (video)</a></ul><hr><p>¿Tienen alguna pregunta? Pueden dejar un comentario en cualquiera de estas plataformas:<ul><li><a href=https://dev.to/vonheikemen/lenses-o-mejor-dicho-getters-y-setters-combinables-kfo rel=noopener target=_blank>dev.to</a><li><a href=https://vonheikemen.hashnode.dev/lenses-aka-composable-getters-and-setters-es rel=noopener target=_blank>Hashnode</a></ul><p>Pueden contactarme por las redes sociales:<ul><li>Twitter <a rel="noopener me" href=https://twitter.com/VonHeikemen_ target=_blank> @VonHeikemen_ </a><li>Bluesky <a rel="noopener me" href=https://bsky.app/profile/vonheikemen.bsky.social target=_blank> @vonheikemen.bsky.social </a><li>Mastodon <a rel="noopener me" href=https://hachyderm.io/@vonheikemen target=_blank> @vonheikemen@hachyderm.io </a></ul><p>Gracias por su tiempo. Si este artículo les pareció útil y quieren apoyar mis esfuerzos para crear más contenido, pueden dejar una propina en buy me a coffee ☕.</p><a href=https://ko-fi.com/vonheikemen style=justify-content:center;display:flex target=_blank> <img alt="Buy Me A Coffee" src="https://storage.ko-fi.com/cdn/kofi2.png?v=3" style=width:217px!important;height:60px!important> </a></div></div>