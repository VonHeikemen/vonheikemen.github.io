<!doctype html><html lang=es><head><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="text/html; charset=utf-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1.0,maximum-scale=1,viewport-fit=cover" name=viewport><meta content="interest-cohort=()" http-equiv=Permissions-Policy><title>
  Usando Netrw, el navegador de archivos nativo de vim | Devlog
</title><link href=https://vonheikemen.github.io/devlog/print.css media=print rel=stylesheet><link href=https://vonheikemen.github.io/devlog/styles.css rel=stylesheet><link href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface" rel=stylesheet><link href=https://hachyderm.io/@vonheikemen rel=me><link href=https://twitter.com/VonHeikemen_ rel=me><meta content="vim, shell, software, coding, development" name=keywords><meta content="Donde aprenderemos a usar y personalizar Netrw" name=description><body class=theme-base-custom><div class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><a href=https://vonheikemen.github.io/devlog/es/><h1>Devlog</h1></a></div><ul class=sidebar-nav><li class=sidebar-nav-item><a href=/>whoami</a><li class=sidebar-nav-item><a href=https://vonheikemen.github.io/devlog/es/tags/>Explorar tags</a><li class=sidebar-nav-item><a href=https://vonheikemen.github.io/devlog/>Devlog in english</a></ul> © 2020-2024 Heiker Curiel</div></div><div class="content container"><div class=post><h1 class=post-title>Usando Netrw, el navegador de archivos nativo de vim</h1><span class=post-date>2021-01-10 | 14 minutos | <a href=https://vonheikemen.github.io/devlog/tools/using-netrw-vim-builtin-file-explorer/> Read in english </a> </span><p>¿Sabían que vim tiene un navegador de archivos? Sí, es un plugin que ya viene instalado con vim. Se llama Netrw... y no es muy popular, al menos no en comparación con otros plugins como NERDtree. La razón para esto es: 1) no es muy intuitivo. 2) tiene algunas limitaciones. 3) se ve feo. Hoy vamos a aprender a usarlo, veremos cómo sobrepasar algunas de sus limitaciones y en el proceso vamos a convertirlo en un navegador de archivos más intuitivo.<h2 id=presentacion>Presentación</h2><p>Para empezar a conocer Netrw podemos intentar abrir un directorio usando vim (algo así: <code>vim .</code>). Asumiendo que su <code>vimrc</code> no está fuertemente configurado Netrw debería verse así.<p><img alt="netrw en pantalla completa" src=https://res.cloudinary.com/vonheikemen/image/upload/v1609938838/devlog/using-vim-netrw/netrw-full-screen_2021-01-06_09-13-11.png><p>Lo primero que vemos es un banner que tiene información sobre el directorio. Esto es lo que nos muestra.<ul><li>Información de Netrw, nombre y versión (v156).<li>La ruta del directorio.<li>El criterio que usa para ordenar los archivos y directorios, en este caso es por nombre.<li>Otro criterio de orden. Esta vez es una secuencia que usará para dar prioridad a los archivos de acuerdo al sufijo.<li>"Ayuda rápida". Aquí se listan algunas pistas sobre funcionalidades que ofrece Netrw.</ul><p>Lo curioso de este banner es que pueden interactuar con algunas de sus "opciones". Por ejemplo, si colocan el cursor sobre la línea donde dice "sorted" y presionan <code>Enter</code> verán cómo cambia el orden de los archivos según otros criterios. Podemos cambiar el order según la última actualización, el tamaño o extensión del archivo. En la ayuda rápida, al presionar <code>Enter</code>, te mostrará distintos atajos para tareas comunes.<p>Luego del banner tenemos nuestros archivos y directorios. <code>../</code> representa el directorio padre y <code>./</code> es el directorio actual. Finalmente, justo debajo tenemos nuestros archivos perfectamente ordenados.<h2 id=uso>Uso</h2><p>Ahora que sabemos cómo luce Netrw vamos a cubrir las funcionalidades básicas.<h3 id=invocacion>Invocación</h3><p>Nuestra primera parada será el comando <code>:Explore</code>. Al invocar este comando sin argumentos, nos mostrará el directorio del archivo que estamos editando actualmente. Si no queremos eso, podemos proveerle la ruta a un directorio de nuestra elección. Ahora, el comportamiento de <code>:Explore</code> varía de acuerdo a la configuración de vim, específicamente la opción <code>hidden</code>. Si está deshabilitada (así es por defecto) y el archivo que estamos editando no tiene cambios sin guardar <code>:Explore</code> abrirá Netrw en pantalla completa. Si resulta que tenemos cambios sin guardar Netrw creará una división horizontal y mostrará el directorio en la ventana superior.<p><img alt="netrw en media pantalla" src=https://res.cloudinary.com/vonheikemen/image/upload/v1609951259/devlog/using-vim-netrw/netrw-half-screen_2021-01-06_12-39-50.png><blockquote><p>Si queremos que la división sea vertical utilizamos el comando <code>:Explore!</code>.</blockquote><p>Si tenemos la opción <code>hidden</code> habilitada Netrw siempre ocupará toda pantalla, no importa si tenemos cambios sin guardar en un archivo.<p>Ahora hablemos de las variantes de <code>:Explore</code> que tenemos disponibles.<ul><li><p>Hexplore: Creará una división horizontal y mostrará el directorio en la pantalla inferior. La variante con <code>!</code> muestra el directorio en el lado opuesto.</p><li><p>Vexplore: Creará una división vertical y mostrará el directorio a la izquierda. La variante con <code>!</code> muestra el directorio en el lado opuesto.</p><li><p>Sexplore: Creará una división horizontal y mostrará el directorio en la pantalla superior. La variante con <code>!</code> crea una división vertical y muestra el directorio del lado izquierdo.</p><li><p>Texplore: Creará un nuevo tabpage para mostrar el directorio.</p><li><p>Lexplore: Funciona de una manera similar a <code>Vexplore</code> con la diferencia de que cuando abren un archivo este aparecerá en la ventana de donde abrieron Netrw. También tiene la particularidad de poder abrir y cerrar una ventana de Netrw. Pueden verlo en acción en este demo.</p></ul><p><script async data-preload=false data-size=small id=asciicast-Fa9y0AieDUImMHZjUbjKzjlwn src=https://asciinema.org/a/Fa9y0AieDUImMHZjUbjKzjlwn.js></script><blockquote><p>Ver en <a href=https://asciinema.org/a/Fa9y0AieDUImMHZjUbjKzjlwn rel=noopener target=_blank>asciinema</a>.</blockquote><h3 id=navegando>Navegando</h3><p>Si queremos movernos entre directorios y archivos estos son los atajos que necesitamos conocer:<ul><li><code>Enter</code>: Entra en un directorio o abre un archivo.<li><code>-</code>: Regresa al directorio padre.<li><code>u</code>: Regresa al directorio anterior (en el historial).<li><code>gb</code>: Salta al directorio más reciente en el registro de "Bookmarks". Para crear un bookmark se utiliza <code>mb</code>.</ul><p>Vamos a repasar. Si quieren ir "hacia abajo" un directorio presionan <code>Enter</code>. Si quieren ir "hacia arriba" presionan <code>-</code>. Si quieren ir "hacia atrás", <code>u</code>. Y si quieren "saltar" a un directorio cualquiera, primero deben marcar su destino con un bookmark (usando <code>mb</code>) y luego pueden usar <code>gb</code> para ir a ese directorio.<h3 id=operaciones-sobre-archivos>Operaciones sobre archivos</h3><p>Ahora vamos a darle un vistazo a los atajos involucrados en las tareas más comunes cuando queremos gestionar nuestros archivos.<ul><li><p><code>p</code>: Abre una vista previa del archivo.</p><li><p><code>&LTC-w>z</code>: <code>Ctrl + w</code> y luego <code>z</code>. Cierra la ventana de vista previa.</p><li><p><code>gh</code>: Habilita y deshabilita la visualización de archivos ocultos.</p><li><p><code>%</code>: Crea un archivo. Bueno... en realidad no crea nada, te da la oportunidad de crearlo. Esto es lo que pasa, cuando se presiona <code>%</code> vim pregunta por el nombre del archivo. Luego de que ingresas el nombre del archivo, te deja editarlo (pero aún no existe). Después de que editas el contenido y lo guardas (usando el comando <code>:write</code>) el archivo es creado.</p><li><p><code>R</code>: Es para renombrar un archivo.</p><li><p><code>mt</code>: Asigna el "directorio destino" para las acciones de copiar y mover.</p><li><p><code>mf</code>: Marca un archivo o directorio. Esto es importante porque las otras operaciones dependen de estas marcas. Si quieren copiar, mover o eliminar un archivo, este debe estar marcado.</p><li><p><code>mc</code>: Copia los archivos marcados en el directorio destino.</p><li><p><code>mm</code>: Mueve los archivos marcados al directorio destino.</p><li><p><code>mx</code>: Ejecuta un comando externo sobre los archivos marcados.</p><li><p><code>D</code>: Elimina un archivo o un directorio vacío. vim no nos dejará eliminar directorios con archivos dentro. Más adelante les diré cómo sobrepasar esta restricción.</p><li><p><code>d</code>: Crea un directorio.</p></ul><h3 id=ejecutando-una-operacion-sobre-varios-archivos>Ejecutando una operación sobre varios archivos</h3><p>Después de leer sobre los atajos anteriores tal vez se estén preguntando cuáles son los pasos a seguir cuando queremos copiar o mover un archivo. Vamos a hacer un ejemplo moviendo un par de archivos a un directorio.<p>Este es un proceso de tres pasos:<ul><li><p>Asignar el directorio destino.</p><li><p>Marcar los archivos que queremos mover.</p><li><p>Ejecutar el comando correspondiente, en nuestro caso: <code>mm</code>.</p></ul><p>Aquí les dejo un demo para ilustrar el proceso.<p><script async data-preload=false data-size=small id=asciicast-YkvegGilPQpSbABrOcFZYhN7W src=https://asciinema.org/a/YkvegGilPQpSbABrOcFZYhN7W.js></script><blockquote><p>Ver en <a href=https://asciinema.org/a/YkvegGilPQpSbABrOcFZYhN7W rel=noopener target=_blank>asciinema</a>.</blockquote><p>Esto es lo que pasa:<ul><li><p><em>00:00-00:17</em> Se usa el comando <code>:Explore</code> para abrir Netrw. Y luego se verifica el contenido del directorio <code>test dir</code>.</p><li><p><em>00:18</em> Se asigna <code>test dir</code> como directorio destino. Noten que ahora el banner se actualiza y nos indica el directorio destino. Se agrega esta línea.</p></ul><pre style=background:#2b2c2f;color:#cccece><code><span>"   Copy/Move Tgt: /tmp/vim/test dir/ (local)
</span></code></pre><ul><li><p><em>00:20-00:25</em> Se marcan los archivos <code>a-file.txt</code> y <code>another-file.txt</code>. Para indicar que están marcados los nombres ahora aparecen en negrita.</p><li><p><em>00:25-00:27</em> Se presiona <code>mm</code> para mover los archivos, y estos desaparecen de la pantalla actual.</p><li><p><em>00:29</em> Se puede observar que los archivos marcados ahora están dentro de <code>test dir</code>.</p></ul><p>Y ese básicamente el proceso para las operaciones de copiar y mover. Para ejecutar comandos externos y eliminar es casi igual, con la diferencia de que no necesitamos un directorio destino (un paso menos).<h2 id=limitaciones-de-netrw>Limitaciones de Netrw</h2><ul><li>Al mover archivos.</ul><p>Esto ocurre en linux y tal vez en macOS sea igual. En nuestro ejemplo anterior mover <code>a-file.txt</code> al directorio <code>test dir</code> funciona de maravilla, pero si quieren devolver <code>a-file.txt</code> al directorio padre se van a encontrar con este error.<pre style=background:#2b2c2f;color:#cccece><code><span>**error** (netrw) tried using g:netrw_localmovecmd&LTmv>; it doesn't work!
</span></code></pre><blockquote><p>Esto no ocurre cuando van a copiar un archivo.</blockquote><p>Hasta donde pude indagar esto tiene que ver con el directorio donde abrimos Netrw y el directorio que estamos visualizando, cuando no son iguales ocurre este error. Para arreglarlo pueden cambiar la variable global <code>g:netrw_keepdir</code> a cero.<pre class=language-vim data-lang=vim style=background:#2b2c2f;color:#cccece><code class=language-vim data-lang=vim><span style=color:#6699cc>let </span><span>g:netrw_keepdir = </span><span style=color:#f99157>0
</span></code></pre><ul><li>Al ejecutar operaciones en archivos marcados.</ul><p>Cuando van a ejecutar un comando sobre archivos marcados este sólo afecta a los que están listados en la pantalla actual.<p>Digamos que tenemos esta estructura en nuestro directorio.<pre style=background:#2b2c2f;color:#cccece><code><span>vim
</span><span>├── mini-plugins
</span><span>│   ├── better-netrw.vim
</span><span>│   ├── guess-indentation.vim
</span><span>│   └── project-buffers.vim
</span><span>├── test dir
</span><span>│   ├── a-file.txt *
</span><span>│   ├── another-file.txt *
</span><span>│   └── text.txt
</span><span>├── custom-commands.vim
</span><span>└── init.vim *
</span></code></pre><p>Los archivos que tienen un <code>*</code> son los que tenemos marcados. Si nos encontramos en el directorio <code>vim</code> y hacemos el proceso para mover los archivos nos daremos cuenta que sólo se ha movido <code>init.vim</code> al directorio destino. En teoría esto es bueno porque siempre tendremos a la vista los archivos sobre los cuales estamos operando.<ul><li>Netrw no permite borrar directorios con archivos usando <code>D</code>.</ul><p>La respuesta a esto es: usar un comando externo. Por suerte Netrw tiene algo que puede ayudarnos. Si prestaron atención en secciones pasadas sabrán que el atajo <code>mx</code> nos deja hacer precisamente eso. Pueden verlo en acción.<p><script async data-preload=false data-size=small id=asciicast-YbscBomZSa752kXnEASUnaxlx src=https://asciinema.org/a/YbscBomZSa752kXnEASUnaxlx.js></script><blockquote><p>Ver en <a href=https://asciinema.org/a/YbscBomZSa752kXnEASUnaxlx rel=noopener target=_blank>asciinema</a>.</blockquote><p>Entonces, la solución: marcar los directorios con <code>mf</code>, usar <code>mx</code> y escribir el comando que necesitamos (en el demo <code>rm -r</code>). Es todo. ¿Pero podemos hacer este proceso más conveniente? Sí, y vamos discutirlo en la siguiente sección.<h2 id=personalizacion>Personalización</h2><p>Si han decidido darle una oportunidad a Netrw tal vez quieran modificarlo un poco para hacer que sea más agradable.<h3 id=configuracion-recomendada>Configuración recomendada</h3><p>Sincronizar el directorio actual y el directorio que está mostrando Netrw. Esto ayuda con el error cuando se intenta mover archivos.<pre class=language-vim data-lang=vim style=background:#2b2c2f;color:#cccece><code class=language-vim data-lang=vim><span style=color:#6699cc>let </span><span>g:netrw_keepdir = </span><span style=color:#f99157>0
</span></code></pre><p>Configurar el porcentaje que ocupa Netrw cuando crea una división. 30% esta bien.<pre class=language-vim data-lang=vim style=background:#2b2c2f;color:#cccece><code class=language-vim data-lang=vim><span style=color:#6699cc>let </span><span>g:netrw_winsize = </span><span style=color:#f99157>30
</span></code></pre><p>Ocultar el banner (Si quieren). Para mostrarlo temporalmente sólo deben presionar <code>I</code> en Netrw.<pre class=language-vim data-lang=vim style=background:#2b2c2f;color:#cccece><code class=language-vim data-lang=vim><span style=color:#6699cc>let </span><span>g:netrw_banner = </span><span style=color:#f99157>0
</span></code></pre><p>Ocultar archivos que comiencen con un punto.<pre class=language-vim data-lang=vim style=background:#2b2c2f;color:#cccece><code class=language-vim data-lang=vim><span style=color:#6699cc>let </span><span>g:netrw_list_hide = </span><span style=color:#99c794>'\(^\|\s\s\)\zs\.\S\+'
</span></code></pre><p>Modificar el comando para copiar archivos. Para permitir copiar directorios de manera recursiva.<pre class=language-vim data-lang=vim style=background:#2b2c2f;color:#cccece><code class=language-vim data-lang=vim><span style=color:#6699cc>let </span><span>g:netrw_localcopydircmd = </span><span style=color:#99c794>'cp -r'
</span></code></pre><p>Resaltar los archivos marcados de la misma manera en la que se resalta las coincidencias en una búsqueda.<pre class=language-vim data-lang=vim style=background:#2b2c2f;color:#cccece><code class=language-vim data-lang=vim><span>hi! link netrwMarkFile Search
</span></code></pre><blockquote><p>Esta es la manera más fácil que se me ocurrió para resaltar más las marcas. Esto puede crear confusión si buscan una cadena de texto y tienen archivos marcados. Si desean aplicar otros colores investiguen sobre el comando <code>highlight</code>.</blockquote><h3 id=keymaps>Keymaps</h3><p>Ahora que Netrw se ve mejor, hagamos que sea más fácil de usar.<h4 id=invocando-netrw>Invocando Netrw</h4><p>Podemos usar el comando <code>:Lexplore</code> en un atajo para mostrarlo y ocultarlo cuando queramos.<pre class=language-vim data-lang=vim style=background:#2b2c2f;color:#cccece><code class=language-vim data-lang=vim><span style=color:#6699cc>nnoremap </span><span style=color:#fac863>&LTleader></span><span>dd :Lexplore %:p</span><span style=color:#c594c5>:</span><span>h</span><span style=color:#fac863>&LTCR>
</span><span style=color:#6699cc>nnoremap </span><span style=color:#fac863>&LTLeader></span><span style=color:#6699cc>da</span><span> :Lexplore</span><span style=color:#fac863>&LTCR>
</span></code></pre><ul><li><code>Leader dd</code>: Será para abrir Netrw en el directorio del archivo actual.<li><code>Leader da</code>: Lo abrirá en el directorio de trabajo actual.</ul><h4 id=navegacion-y-visualizacion>Navegación y visualización</h4><p>Ahora bien, desafortunadamente no hay una manera directa de crear atajos exclusivos para Netrw. Es posible hacerlo pero necesitamos hacer algunas cosas primero.<p>Netrw es plugin que define su propio tipo de archivo, así que vamos a usar eso para crear una función que pueda asignar los atajos que nosotros queramos. Para ser específico, lo que haremos será crear un <code>autocommand</code> que llame una función cada vez que vim abra un archivo de tipo <code>netrw</code>.<pre class=language-vim data-lang=vim style=background:#2b2c2f;color:#cccece><code class=language-vim data-lang=vim><span>function! </span><span style=color:#6699cc>NetrwMapping</span><span style=color:#5fb3b3>(</span><span>)
</span><span>endfunction
</span><span>
</span><span style=color:#c594c5>augroup</span><span> netrw_mapping
</span><span>  </span><span style=color:#6699cc>autocmd</span><span>!
</span><span>  </span><span style=color:#6699cc>autocmd filetype</span><span> netrw call </span><span style=color:#6699cc>NetrwMapping</span><span>()
</span><span style=color:#c594c5>augroup</span><span> END
</span></code></pre><p>Con esto en nuestra configuración lo que queda por hacer es colocar nuestros atajos en la función <code>NetrwMapping</code>. Así.<pre class=language-vim data-lang=vim style=background:#2b2c2f;color:#cccece><code class=language-vim data-lang=vim><span>function! </span><span style=color:#6699cc>NetrwMapping</span><span style=color:#5fb3b3>(</span><span>)
</span><span>  </span><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer></span><span> H u
</span><span>  </span><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer></span><span> h -^
</span><span>  </span><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer></span><span> l </span><span style=color:#fac863>&LTCR>
</span><span>
</span><span>  </span><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer> </span><span>. gh
</span><span>  </span><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer></span><span> P </span><span style=color:#fac863>&LTC-w></span><span>z
</span><span>
</span><span>  </span><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer></span><span> L </span><span style=color:#fac863>&LTCR></span><span>:Lexplore</span><span style=color:#fac863>&LTCR>
</span><span>  </span><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer> &LTLeader></span><span>dd :Lexplore</span><span style=color:#fac863>&LTCR>
</span><span>endfunction
</span></code></pre><p>Ya que no tenemos acceso a los comandos que usa Netrw internamente (al menos no todos), usamos <code>nmap</code> para hacer una especie de redirección. Por ejemplo, aquí <code>H</code> será equivalente a presionar <code>u</code>, que a su vez activará la función que queremos. Entonces tenemos que:<ul><li><code>H</code>: Ahora será para "ir atrás" en el historial.<li><code>h</code>: Será para "ir arriba" un directorio.<li><code>l</code>: Será para abrir un directorio o archivo.<li><code>.</code>: Controlará si se muestran los archivos ocultos.<li><code>P</code>: Para ocultar la ventana de la vista previa.<li><code>L</code>: Abrirá un archivo y cerrará la ventana de Netrw.<li><code>Leader dd</code>: Sólo cerrará la ventana de Netrw.</ul><p>Con sólo agregar estos atajos (más la configuración recomendada) Netrw se convierte en un navegador decente. Pero esperen, aún podemos mejorar.<h4 id=marcas>Marcas</h4><p>Podemos encontrar una manera más cómoda de manejar las marcas de los archivos. Yo sugiero usar <code>&LTTab></code> para esto.<pre class=language-vim data-lang=vim style=background:#2b2c2f;color:#cccece><code class=language-vim data-lang=vim><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer> &LTTAB></span><span> mf
</span><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer> &LTS-TAB></span><span> mF
</span><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer> &LTLeader>&LTTAB></span><span> mu
</span></code></pre><ul><li><code>Tab</code>: marcará (o quitará una marca) de un archivo o directorio.<li><code>Shift Tab</code>: Quitará las marcas de todos los archivos listados en la pantalla actual.<li><code>Leader Tab</code>: Quitará todas las marcas.</ul><h4 id=gestion-de-archivos>Gestión de archivos</h4><p>Ya que hay un montón de comandos relacionados con los archivos vamos a usar la letra <code>f</code> como prefijo para agruparlos.<pre class=language-vim data-lang=vim style=background:#2b2c2f;color:#cccece><code class=language-vim data-lang=vim><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer></span><span> ff %:w</span><span style=color:#fac863>&LTCR></span><span>:buffer #</span><span style=color:#fac863>&LTCR>
</span><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer></span><span> fe R
</span><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer></span><span> fc mc
</span><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer></span><span> fC mtmc
</span><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer></span><span> fx mm
</span><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer></span><span> fX mtmm
</span><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer></span><span> f; mx
</span></code></pre><ul><li><code>ff</code>: Para crear un archivo. Crearlo de verdad. En esta ocasión, después de <code>%</code> usamos <code>:w&LTCR></code> para guardar el archivo vacío y <code>:buffer #&LTCR></code> para volver a Netrw.<li><code>fe</code>: Para renombrar un archivo.<li><code>fc</code>: Para copiar los archivos marcados.<li><code>fC</code>: Lo usaremos para ahorranos un paso. Con esto podremos situarnos sobre un directorio y copiar los archivos marcados directamente.<li><code>fx</code>: Para mover los archivos marcados.<li><code>fX</code>: Tiene la misma mecánica que <code>fC</code> pero esta vez será para mover archivos.<li><code>f;</code>: Lo usaremos para ejecutar comandos externos sobre los archivos marcados.</ul><p>Aún podemos hacer un par de cosas, si no les importa usar algunas variables internas de Netrw.<p>Ver la lista de archivos marcados.<pre class=language-vim data-lang=vim style=background:#2b2c2f;color:#cccece><code class=language-vim data-lang=vim><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer></span><span> fl :</span><span style=color:#6699cc>echo join</span><span>(</span><span style=color:#6699cc>netrw#Expose</span><span>(</span><span style=color:#99c794>"netrwmarkfilelist"</span><span>), </span><span style=color:#99c794>"\n"</span><span>)</span><span style=color:#fac863>&LTCR>
</span></code></pre><p>Mostrar el directorio destino, en caso de que queramos evitar mostrar el banner.<pre class=language-vim data-lang=vim style=background:#2b2c2f;color:#cccece><code class=language-vim data-lang=vim><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer></span><span> fq :</span><span style=color:#6699cc>echo </span><span style=color:#99c794>'Target:' </span><span>. </span><span style=color:#6699cc>netrw#Expose</span><span>(</span><span style=color:#99c794>"netrwmftgt"</span><span>)</span><span style=color:#fac863>&LTCR>
</span></code></pre><p>Ahora podemos usar el atajo anterior en conjunto con <code>mt</code> para asignar el directorio destino.<pre class=language-vim data-lang=vim style=background:#2b2c2f;color:#cccece><code class=language-vim data-lang=vim><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer></span><span> fd mtfq
</span></code></pre><p>De nuevo, esto sólo es útil si queremos evitar a toda costa mostrar el banner.<h4 id=bookmarks>Bookmarks</h4><p>En el mismo estilo en el que agrupamos la gestión de archivos podemos hacerlo con los "Bookmarks".<pre class=language-vim data-lang=vim style=background:#2b2c2f;color:#cccece><code class=language-vim data-lang=vim><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer></span><span> bb mb
</span><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer></span><span> bd mB
</span><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer></span><span> bl gb
</span></code></pre><ul><li><code>bb</code>: Para crear un bookmark.<li><code>bd</code>: Para eliminar el bookmark más reciente.<li><code>bl</code>: Para saltar al directorio del bookmark más reciente.</ul><h4 id=eliminando-archivos-de-manera-recursiva>Eliminando archivos de manera recursiva</h4><p>Lo último que haremos será "automatizar" el proceso para eliminar un directorio no vacío. Para esto necesitaremos una función.<pre class=language-vim data-lang=vim style=background:#2b2c2f;color:#cccece><code class=language-vim data-lang=vim><span>function! </span><span style=color:#6699cc>NetrwRemoveRecursive</span><span style=color:#5fb3b3>(</span><span>)
</span><span>  </span><span style=color:#c594c5>if </span><span>&filetype ==# </span><span style=color:#99c794>'netrw'
</span><span>    </span><span style=color:#6699cc>cnoremap </span><span style=color:#fac863>&LTbuffer> &LTCR></span><span> rm -r</span><span style=color:#fac863>&LTCR>
</span><span>    normal mu
</span><span>    normal mf
</span><span>    
</span><span>    </span><span style=color:#c594c5>try
</span><span>      normal mx
</span><span>    </span><span style=color:#c594c5>catch
</span><span>      </span><span style=color:#6699cc>echo </span><span style=color:#99c794>"Canceled"
</span><span>    </span><span style=color:#c594c5>endtry
</span><span>
</span><span>    </span><span style=color:#6699cc>cunmap </span><span style=color:#fac863>&LTbuffer> &LTCR>
</span><span>  </span><span style=color:#c594c5>endif
</span><span>endfunction
</span></code></pre><p>En esta función lo primero que hacemos es asegurarnos de que estamos dentro de un archivo de tipo <code>netrw</code>. Lo siguiente que hacemos es preparar el comando para eliminar. Nos aprovechamos del hecho de que vim nos obliga a entrar en modo de comando y creamos un atajo (<code>&LTCR></code>) que escribirá el comando para eliminar archivos por nosotros. Luego con <code>normal mu</code> limpiamos la lista de archivos marcados (no queremos borrar nada por accidente). Marcamos el directorio que está debajo del cursor con <code>normal mf</code>. Aquí viene lo gracioso, <code>normal mx</code> nos preguntará qué comando queremos ejecutar, es en este punto donde podemos abortar el proceso usando <code>ctrl + c</code> o presionar <code>Enter</code> lo que causará que vim escriba <code>rm -r</code> y ejecute el comando. Por último desechamos el atajo que creamos al principio de la función, porque sería muy inconveniente tenerlo de forma permanente.<p>¿Y cómo la usamos?<p>Dentro de <code>NetrwMapping</code> creamos otro atajo.<pre class=language-vim data-lang=vim style=background:#2b2c2f;color:#cccece><code class=language-vim data-lang=vim><span style=color:#6699cc>nmap </span><span style=color:#fac863>&LTbuffer></span><span> FF :call </span><span style=color:#6699cc>NetrwRemoveRecursive</span><span>()</span><span style=color:#fac863>&LTCR>
</span></code></pre><p>Pueden visualizar todas las opciones y funciones presentadas en este artículo: <a href=https://gist.github.com/VonHeikemen/fa6f7c7f114bc36326cda2c964cb52c7 rel=noopener target=_blank>aquí</a>.<h2 id=conclusion>Conclusión</h2><p>Netrw puede que no sea el mejor gestor de archivos en el ecosistema de vim pero con un poco de configuración podemos por lo menos convertirlo navegador de archivos intuitivo. Incluso si deciden no adoptar Netrw en su rutina diaria no viene mal aprender lo básico para poder navegar fácilmente entre directorios. Nunca saben cuando estarán varados en servidor remoto usando vim sin sus plugins favoritos a mano.<h2 id=fuente>Fuente</h2><p><a href=https://vimhelp.org/pi_netrw.txt.html rel=noopener target=_blank>:help netrw</a><hr><p>¿Tienen alguna pregunta? Pueden dejar un comentario en cualquiera de estas plataformas:<ul><li><a href=https://dev.to/vonheikemen/usando-netrw-el-navegador-de-archivos-nativo-de-vim-2j36 rel=noopener target=_blank>dev.to</a><li><a href=https://vonheikemen.hashnode.dev/using-netrw-vims-builtin-file-explorer-es rel=noopener target=_blank>Hashnode</a></ul><p>Pueden contactarme por las redes sociales:<ul><li>Twitter <a rel="noopener me" href=https://twitter.com/VonHeikemen_ target=_blank> @VonHeikemen_ </a><li>Mastodon <a rel="noopener me" href=https://hachyderm.io/@vonheikemen target=_blank> @vonheikemen@hachyderm.io </a></ul><p>Gracias por su tiempo. Si este artículo les pareció útil y quieren apoyar mis esfuerzos para crear más contenido, pueden dejar una propina en buy me a coffee ☕.</p><a href=https://www.buymeacoffee.com/vonheikemen style=display:flex;justify-content:center target=_blank> <img alt="Buy Me A Coffee" src=https://cdn.buymeacoffee.com/buttons/v2/default-blue.png style=height:60px!important;width:217px!important> </a></div></div>