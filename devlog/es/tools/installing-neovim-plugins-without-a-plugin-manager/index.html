<!doctype html><html lang=es><head><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="text/html; charset=utf-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1.0,maximum-scale=1,viewport-fit=cover" name=viewport><meta content="interest-cohort=()" http-equiv=Permissions-Policy><title>
  Neovim: Instalando plugins manualmente | Devlog
</title><link href=https://vonheikemen.github.io/devlog/print.css media=print rel=stylesheet><link href=https://vonheikemen.github.io/devlog/styles.css rel=stylesheet><link href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface" rel=stylesheet><link href=https://hachyderm.io/@vonheikemen rel=me><link href=https://twitter.com/VonHeikemen_ rel=me><meta content="vim, neovim, shell, software, coding, development" name=keywords><meta content="Instalando plugins para Neovim usando git clone" name=description><body class=theme-base-custom><div class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><a href=https://vonheikemen.github.io/devlog/es/><h1>Devlog</h1></a></div><ul class=sidebar-nav><li class=sidebar-nav-item><a href=/>whoami</a><li class=sidebar-nav-item><a href=https://vonheikemen.github.io/devlog/es/tags/>Explorar tags</a><li class=sidebar-nav-item><a href=https://vonheikemen.github.io/devlog/>Devlog in english</a><li class=sidebar-nav-item><a href=https://vonheikemen.github.io/devlog/atom.xml>RSS</a></ul> © 2020-2024 Heiker Curiel</div></div><div class="content container"><div class=post><h1 class=post-title>Neovim: Instalando plugins manualmente</h1><span class=post-date>2024-09-17 | 4 minutos | <a href=https://vonheikemen.github.io/devlog/tools/installing-neovim-plugins-without-a-plugin-manager/> Read in english </a> </span><p>Lo único que debemos hacer para instalar un plugin de Neovim es descargarlo en un directorio específico.<h2 id=como-funciona>¿Cómo funciona?</h2><p>Tanto Vim como Neovim tienen una funcionalidad que llaman <a href=https://neovim.io/doc/user/repeat.html#_using-vim-packages rel=noopener target=_blank>vim packages</a>. Un paquete simplemente es un directorio que contiene varios plugins.<p>Esta es la estructura de archivos de un paquete:<pre style=color:#cccece;background-color:#2b2c2f><code><span>some-package
</span><span>├── colors
</span><span>│   ├── a-colorscheme.vim
</span><span>│   └── some-colorscheme.lua
</span><span>├── doc
</span><span>│   └── my-help-page.txt
</span><span>├── lua
</span><span>│   └── some-module
</span><span>│       └── some-file.lua
</span><span>└── plugin
</span><span>    ├── a-file.vim
</span><span>    └── some-file.lua
</span></code></pre><p>Según la documentación de Neovim, un <a href=https://neovim.io/doc/user/usr_05.html#_global-plugins rel=noopener target=_blank>plugin</a> es un script en el directorio <code>plugin</code>. El término oficial es plugin global. En el ejemplo anterior <code>plugin/a-file.vim</code> cuenta como un plugin, y <code>plugin/some-file.lua</code> es otro plugin.<p>¿Notan algo interesante? Esa estructura de archivos es la misma que tienen todos los plugins de Neovim que están github. Entonces, lo que nosotros llamamos un plugin la documentación de Neovim lo considera un paquete.<p>Bien, ¿pero dónde debemos instalarlos?<h2 id=el-directorio-pack>El directorio pack</h2><p><code>packpath</code> es una opción que tenemos en Neovim, es una lista de directorios. Cada uno de estos directorio puede tener otro directorio llamado <code>pack</code> y ahí podemos tener varios grupos de paquetes.<p>Dentro de <code>pack</code> podemos tener esta estructura:<pre style=color:#cccece;background-color:#2b2c2f><code><span>pack
</span><span>└── vendor
</span><span>    ├── opt
</span><span>    │   └── package-one
</span><span>    └── start
</span><span>        ├── package-two
</span><span>        └── package-three
</span></code></pre><p>Aquí el directorio <code>vendor</code> es un grupo. <code>vendor</code> es sólo un nombre, ustedes pueden elegir cualquier nombre para el grupo.<p>Dentro de <code>vendor</code> tenemos <code>opt</code> y <code>start</code>. Estos dos directorios determinan en qué momento Neovim va a cargar los plugins.<p>Los paquetes que ese encuentran en <code>start</code> serán cargados de manera automática durante el proceso de inicialización. Esto significa que podremos usarlos inmediatamante.<p>Los paquetes que se encuentran en <code>opt</code> pueden cargarse manualmente usando el comando <code>:packadd</code>. Este es el mecanismo que nos da Neovim para hacer lo que se conoce como "lazy loading." En otras palabras, cargar plugins sólo cuando los necesitamos.<h2 id=el-directorio-de-descarga>El directorio de descarga</h2><p>Ahora sí, para conocer el directorio donde podemos descargar un plugin debemos inspeccionar la opción <code>packpath</code>. Pueden ejecutar este comando.<pre class=language-vim data-lang=vim style=color:#cccece;background-color:#2b2c2f><code class=language-vim data-lang=vim><span>:</span><span style=color:#69c>set</span><span> packpath?
</span></code></pre><p>Si les parece que el formato de ese comando no es legible, pueden intentar con este otro comando que usa <code>lua</code>.<pre class=language-lua data-lang=lua style=color:#cccece;background-color:#2b2c2f><code class=language-lua data-lang=lua><span style=color:#5fb3b3>:</span><span>lua vim</span><span style=color:#5fb3b3>.</span><span style=color:#69c>tbl_map</span><span style=color:#5fb3b3>(</span><span style=color:#69c>print</span><span style=color:#5fb3b3>, </span><span>vim</span><span style=color:#5fb3b3>.</span><span style=color:#69c>opt</span><span style=color:#5fb3b3>.</span><span style=color:#69c>packpath</span><span style=color:#5fb3b3>:</span><span style=color:#69c>get</span><span style=color:#5fb3b3>())
</span></code></pre><p>Esto les mostrará la lista de directorios donde pueden tener un directorio <code>pack</code>.<p>Un ejemplo concreto:<p>Por defecto el directorio de configuración de Neovim se encuentra en el <code>packpath</code>. Entonces el directorio donde tienen su <code>init.lua</code> o <code>init.vim</code> es un lugar válido para crear el directorio <code>pack</code>.<p>Vamos a fingir que ustedes usan linux y quieren descargar el plugin <a href=https://github.com/echasnovski/mini.nvim rel=noopener target=_blank>mini.nvim</a>. Para instalarlo pueden ejecutar este comando en su terminal.<pre style=color:#cccece;background-color:#2b2c2f><code><span>git clone https://github.com/echasnovski/mini.nvim \
</span><span>  ~/.config/nvim/pack/vendor/start/mini.nvim
</span></code></pre><p>Luego de descargar un plugin deben generar los "help tags" para que puedan acceder a la documentación del plugin dentro de Neovim. Entonces, luego de descargar el plugin entran a Neovim y ejecutan este comando:<pre class=language-vim data-lang=vim style=color:#cccece;background-color:#2b2c2f><code class=language-vim data-lang=vim><span>:helptags ALL
</span></code></pre><p>Luego de crear los tags podrán usar el comand <code>:help</code> para leer la documentación "offline" de un plugin. Por ejemplo, <code>:help mini.files</code>.<p>Ahora que <code>mini.nvim</code> está instalado podemos probarlo. Podemos usar el módulo <code>mini.files</code> en nuestra configuración.<p>Vamos a crear el atajo de teclado <code>&LTF2></code> para hacer que aparezca el explorador de archivos.<pre class=language-lua data-lang=lua style=color:#cccece;background-color:#2b2c2f><code class=language-lua data-lang=lua><span style=color:#c594c5>local </span><span>mini_files </span><span style=color:#5fb3b3>= </span><span style=color:#69c>require</span><span style=color:#5fb3b3>('</span><span style=color:#99c794>mini.files</span><span style=color:#5fb3b3>')
</span><span>
</span><span>mini_files</span><span style=color:#5fb3b3>.</span><span style=color:#69c>setup</span><span style=color:#5fb3b3>({})
</span><span>
</span><span>vim</span><span style=color:#5fb3b3>.</span><span>keymap</span><span style=color:#5fb3b3>.</span><span style=color:#69c>set</span><span style=color:#5fb3b3>('</span><span style=color:#99c794>n</span><span style=color:#5fb3b3>', '</span><span style=color:#99c794>&LTF2></span><span style=color:#5fb3b3>', </span><span style=color:#c594c5>function</span><span style=color:#5fb3b3>()
</span><span style=color:#69c>  </span><span style=color:#c594c5>if </span><span>mini_files</span><span style=color:#5fb3b3>.</span><span style=color:#69c>close</span><span style=color:#5fb3b3>() </span><span style=color:#c594c5>then
</span><span style=color:#69c>    </span><span style=color:#c594c5>return
</span><span style=color:#69c>  </span><span style=color:#c594c5>end
</span><span style=color:#69c>
</span><span style=color:#69c>  </span><span>mini_files</span><span style=color:#5fb3b3>.</span><span style=color:#69c>open</span><span style=color:#5fb3b3>()
</span><span style=color:#c594c5>end</span><span style=color:#5fb3b3>)
</span></code></pre><h2 id=un-comando-de-regalo>Un comando de regalo</h2><p>Si quieren, pueden convertir todo el conocimento que acaban de obtener en código. Pueden crear un comando de Neovim que use <code>git clone</code> para descargar un plugin directo desde github.<pre class=language-lua data-lang=lua style=color:#cccece;background-color:#2b2c2f><code class=language-lua data-lang=lua><span>vim</span><span style=color:#5fb3b3>.</span><span>api</span><span style=color:#5fb3b3>.</span><span style=color:#69c>nvim_create_user_command</span><span style=color:#5fb3b3>(
</span><span style=color:#69c>  </span><span style=color:#5fb3b3>'</span><span style=color:#99c794>GitPlugin</span><span style=color:#5fb3b3>',
</span><span style=color:#69c>  </span><span style=color:#c594c5>function</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>input</span><span style=color:#5fb3b3>)
</span><span style=color:#69c>    </span><span style=color:#c594c5>local </span><span>repo </span><span style=color:#5fb3b3>= </span><span>input</span><span style=color:#5fb3b3>.</span><span style=color:#69c>fargs
</span><span style=color:#69c>    </span><span style=color:#c594c5>local </span><span>url </span><span style=color:#5fb3b3>= '</span><span style=color:#99c794>https://github.com/%s/%s.git</span><span style=color:#5fb3b3>'
</span><span style=color:#69c>    </span><span style=color:#c594c5>local </span><span>plugin_dir </span><span style=color:#5fb3b3>= </span><span>vim</span><span style=color:#5fb3b3>.</span><span style=color:#69c>fn</span><span style=color:#5fb3b3>.</span><span style=color:#69c>stdpath</span><span style=color:#5fb3b3>('</span><span style=color:#99c794>config</span><span style=color:#5fb3b3>') 
</span><span style=color:#69c>      </span><span style=color:#5fb3b3>.. '</span><span style=color:#99c794>/pack/vendor/start/%s</span><span style=color:#5fb3b3>'
</span><span style=color:#69c>
</span><span style=color:#69c>    </span><span style=color:#c594c5>if </span><span>repo</span><span style=color:#5fb3b3>[</span><span style=color:#f99157>1</span><span style=color:#5fb3b3>] == </span><span style=color:#f99157>nil </span><span style=color:#5fb3b3>or </span><span>repo</span><span style=color:#5fb3b3>[</span><span style=color:#f99157>2</span><span style=color:#5fb3b3>] == </span><span style=color:#f99157>nil </span><span style=color:#c594c5>then
</span><span style=color:#69c>      </span><span style=color:#c594c5>local </span><span>msg </span><span style=color:#5fb3b3>= '</span><span style=color:#99c794>Debe proveer nombre de usuario y repositorio</span><span style=color:#5fb3b3>'
</span><span style=color:#69c>      </span><span>vim</span><span style=color:#5fb3b3>.</span><span style=color:#69c>notify</span><span style=color:#5fb3b3>(</span><span>msg</span><span style=color:#5fb3b3>, </span><span>vim</span><span style=color:#5fb3b3>.</span><span style=color:#69c>log</span><span style=color:#5fb3b3>.</span><span style=color:#69c>levels</span><span style=color:#5fb3b3>.</span><span style=color:#69c>WARN</span><span style=color:#5fb3b3>)
</span><span style=color:#69c>      </span><span style=color:#c594c5>return
</span><span style=color:#69c>    </span><span style=color:#c594c5>end
</span><span style=color:#69c>
</span><span style=color:#69c>    </span><span style=color:#c594c5>local </span><span>full_url </span><span style=color:#5fb3b3>= </span><span>url</span><span style=color:#5fb3b3>:</span><span style=color:#69c>format</span><span style=color:#5fb3b3>(</span><span>repo</span><span style=color:#5fb3b3>[</span><span style=color:#f99157>1</span><span style=color:#5fb3b3>], </span><span>repo</span><span style=color:#5fb3b3>[</span><span style=color:#f99157>2</span><span style=color:#5fb3b3>])
</span><span style=color:#69c>    </span><span style=color:#c594c5>local </span><span>command </span><span style=color:#5fb3b3>= {'</span><span style=color:#99c794>git</span><span style=color:#5fb3b3>', '</span><span style=color:#99c794>clone</span><span style=color:#5fb3b3>', </span><span>full_url</span><span style=color:#5fb3b3>, </span><span>plugin_dir</span><span style=color:#5fb3b3>:</span><span style=color:#69c>format</span><span style=color:#5fb3b3>(</span><span>repo</span><span style=color:#5fb3b3>[</span><span style=color:#f99157>2</span><span style=color:#5fb3b3>])}
</span><span style=color:#69c>
</span><span style=color:#69c>    </span><span style=color:#c594c5>local </span><span style=color:#69c>on_done </span><span style=color:#5fb3b3>= </span><span style=color:#c594c5>function</span><span style=color:#5fb3b3>()
</span><span style=color:#69c>      </span><span>vim</span><span style=color:#5fb3b3>.</span><span style=color:#69c>cmd</span><span style=color:#5fb3b3>('</span><span style=color:#99c794>packloadall! | helptags ALL</span><span style=color:#5fb3b3>')
</span><span style=color:#69c>      </span><span>vim</span><span style=color:#5fb3b3>.</span><span style=color:#69c>notify</span><span style=color:#5fb3b3>('</span><span style=color:#99c794>Listo.</span><span style=color:#5fb3b3>')
</span><span style=color:#69c>    </span><span style=color:#c594c5>end
</span><span style=color:#69c>
</span><span style=color:#69c>    </span><span>vim</span><span style=color:#5fb3b3>.</span><span style=color:#69c>notify</span><span style=color:#5fb3b3>('</span><span style=color:#99c794>Clonando repositorio...</span><span style=color:#5fb3b3>')
</span><span style=color:#69c>    </span><span>vim</span><span style=color:#5fb3b3>.</span><span style=color:#69c>fn</span><span style=color:#5fb3b3>.</span><span style=color:#69c>jobstart</span><span style=color:#5fb3b3>(</span><span>command</span><span style=color:#5fb3b3>, {</span><span style=color:#99c794>on_exit </span><span style=color:#5fb3b3>= </span><span>on_done</span><span style=color:#5fb3b3>})
</span><span style=color:#69c>  </span><span style=color:#c594c5>end</span><span style=color:#5fb3b3>,
</span><span style=color:#69c>  </span><span style=color:#5fb3b3>{</span><span style=color:#99c794>nargs </span><span style=color:#5fb3b3>= '</span><span style=color:#99c794>+</span><span style=color:#5fb3b3>'}
</span><span style=color:#5fb3b3>)
</span></code></pre><p>Luego de crear este comando podrán descargar plugins desde Neovim. Sólo necesitan saber el nombre del usuario en github y el nombre repositorio.<p>Por ejemplo, este comando les permitirá descargar <code>mini.nvim</code>.<pre style=color:#cccece;background-color:#2b2c2f><code><span>:GitPlugin echasnovski mini.nvim
</span></code></pre><h2 id=conclusion>Conclusión</h2><p>Ya tienen el conocimento necesario para descargar cualquier plugin de Neovim en github sin necesidad de un manejador de plugins.<p>Quiero aclarar, esto no significa que los manejadores de plugins son inútiles. Si van a usar Neovim como su editor principal probablemente necesitan uno, ya que Neovim no ofrece un mecanismo para actualizar o eliminar plugins. Los <code>vim packages</code> sólo son un mecanismo para usar plugins dentro de Neovim.<hr><p>Si tienen alguna pregunta pueden contactarme por las redes sociales:<ul><li>Twitter <a rel="noopener me" href=https://twitter.com/VonHeikemen_ target=_blank> @VonHeikemen_ </a><li>Bluesky <a rel="noopener me" href=https://bsky.app/profile/vonheikemen.bsky.social target=_blank> @vonheikemen.bsky.social </a><li>Mastodon <a rel="noopener me" href=https://hachyderm.io/@vonheikemen target=_blank> @vonheikemen@hachyderm.io </a></ul><p>Gracias por su tiempo. Si este artículo les pareció útil y quieren apoyar mis esfuerzos para crear más contenido, pueden dejar una propina en buy me a coffee ☕.</p><a href=https://ko-fi.com/vonheikemen style=justify-content:center;display:flex target=_blank> <img alt="Buy Me A Coffee" src="https://storage.ko-fi.com/cdn/kofi2.png?v=3" style=width:217px!important;height:60px!important> </a></div></div>