<!doctype html><html lang=es><meta http-equiv=x-ua-compatible content="IE=edge"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover"><meta http-equiv=permissions-policy content="interest-cohort=()"><title>Alias global en ZSH | Devlog</title><link rel=stylesheet href=https://vonheikemen.github.io/devlog/print.css media=print><link rel=stylesheet href=https://vonheikemen.github.io/devlog/styles.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface"><link rel=me href=https://hachyderm.io/@vonheikemen><link rel=me href=https://twitter.com/VonHeikemen_><meta name=keywords content="zsh,shell,hoy-aprendi,software,coding,development"><meta name=description content="Qué son y cómo podemos usarlos"><body class=theme-base-custom><div class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><a href=https://vonheikemen.github.io/devlog/es/><h1>Devlog</h1></a></div><ul class=sidebar-nav><li class=sidebar-nav-item><a href=/>whoami</a><li class=sidebar-nav-item><a href=https://vonheikemen.github.io/devlog/es/tags/>Explorar tags</a><li class=sidebar-nav-item><a href=https://vonheikemen.github.io/devlog/>Devlog in english</a></ul>© 2020-2023 Heiker Curiel</div></div><div class="content container"><div class=post><h1 class=post-title>Alias global en ZSH</h1><span class=post-date>2020-07-12
| 5 minutos
| <a href=https://vonheikemen.github.io/devlog/tools/zsh-global-aliases/>Read in english</a></span><p>Si han pasado mucho tiempo escribiendo comandos en la terminal lo más probable es que estén al tanto de la existencia los <strong>alias</strong>. Generalmente cuando se habla de ellos también se habla de una promesa de incrementar la productividad. Lo cierto es que algunas veces los usamos para protegernos de comandos largos con argumentos crípticos y algunas veces sólo los usamos para ahorranos algunos caracteres. Sin importar sus motivos les voy a enseñar a crear otro tipo de alias que tal vez no conocían antes, los alias globales.<h2 id=un-breve-repaso>Un breve repaso</h2><p>El motivo más común por el cual sentimos la necesidad de crear un alias es cuando usamos un comando muy a menudo, es tan frecuente su uso que estamos cansados de escribir la misma cosa una y otra vez. Fíjense en este ejemplo.<pre data-lang=sh style=background-color:#2b2c2f;color:#cccece class=language-sh><code class=language-sh data-lang=sh><span style=color:#69c>tmux new-session</span><span style=color:#5fb3b3> -</span><span style=color:#f99157>A</span><span style=color:#5fb3b3> -</span><span style=color:#f99157>D</span><span style=color:#5fb3b3> -</span><span style=color:#f99157>s</span><span style=color:#69c> work
</span></code></pre><blockquote><p>¿No saben lo que hace? No se preocupen, pueden revisar <a rel=noopener target=_blank href="https://explainshell.com/explain?cmd=tmux+new-session+-A+-D+-s+work">aquí</a>.</blockquote><p>¿Pero no sería mejor si pudiera sólo escribir esto?<pre data-lang=sh style=background-color:#2b2c2f;color:#cccece class=language-sh><code class=language-sh data-lang=sh><span style=color:#69c>ts work
</span></code></pre><p>Vean toda esa productividad. ¿Pero cómo llegamos del primer comando a este último? Con el comando <code>alias</code>.<pre data-lang=js style=background-color:#2b2c2f;color:#cccece class=language-js><code class=language-js data-lang=js><span>alias ts</span><span style=color:#5fb3b3>=&#39;</span><span style=color:#99c794>tmux new-session -A -D -s</span><span style=color:#5fb3b3>&#39;
</span></code></pre><p>Pueden escribir eso directamente en su terminal y lo tendrán mientra su sesión en zsh esté activa. Si quieren que sea permanente tendrán que colocarlo en algún lugar de su <code>.zshrc</code>.<p>Noten que omití el argumento <code>work</code>. Es porque esa última parte es un nombre que yo puedo elegir. Al dejarlo fuera del alias me permite poner cualquier cosa que yo quiera luego. Así.<pre data-lang=sh style=background-color:#2b2c2f;color:#cccece class=language-sh><code class=language-sh data-lang=sh><span style=color:#69c>ts pomodoro
</span></code></pre><p>Todo eso suena bien. ¿Cuál es la trampa? Bueno, este alias sólo funciona cuando es la primera cosa que escribimos en nuestro comando pero falla si lo colocamos en otro lugar. Vamos a seguir con nuestro ejemplo, crearemos otro alias para expandir el comando.<pre data-lang=sh style=background-color:#2b2c2f;color:#cccece class=language-sh><code class=language-sh data-lang=sh><span style=color:#69c>alias pomd</span><span style=color:#5fb3b3>=&#39;</span><span style=color:#99c794>gone -e &quot;notify-send -u critical Pomodoro Timeout&quot;</span><span style=color:#5fb3b3>&#39;
</span></code></pre><blockquote><p>Este comando <a rel=noopener target=_blank href=https://github.com/guillaumebreton/gone>gone</a> es un "reloj pomodoro".</blockquote><p>Si intentan ejecutar <code>ts pomodoro pomd</code> sólo obtendran este mensaje <code>[exited]</code>. Eso es porque <code>pomd</code> no tiene ningún significado especial en ese contexto, sólo un argumento normal. ¿Podemos solucionar eso? Sí. ¿Deberíamos? No lo sé pero aún así les mostraré.<h2 id=a-nivel-global>A nivel global</h2><p>Si un "simple" alias no es suficiente para ustedes entonces lo que deben hacer es agregar el argumento <code>-g</code> al comando <code>alias</code>.<pre data-lang=sh style=background-color:#2b2c2f;color:#cccece class=language-sh><code class=language-sh data-lang=sh><span style=color:#69c>alias -g </span><span>nombre</span><span style=color:#5fb3b3>=&quot;</span><span style=color:#99c794>un-comando</span><span style=color:#5fb3b3>&quot;
</span></code></pre><p>Veamos un buen ejemplo para usar un alias global (el del pomodoro es terrible para eso). En ocasiones tienen un comando que saben produce mucho contenido, en ese caso tal vez quieran usar <code>less</code> para inspeccionar mejor toda esa cantidad de texto. Así que haremos una alias global para pasar el resultado de un comando a <code>less</code>.<pre data-lang=sh style=background-color:#2b2c2f;color:#cccece class=language-sh><code class=language-sh data-lang=sh><span style=color:#69c>alias -g </span><span>L</span><span style=color:#5fb3b3>=&quot;</span><span style=color:#99c794>| less</span><span style=color:#5fb3b3>&quot;
</span></code></pre><p>Ahora pueden probarlo.<pre data-lang=sh style=background-color:#2b2c2f;color:#cccece class=language-sh><code class=language-sh data-lang=sh><span style=color:#69c>du</span><span style=color:#5fb3b3> --</span><span style=color:#f99157>max-depth</span><span style=color:#5fb3b3>=</span><span style=color:#69c>1 L
</span></code></pre><blockquote><p><a rel=noopener target=_blank href="https://explainshell.com/explain?cmd=du+--max-depth%3D1+%7C+less">Esto es lo que hace</a>. Puede tomar unos segundos si tiene muchos archivos en su directorio actual.</blockquote><p>¿Vieron? Es conveniente, útil y peligroso al mismo tiempo. Ahora cada vez que una <code>L</code> solitaria (sin comillas) aparezca en un comando será reemplazada por <code>| less</code>. Eso no siempre es conveniente. Por ejemplo, si intentan eliminar el alias con el comando <code>unalias</code> así.<pre data-lang=sh style=background-color:#2b2c2f;color:#cccece class=language-sh><code class=language-sh data-lang=sh><span style=color:#69c>unalias L
</span></code></pre><blockquote><p>La manera correcta sería esta: <code>unalias "L"</code></blockquote><p>En realidad están ejecutando esto.<pre data-lang=sh style=background-color:#2b2c2f;color:#cccece class=language-sh><code class=language-sh data-lang=sh><span style=color:#69c>unalias </span><span style=color:#5fb3b3>| </span><span style=color:#69c>less
</span></code></pre><p>Para minimizar el riesgo de confusión se aconseja que un alias global se escriba todo en mayúscula, para hacer que se destaque del resto del comando.<p>Tal vez creas que es una mala idea pero no temas, aún hay esperanza.<h2 id=otro-caso-de-uso>Otro caso de uso</h2><p>En zsh hay una función llamada <code>_expand_alias</code>, esta nos puede ayudar a usar un alias global para un bien mayor.<p>Okey, si usan el comando <code>bindkey</code> sin argumentos les devolverá una lista de cada atajo que tienen disponible en zsh. Deberían poder ver <code>_expand_alias</code> en esa lista. Pueden revisar rápidamente de esta manera.<pre data-lang=sh style=background-color:#2b2c2f;color:#cccece class=language-sh><code class=language-sh data-lang=sh><span style=color:#69c>bindkey </span><span style=color:#5fb3b3>| </span><span style=color:#69c>grep expand_alias
</span></code></pre><p>El resultado debería ser: <code>"^Xa" _expand_alias</code>. Eso significa que el atajo es <code>ctrl+x a</code>.<p>Con este nuevo conocimiento podemos crear un alias para algo que sea muy difícil de recordar (o que simplemente tenga demasiadas letras). La idea es "expandir" el alias antes de ejecutar el comando.<p>¿Qué sería un buen ejemplo? ¿Recuerdan cómo es que se hace para suprimir los mensajes de error? ¿No? Bueno, ahí lo tienen, ese es su alias.<pre data-lang=sh style=background-color:#2b2c2f;color:#cccece class=language-sh><code class=language-sh data-lang=sh><span style=color:#69c>alias -g </span><span>@noerr</span><span style=color:#5fb3b3>=&quot;</span><span style=color:#99c794>2&gt; /dev/null</span><span style=color:#5fb3b3>&quot;
</span></code></pre><p>Ahora pueden escribir algo así.<pre data-lang=sh style=background-color:#2b2c2f;color:#cccece class=language-sh><code class=language-sh data-lang=sh><span style=color:#69c>mkdir /tmp/this-doesnt-exists/name @noerr
</span></code></pre><p>Pero antes de ejecutarlo presionan <code>ctrl+x</code> y luego <code>a</code> y deberían ver cómo se transforma en esto.<pre data-lang=sh style=background-color:#2b2c2f;color:#cccece class=language-sh><code class=language-sh data-lang=sh><span style=color:#69c>mkdir /tmp/this-doesnt-exists/name </span><span style=color:#f99157>2</span><span style=color:#5fb3b3>&gt;</span><span style=color:#69c> /dev/null 
</span></code></pre><blockquote><p>Niños, recuerden que nunca deben ejecutar comandos que vean en internet sin saber qué hacen. <a rel=noopener target=_blank href="https://explainshell.com/explain?cmd=mkdir+%2Ftmp%2Fthis-doesnt-exists%2Fname+2%3E+%2Fdev%2Fnull">Revisen</a> siempre, antes de hacer cualquier cosa.</blockquote><p>Ahora sí pueden presionar <code>enter</code> para ejecutarlo.<h2 id=conclusion>Conclusión</h2><p>Ya llegamos al final. Ahora saben qué pueden hacer con un alias, qué limitaciones tienen y cómo pueden superarlas, también espero que sepan qué cosas no deberían hacer con ellos.<p>Si quieren algo de inspiración para crear sus propios alias revisen este <a rel=noopener target=_blank href=https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/common-aliases>plugin</a> de <a rel=noopener target=_blank href=https://github.com/ohmyzsh/ohmyzsh>ohmyzsh</a>. Les recomiendo que sólo revisen el script y copien sólo lo que encuentren útil.<h2 id=fuente>Fuente</h2><ul><li><a rel=noopener target=_blank href=https://thorsten-hans.com/5-types-of-zsh-aliases>5 Types Of ZSH Aliases You Should Know</a></ul><hr><p>¿Tienen alguna pregunta? Pueden dejar un comentario
en cualquiera de estas plataformas:<ul><li><a rel=noopener target=_blank href=https://dev.to/vonheikemen/alias-global-en-zsh-4i9p>dev.to</a><li><a rel=noopener target=_blank href=https://vonheikemen.hashnode.dev/zsh-global-aliases-es>Hashnode</a></ul><p>Pueden contactarme por las redes sociales:<ul><li>Twitter <a rel="noopener me" target=_blank href=https://twitter.com/VonHeikemen_>@VonHeikemen_</a><li>Mastodon <a rel="noopener me" target=_blank href=https://hachyderm.io/@vonheikemen>@vonheikemen@hachyderm.io</a></ul><p>Gracias por su tiempo. Si este artículo les pareció útil y quieren apoyar mis esfuerzos para crear más contenido, pueden dejar una propina en buy me a coffee ☕.</p><a href=https://www.buymeacoffee.com/vonheikemen style=display:flex;justify-content:center target=_blank><img src=https://cdn.buymeacoffee.com/buttons/v2/default-blue.png alt="Buy Me A Coffee" style=height:60px!important;width:217px!important></a></div></div>