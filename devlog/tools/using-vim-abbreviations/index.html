<!doctype html><html lang=en><meta http-equiv=x-ua-compatible content="IE=edge"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover"><meta http-equiv=permissions-policy content="interest-cohort=()"><title>Using Vim's abbreviations | Devlog</title><link rel=stylesheet href=https://vonheikemen.github.io/devlog/print.css media=print><link rel=stylesheet href=https://vonheikemen.github.io/devlog/styles.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface"><meta name=keywords content="vim,shell,software,coding,development"><meta name=description content="Exploring some cool use cases for vim abbreviations"><body class=theme-base-custom><div class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><a href=https://vonheikemen.github.io/devlog/><h1>Devlog</h1></a></div><ul class=sidebar-nav><li class=sidebar-nav-item><a href=/>whoami</a><li class=sidebar-nav-item><a href=https://vonheikemen.github.io/devlog/tags/>Explore tags</a><li class=sidebar-nav-item><a href=https://vonheikemen.github.io/devlog/es/>Devlog en español</a></ul>© 2020-2022 Heiker Curiel</div></div><div class="content container"><div class=post><h1 class=post-title>Using Vim's abbreviations</h1><span class=post-date>2020-11-03
| 10 min read
| <a href=https://vonheikemen.github.io/devlog/es/tools/using-vim-abbreviations/>Leer en español</a></span><p>One of the things vim does extremely well is automation. This time we'll explore a feature called "abbreviation" and how can we use it to automate things in insert mode (you can use it in other modes but I'll focus on insert mode). We will go from the most basic use case to some that are more elaborated. But don't worry, we'll take one step at a time. Let's start.<h2 id=step-0>Step 0</h2><p>Abbreviations can be assigned with the command <code>:ab[breviate]</code>. Since I only want to focus on insert mode I'll be using <code>:iabbrev</code>. This is how you would use it.<pre style=background-color:#2b2c2f;color:#cccece><code><span>:iabbrev [&lt;expr&gt;] [&lt;buffer&gt;] {abbreviation} {expansion}
</span></code></pre><p>In here anything that's inside a <code>[]</code> is optional. <code>&lt;expr></code> means that you could use a vimscript expression to create the expansion. <code>&lt;buffer></code> means that it only applies to the current buffer. <code>abbreviation</code> is the thing you type and that will be replaced by the <code>expansion</code>.<p>You can use this command in <a rel=noopener target=_blank href=https://learnvimscriptthehardway.stevelosh.com/chapters/12.html>autocommands</a> to make file specific abbreviations automatically. If you put something like this in your <code>.vimrc</code>.<pre style=background-color:#2b2c2f;color:#cccece><code><span>:autocmd FileType html,javascript,typescript,vue
</span><span>  \ :iabbrev &lt;buffer&gt; some-abbreviation some-expansion
</span></code></pre><p>It would make <code>some-abbreviation</code> available to you in <code>html</code>, <code>javascript</code>, <code>typescript</code> and <code>vue</code> files. With this knowledge you can now start creating some.<h2 id=hello-wordl>Hello wordl</h2><p>Typos. Don't you hate them? Writing <code>heigth</code> and then find out something is not working in your code can be very annoying. Well, no more. Now you have the tools (I mean the command) to fix that automatically.<pre style=background-color:#2b2c2f;color:#cccece><code><span>:iabbrev heigth height
</span></code></pre><p>Now when you write <code>heigth</code> and press the <code>space</code> key it will become <code>height</code>.<p><img src=https://res.cloudinary.com/vonheikemen/image/upload/v1604437302/devlog/using-vim-abbreviations/1-typos_03-11-2020_16-51.gif alt="fixing a typo"><p>But the fun doesn't stop there.<h2 id=it-s-not-just-for-letters>It's not just for letters</h2><p>Just like in regular mappings (think <code>:map</code> command) we can use special sequences like <code>&lt;CR></code> (the <code>enter</code> key), <code>&lt;Up></code>, <code>&lt;Tab></code> and many more. This gives us the power to move around the cursor and create more elaborate snippets.<p>One of the most common things I do in a javascript file is putting a <code>console.log()</code>, and it's not just me, it is so common that some text editors made for developers have a built in shortcut for that. Vim is not such editor, but we can make one.<pre style=background-color:#2b2c2f;color:#cccece><code><span>:iabbrev &lt;buffer&gt; con@ console.log();&lt;Left&gt;&lt;Left&gt;
</span></code></pre><p><img src=https://res.cloudinary.com/vonheikemen/image/upload/v1604438822/devlog/using-vim-abbreviations/2-simple-snippet_03-11-2020_17-26.gif alt="a simple snippet"><p>The <code>@</code> sign in this case is not important, it's just a silly convention I follow on my vim config, it's just there to make it clear this will be expanded into something else. I use <code>&lt;buffer></code> because I don't want this to be available in every buffer, just the ones where I can use valid javascript syntax. I would use this in an autocommand like the one I showed you before.<p>You'll notice that there is a space between the parenthesis in the <code>log</code> function, that's because we chose to "expand it" with the <code>space</code> key. Vim will replace the abbreviation after we press a "non-keyword character" and that character will be inserted after the expansion is done. Basically all the letters and a few special characters are considered "keyword characters" and anything that isn't in that set will begin the expansion. Might want to check <code>:help 'iskeyword'</code> for more details.<p>Anyway, if you don't want that extra space you can begin the expansion with the sequence <code>&lt;C-]></code> that is <code>control + closing bracket</code>.<h2 id=wait-did-someone-said-snippets>Wait... did someone said snippets?</h2><p>Yes, yes I did. With this feature we can create some complex snippets like the ones you find in a fancy IDE. Are you in a javascript file and want to create an immediately invoked function expression (iife)? No problem.<pre style=background-color:#2b2c2f;color:#cccece><code><span>:iabbrev &lt;buffer&gt; iife@ (async function() {})();&lt;Left&gt;&lt;Left&gt;&lt;Left&gt;&lt;Left&gt;&lt;Left&gt;&lt;CR&gt;&lt;CR&gt;&lt;Up&gt;
</span></code></pre><p><img src=https://res.cloudinary.com/vonheikemen/image/upload/v1604442411/devlog/using-vim-abbreviations/3-another-snippet_03-11-2020_18-25.gif alt="iife snippet"><p>You know what? Scratch that. There is a problem. All those <code>&lt;Left></code>s are hurting me. Can you just imaging making a snippet for a <code>switch/case</code>? Writing it in that style would be awful, it would work but it'll be awful. Don't worry there is an easy solution for this.<h3 id=escaping-insert-mode>Escaping insert mode</h3><p>Since we're basically automating keystrokes we can do a very funny thing, we can "press" <code>&lt;Esc></code> to go to normal mode and take advantage of all the vim goodness we can do in that mode. So, we could rewrite it like this.<pre style=background-color:#2b2c2f;color:#cccece><code><span>:iabbrev &lt;buffer&gt; iife@ (async function() {})();&lt;Esc&gt;4hi&lt;CR&gt;&lt;CR&gt;&lt;Up&gt;
</span></code></pre><p>We got the same snippet but now is less awful. We replaced the five <code>&lt;Left></code>s with <code>&lt;Esc>4hi</code>, a bit more cryptical but shorter. Although, if you've been using vim for a while you should know by now what <code>4hi</code> would do if you press that yourself. In fact, since we are just entering in insert mode to make one command (<code>4h</code>) and then going back we could simplify it a little bit.<pre style=background-color:#2b2c2f;color:#cccece><code><span>:iabbrev &lt;buffer&gt; iife@ (async function() {})();&lt;C-o&gt;4h&lt;CR&gt;&lt;CR&gt;&lt;Up&gt;
</span></code></pre><p>Now we use <code>&lt;C-o></code> (<code>control + o</code>) to go to normal mode, make one command and immediately go back to insert mode.<h2 id=let-s-get-real-fancy>Let's get real fancy</h2><p>How about we go one step further. Let's make a snippet that can put the cursor in a convenient location but without messing around to much with <code>&lt;Left></code>s and <code>&lt;Right></code>s.<p>We could make yet another version of the <code>iife@</code> but I want to give you more ideas. Let's do a "traditional" <code>for</code> loop. You know, like this one.<pre data-lang=js style=background-color:#2b2c2f;color:#cccece class=language-js><code class=language-js data-lang=js><span style=color:#c594c5>for</span><span>(</span><span style=color:#c594c5>let </span><span>i </span><span style=color:#5fb3b3>= </span><span style=color:#f99157>0</span><span style=color:#5fb3b3>; </span><span>i </span><span style=color:#5fb3b3>&lt; {</span><span>PLACEHOLDER</span><span style=color:#5fb3b3>}; </span><span>i</span><span style=color:#5fb3b3>++</span><span>) </span><span style=color:#5fb3b3>{
</span><span>
</span><span style=color:#5fb3b3>}
</span></code></pre><p>At the end of the expansion we want the cursor to be where the <code>{PLACEHOLDER}</code> is, this time we don't want any <code>&lt;Left></code>s or <code>&lt;Right></code>s, we just want to get there. How do we do it? With a search. Yes, we can also make a search with <code>/</code> or <code>?</code>.<pre style=background-color:#2b2c2f;color:#cccece><code><span>:iabbrev &lt;buffer&gt; forii@ for(let i = 0; i &lt;z; i++) {&lt;CR&gt;&lt;CR&gt;}&lt;Esc&gt;?z&lt;CR&gt;xi
</span></code></pre><p>Notice the <code>z</code>? That's my placeholder. After I type everything, I hit the <code>&lt;Esc></code>, press <code>?</code> (backward search), look for a <code>z</code>, hit enter to submit the search (the <code>&lt;CR></code> part) and that will take me where I want, finally the <code>xi</code> part deletes the <code>z</code> and lets me go back to insert mode.<p><img src=https://res.cloudinary.com/vonheikemen/image/upload/v1604449379/devlog/using-vim-abbreviations/4-with-placeholder_03-11-2020_20-17.gif alt="a nice for loop"><h2 id=more-powerrrr>More Powerrrr</h2><p>What else can we do? An argument. Using a word like a function argument. Oooh, that would be cool. Got the perfect use case for this. Let's do it.<p>Do you know about <a rel=noopener target=_blank href=https://github.com/sdras/vue-vscode-snippets>vue-vscode-snippets</a>? No. That's okay, I'll tell you. They are vue snippets for vscode. One of those snippets is called <code>vimport-export</code>, it creates this boilerplate.<pre data-lang=js style=background-color:#2b2c2f;color:#cccece class=language-js><code class=language-js data-lang=js><span style=color:#c594c5>import </span><span>Name </span><span style=color:#c594c5>from </span><span style=color:#5fb3b3>&#39;</span><span style=color:#99c794>@/components/Name.vue</span><span style=color:#5fb3b3>&#39;;
</span><span>
</span><span style=color:#c594c5>export default </span><span style=color:#5fb3b3>{
</span><span>  component</span><span style=color:#5fb3b3>: {
</span><span>    Name</span><span style=color:#5fb3b3>,
</span><span>  </span><span style=color:#5fb3b3>}
</span><span style=color:#5fb3b3>};
</span></code></pre><p>The cool thing about it is that it uses the multiple cursor feature of vscode to let you replace <code>Name</code> with the name of your component. I'll be honest, I'm jealous, I want multiple cursor in vim. I know there is a plugin, but I want it to be a native feature. Anyway, we don't need no stinking multiple cursors, we literally just need to put the same word in multiple places.<p>This is how is going to be: I put a word (the name of my component) and then the abbreviation. Like this.<pre style=background-color:#2b2c2f;color:#cccece><code><span>MyComponent vcomp@
</span></code></pre><p>What's going to happen is, I'm going to put <code>MyComponent</code> in a register and just paste it anywhere I need to. You ready? Let's start with the import part.<pre style=background-color:#2b2c2f;color:#cccece><code><span>:iabbrev &lt;buffer&gt; vcomp@ &lt;Esc&gt;bvediimport &lt;C-o&gt;P from &#39;@/components/&lt;C-o&gt;P.vue&#39;;
</span></code></pre><p>The key component of this is <code>&lt;Esc>bved</code>. <code>&lt;Esc></code> will take us right in normal mode, <code>b</code> will take the cursor back to the beginning of the previous word (the component name). <code>ved</code> will select the entire word and delete it. Thanks to the way <code>d</code> works we will have the component available in a register just waiting.<p>Now that's one part of the problem, and to be fair we could easily make the other part. Let's take it one step further. The common use case for this abbreviation would be to register a component inside another component, in this case we already have an <code>export default</code> object, and what we want to do is add it to the <code>components</code> property. Basically we want to automate this process:<p><img src=https://res.cloudinary.com/vonheikemen/image/upload/v1604454412/devlog/using-vim-abbreviations/5-vexport_03-11-2020_21-40.gif alt="register component"><p>The second part starts with <code>&lt;Esc></code> key to get to normal mode, then we use <code>/</code> to search for <code>components: {</code>, we submit the search and then we enter insert mode in the line below using <code>o</code>, we use <code>&lt;Tab></code> to get to the right spot then go paste the component name (which we have in the register) and put a comma. We could stop there but I want to preserve the order of my imports. Next, we take the whole line where the component is, so we hit <code>&lt;Esc>dd</code>. Then go up and to the end of the line, that will be <code>k$</code>. To go the bottom of the nested object we press <code>%</code>, once we're there we need to create a newline so we hit <code>o</code> again. This is the tricky part, we hit <code>&lt;Esc></code> to go to normal mode, paste the component in this place using <code>P</code> (capital <code>p</code>). That's good but now we have a new empty line, we delete that with <code>jdd</code>. Finally we go back to the line of our import with <code>2&lt;C-o></code> (we need to jump twice so we need that 2). So... we need this:<pre style=background-color:#2b2c2f;color:#cccece><code><span>&lt;Esc&gt;/components: {&lt;CR&gt;o&lt;Tab&gt;&lt;Esc&gt;pa,&lt;Esc&gt;ddk$%ko&lt;Esc&gt;Pjdd2&lt;C-o&gt;a
</span></code></pre><p>Everything together looks like this.<pre style=background-color:#2b2c2f;color:#cccece><code><span>:iabbrev &lt;buffer&gt; vcomp@ &lt;Esc&gt;bvediimport &lt;C-o&gt;P from &#39;@/components/&lt;C-o&gt;P.vue&#39;;&lt;Esc&gt;/components: {&lt;CR&gt;o&lt;Tab&gt;&lt;Esc&gt;pa,&lt;Esc&gt;ddk$%ko&lt;Esc&gt;Pjdd2&lt;C-o&gt;a
</span></code></pre><p><img src=https://res.cloudinary.com/vonheikemen/image/upload/v1604456390/devlog/using-vim-abbreviations/6-vcomp_03-11-2020_22-15.gif alt="register component complete"><p>If you want to have some fun try to make an abbreviation that takes this.<pre data-lang=js style=background-color:#2b2c2f;color:#cccece class=language-js><code class=language-js data-lang=js><span>Example vvcomp@
</span><span>
</span><span style=color:#c594c5>export default </span><span style=color:#5fb3b3>{
</span><span>
</span><span style=color:#5fb3b3>};
</span></code></pre><p>And turn it into this.<pre data-lang=js style=background-color:#2b2c2f;color:#cccece class=language-js><code class=language-js data-lang=js><span style=color:#c594c5>import </span><span>Example </span><span style=color:#c594c5>from </span><span style=color:#5fb3b3>&#39;</span><span style=color:#99c794>@/components/Example.vue</span><span style=color:#5fb3b3>&#39;;
</span><span>
</span><span style=color:#c594c5>export default </span><span style=color:#5fb3b3>{
</span><span>  components</span><span style=color:#5fb3b3>: {
</span><span>    Example</span><span style=color:#5fb3b3>,
</span><span>  </span><span style=color:#5fb3b3>},
</span><span style=color:#5fb3b3>};
</span></code></pre><h3 id=the-cherry-on-top>The cherry on top</h3><p>I shit you not. Abbreviations work inside macros. Try recording this macro and play it multiple times.<pre style=background-color:#2b2c2f;color:#cccece><code><span>0ea vcomp@^]^]j
</span></code></pre><p><code>^]</code> is the <code>&lt;Esc></code> key.<p><img src=https://res.cloudinary.com/vonheikemen/image/upload/v1604457566/devlog/using-vim-abbreviations/7-macro_03-11-2020_22-34.gif alt=macros><h2 id=conclusion>Conclusion</h2><p>That's it. That's all I got for you today. I you hope found something useful or at the very least learned something funny you'll probably never use.<p>If you need any more ideas check out <a rel=noopener target=_blank href=https://github.com/VonHeikemen/dotfiles/blob/master/my-configs/vim/snippets.vim>my snippets</a>. If you have any interesting ideas, let me know.<h2 id=sources>Sources</h2><ul><li><a rel=noopener target=_blank href=https://vimhelp.org/map.txt.html#Abbreviations>:help abbreviations</a><li><a rel=noopener target=_blank href=https://learnvimscriptthehardway.stevelosh.com/chapters/08.html>Learn Vimscript the Hard Way: Abbreviations</a></ul><hr><p>Have any question? Feel free to leave a comment
in one of these platform where I have shared this:<ul><li><a rel=noopener target=_blank href=https://dev.to/vonheikemen/using-vim-s-abbreviations-4jj6>dev.to</a><li><a rel=noopener target=_blank href=https://vonheikemen.hashnode.dev/using-vim-abbreviations>Hashnode</a></ul><p>Or reach out to me on twitter
<a rel=noopener target=_blank href=https://twitter.com/VonHeikemen_>@VonHeikemen_</a><p>Thank you for reading. If you find this article useful and want to support my efforts, buy me a coffee ☕</p><a href=https://www.buymeacoffee.com/vonheikemen style=display:flex;justify-content:center target=_blank><img src=https://cdn.buymeacoffee.com/buttons/v2/default-blue.png alt="Buy Me A Coffee" style=height:60px!important;width:217px!important></a></div></div>