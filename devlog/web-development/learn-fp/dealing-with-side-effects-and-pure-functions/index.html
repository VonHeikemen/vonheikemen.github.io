<!doctype html><html lang=en><head><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="text/html; charset=utf-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1.0,maximum-scale=1,viewport-fit=cover" name=viewport><meta content="interest-cohort=()" http-equiv=Permissions-Policy><title>
  Dealing with side effects and pure functions in javascript | Devlog
</title><link href=https://vonheikemen.github.io/devlog/print.css media=print rel=stylesheet><link href=https://vonheikemen.github.io/devlog/styles.css rel=stylesheet><link href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface" rel=stylesheet><link href=https://vonheikemen.github.io/devlog/atom.xml rel=alternate title=RSS type=application/atom+xml><link href=https://hachyderm.io/@vonheikemen rel=me><link href=https://twitter.com/VonHeikemen_ rel=me><meta content="javascript, functional-programming, software, coding, development" name=keywords><meta content="A few ideas of how to use pure functions in the real world" name=description><link href=https://dev.to/vonheikemen/dealing-with-side-effects-and-pure-functions-in-javascript-16mg rel=canonical><body class=theme-base-custom><div class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><a href=https://vonheikemen.github.io/devlog/><h1>Devlog</h1></a></div><ul class=sidebar-nav><li class=sidebar-nav-item><a href=/>whoami</a><li class=sidebar-nav-item><a href=https://vonheikemen.github.io/devlog/tags/>Explore tags</a><li class=sidebar-nav-item><a href=https://vonheikemen.github.io/devlog/es/>Devlog en español</a><li class=sidebar-nav-item><a href=https://vonheikemen.github.io/devlog/atom.xml>RSS</a></ul> © 2020-2026 Heiker Curiel</div></div><div class="content container"><div class=post><h1 class=post-title>Dealing with side effects and pure functions in javascript</h1><span class=post-date>2020-01-05 | Originally published at <a href=https://dev.to/vonheikemen/dealing-with-side-effects-and-pure-functions-in-javascript-16mg> dev.to </a> | 8 min read | <a href=https://vonheikemen.github.io/devlog/es/web-development/learn-fp/dealing-with-side-effects-and-pure-functions/> Leer en español </a> </span><p>Have you ever heard the term "pure function"? What about "side effects"? If you have then probably you've heard that side effects are evil and should be avoided at all cost (just like <code>var</code>.) Here is the problem, if you write javascript you probably want to cause those side effects (specially if you get paid to write javascript) So the solution here is not to avoid all the side effects but to control them. I going to show you a few things that you can do to make your pure functions and your side effects get along just fine.<p>Before we start let us just do a little recap on some terms, so we can all be in the same page.<h2 id=concepts>Concepts</h2><h3 id=pure-function>Pure function</h3><p>For the sake of simplicity let us say that a pure function is a function whose output is only determined by its input and has no observable effect on the outside world. The main benefit they provide (in my opinion) is predictability, if you give them the same input values they will always return you the same output. Lets look at some examples.<p>This one is pure.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> increment</span><span style=color:#9cabca>(</span><span>number</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span> number</span><span style=color:#e6c384> +</span><span style=color:#d27e99> 1</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>This one isn't<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span>Math</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>random</span><span style=color:#9cabca>();</span></span></code></pre><p>And these are tricky.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>const</span><span> A_CONSTANT</span><span style=color:#e6c384> =</span><span style=color:#d27e99> 1</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> increment</span><span style=color:#9cabca>(</span><span>number</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span> number</span><span style=color:#e6c384> +</span><span> A_CONSTANT</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#7aa89f>module</span><span style=color:#9cabca>.</span><span style=color:#7aa89f>exports</span><span style=color:#e6c384> =</span><span style=color:#9cabca>{</span></span>
<span class=giallo-l><span>  increment</span></span>
<span class=giallo-l><span style=color:#9cabca>};</span></span></code></pre><pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> a_constant</span><span style=color:#9cabca>() {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#d27e99> 1</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> increment</span><span style=color:#9cabca>(</span><span>number</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span> number</span><span style=color:#e6c384> +</span><span style=color:#7e9cd8> a_constant</span><span style=color:#9cabca>();</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><h3 id=side-effects>Side effects</h3><p>I will call a side effect to anything that compromises the purity of a function. The list includes but is not limited to:<ul><li>Changing (mutate) an external variable in any way.<li>Showing things in the screen.<li>Writing to a file.<li>Making an http request.<li>Spawn a process.<li>Saving data in a database.<li>Calling other functions with side-effects.<li>DOM manipulation.<li>Randomness.</ul><p>So, any action that can change the "state of the world" is a side effect.<h2 id=how-do-we-use-those-things-together>How do we use those things together?</h2><p>You're probably still thinking about that side effect list, is basically everything javascript is good for and yet some people still tell you to avoid them. Don't fear I come bearing suggestions.<h3 id=good-old-function-composition>Good old function composition</h3><p>Another way of saying it will be: good old separation of concerns. This is the non complicated way. If there is a way to break apart a computation from a side effect then put the computation on a function and give the output to the function/block that has the side effect.<p>It could be as simple as doing something like this.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> some_process</span><span style=color:#9cabca>() {</span></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span> data</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> get_data_somehow</span><span style=color:#9cabca>();</span></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span> clean_data</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> computation</span><span style=color:#9cabca>(</span><span>data</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span> result</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> save</span><span style=color:#9cabca>(</span><span>clean_data</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span> result</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>Now, <code>some_process</code> still isn't pure but that's okay, we are writing javascript we don't need everything to be pure, what we need is to keep our sanity. By splitting the side effects from the pure computation we have created three independent functions that solve only one problem at a time. You could even take it one step further and use a helper function like <a rel="noopener external" href=https://ramdajs.com/docs/#pipe target=_blank>pipe</a> to get rid of those intermediate variables and compose those functions directly.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>const</span><span> some_process</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> pipe</span><span style=color:#9cabca>(</span><span>get_data_somehow</span><span style=color:#9cabca>,</span><span> computation</span><span style=color:#9cabca>,</span><span> save</span><span style=color:#9cabca>);</span></span></code></pre><p>But now we have created another problem, what happens when we want to make a side effect in the middle of one those? What do we do? Well if a helper function created the problem then I say use another helper function to get out of it. Something like this would work.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> tap</span><span style=color:#9cabca>(</span><span>fn</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#957fb8> function</span><span style=color:#9cabca> (</span><span>arg</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#7e9cd8>    fn</span><span style=color:#9cabca>(</span><span>arg</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>    return</span><span> arg</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>  }</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>This will allow you to place a function with a side effect in the middle of chain of functions while keeping data flow.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>const</span><span> some_process</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> pipe</span><span style=color:#9cabca>(</span></span>
<span class=giallo-l><span>  get_data_somehow</span><span style=color:#9cabca>,</span></span>
<span class=giallo-l><span style=color:#7e9cd8>  tap</span><span style=color:#9cabca>(</span><span>console</span><span style=color:#9cabca>.</span><span style=color:#e6c384>log</span><span style=color:#9cabca>),</span></span>
<span class=giallo-l><span>  computation</span><span style=color:#9cabca>,</span></span>
<span class=giallo-l><span style=color:#7e9cd8>  tap</span><span style=color:#9cabca>(</span><span>a_side_effect</span><span style=color:#9cabca>),</span></span>
<span class=giallo-l><span>  save</span></span>
<span class=giallo-l><span style=color:#9cabca>);</span></span></code></pre><p>There is argument to be made against these type of things, some people would argue that now all your logic is scattered all over the place and that you have to move around to actually know what the function does. I really don't mind, it's a matter of preference.<p>Let's get back to business, did you see <code>tap</code>'s signature? Look at it: <code>tap(fn)</code>. It takes a callback as a parameter lets see how we can use that to our advantage.<h3 id=make-someone-else-handle-the-problem>Make someone else handle the problem</h3><p>As we all know life isn't always so simple, sometimes we just can't make that sweet pipeline of functions. In some situations we need to do some side-effect in the middle of a process and when that happens we can always cheat. In javascript we can treat functions as values which lets us do funny things like passing functions as parameters to other functions. This way the function can have the flexibility to execute a side effect when we need to while maintaining some of the predictability that we know and love.<p>Say for example that you have a function that is already pure and does something to a collection of data but now for some reason you need log the original and the transformed values right after the transformation happens. What you can do is add a function as a parameter and call it in the right moment.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> transform</span><span style=color:#9cabca>(</span><span>onchange</span><span style=color:#9cabca>,</span><span> data</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8>  let</span><span> result</span><span style=color:#e6c384> =</span><span> Array</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>isArray</span><span style=color:#9cabca>(</span><span>data</span><span style=color:#9cabca>)</span><span style=color:#e6c384> ?</span><span style=color:#9cabca> []</span><span style=color:#e6c384> :</span><span style=color:#9cabca> {};</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  for</span><span style=color:#9cabca>(</span><span style=color:#957fb8>let</span><span> key</span><span style=color:#e6c384> in</span><span> data</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span>    result</span><span style=color:#9cabca>[</span><span>key</span><span style=color:#9cabca>]</span><span style=color:#e6c384> =</span><span> data</span><span style=color:#9cabca>[</span><span>key</span><span style=color:#9cabca>]</span><span style=color:#e6c384> +</span><span style=color:#d27e99> 1</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#7e9cd8>    onchange</span><span style=color:#9cabca>(</span><span>data</span><span style=color:#9cabca>[</span><span>key</span><span style=color:#9cabca>],</span><span> result</span><span style=color:#9cabca>[</span><span>key</span><span style=color:#9cabca>]);</span></span>
<span class=giallo-l><span style=color:#9cabca>  }</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span> result</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>This technically fulfills some of the requirements of a pure function, the output (and behavior) of the function is still determined by its input, it just so happens that one of those inputs is a function that can trigger any side effect. Again, the goal in here is not to fight against the nature of javascript and have everything be 100% pure, we want to control when the side effect happens. So in this case the one who controls whether or not to have side effects is the caller of the function. One extra benefit of this is that if you want to use that function in a unit test to prove that it still works as expected the only thing you'll need to do is supply its arguments, you don't have grab any mocking library to test it.<p>You may be wondering why put the callback as the first parameter, this is really about personal preference. If you put the <code>thing</code> that changes the most frequently in the last position you make it easier to do partial application, that is binding the values of the parameters without executing the function. For example you could use <code>transform.bind</code> to create a specialized function which already has the <code>onchange</code> callback.<h3 id=lazy-effects>Lazy effects</h3><p>The idea here is to delay the inevitable. Instead of performing the side effect right away what you do is provide a way for the caller of your function to execute the side-effect when they see fit. You can do this in a couple of ways.<h4 id=using-function-wrappers>Using function wrappers</h4><p>As I mentioned before in javascript you can treat functions as values and one thing you can do with values is returning them from functions. I'm talking about functions that return functions. We already saw how useful that can be and if you think about is not that crazy, how many times have you seen something like this?<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> Stuff</span><span style=color:#9cabca>(</span><span>thing</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span>  </span></span>
<span class=giallo-l><span style=color:#727169>  // setup</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#9cabca> {</span></span>
<span class=giallo-l><span style=color:#7e9cd8>    some_method</span><span style=color:#9cabca>() {</span></span>
<span class=giallo-l><span style=color:#727169>      // code...</span></span>
<span class=giallo-l><span style=color:#9cabca>    },</span></span>
<span class=giallo-l><span style=color:#7e9cd8>    other</span><span style=color:#9cabca>() {</span></span>
<span class=giallo-l><span style=color:#727169>      // code...</span></span>
<span class=giallo-l><span style=color:#9cabca>    }</span></span>
<span class=giallo-l><span style=color:#9cabca>  }</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>This is an old school "constructor." Before, in the good ol' days of ES5, this was one way of emulating classes. Is a regular function that returns an object, and is we all know objects can have methods. What we want to do is little bit like that, we want convert the block that contains the side effect into a function and return it.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> some_process</span><span style=color:#9cabca>(</span><span>config</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#727169>  /*</span></span>
<span class=giallo-l><span style=color:#727169>   * do some pure computation with config</span></span>
<span class=giallo-l><span style=color:#727169>   */</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#957fb8> function</span><span style=color:#7e9cd8> _effect</span><span style=color:#9cabca>() {</span></span>
<span class=giallo-l><span style=color:#727169>   /*</span></span>
<span class=giallo-l><span style=color:#727169>    * do whatever you want in here</span></span>
<span class=giallo-l><span style=color:#727169>    */</span><span> </span></span>
<span class=giallo-l><span style=color:#9cabca>  }</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>This way we give the caller of our function the opportunity to use the side effect when they want, and they can even pass it around and compose it with other functions. Interestingly enough this is not a very common pattern, maybe because there are other ways to achieve the same goal.<h4 id=using-data-structures>Using data structures</h4><p>Another way to create lazy effects is to wrap a side effect inside a data structure. What we want to do is to treat our effects as regular data, have the ability to manipulate them and even chain other effects in safe way (I mean without executing them). You've probably seen this before, one example that I can think of is Observables. Take a look at this code that uses rxjs.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#727169>// taken from:</span></span>
<span class=giallo-l><span style=color:#727169>// https://www.learnrxjs.io/operators/creation/create.html</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#727169>/*</span></span>
<span class=giallo-l><span style=color:#727169>  Increment value every 1s, emit even numbers.</span></span>
<span class=giallo-l><span style=color:#727169>*/</span></span>
<span class=giallo-l><span style=color:#957fb8>const</span><span> evenNumbers</span><span style=color:#e6c384> =</span><span> Observable</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>create</span><span style=color:#9cabca>(</span><span style=color:#957fb8>function</span><span style=color:#9cabca>(</span><span>observer</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8>  let</span><span> value</span><span style=color:#e6c384> =</span><span style=color:#d27e99> 0</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span> interval</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> setInterval</span><span style=color:#9cabca>(()</span><span style=color:#957fb8> =></span><span style=color:#9cabca> {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>    if</span><span style=color:#9cabca> (</span><span>value</span><span style=color:#e6c384> %</span><span style=color:#d27e99> 2</span><span style=color:#e6c384> ===</span><span style=color:#d27e99> 0</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span>      observer</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>next</span><span style=color:#9cabca>(</span><span>value</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>    }</span></span>
<span class=giallo-l><span>    value</span><span style=color:#e6c384>++</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>  },</span><span style=color:#d27e99> 1000</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#9cabca> ()</span><span style=color:#957fb8> =></span><span style=color:#7e9cd8> clearInterval</span><span style=color:#9cabca>(</span><span>interval</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>});</span></span></code></pre><p>The result of <code>Observable.create</code> not only delays the execution of <code>setInterval</code> but also gives you the ability to call <code>evenNumbers.pipe</code> to chain other observables that can also have other side effects. Now of course Observables and rxjs aren't the only way, we can create our own effect type. If we want to create one all we need is a function to execute the effect and another one that lets us compose effects.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> Effect</span><span style=color:#9cabca>(</span><span>effect</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#9cabca> {</span></span>
<span class=giallo-l><span style=color:#7e9cd8>    run</span><span style=color:#9cabca>(</span><span style=color:#e6c384>...</span><span>args</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>      return</span><span style=color:#7e9cd8> effect</span><span style=color:#9cabca>(</span><span style=color:#e6c384>...</span><span>args</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>    },</span></span>
<span class=giallo-l><span style=color:#7e9cd8>    map</span><span style=color:#9cabca>(</span><span>fn</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>      return</span><span style=color:#7e9cd8> Effect</span><span style=color:#9cabca>(</span><span>arg</span><span style=color:#957fb8> =></span><span style=color:#7e9cd8> fn</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>effect</span><span style=color:#9cabca>(</span><span>arg</span><span style=color:#9cabca>)));</span></span>
<span class=giallo-l><span style=color:#9cabca>    }</span></span>
<span class=giallo-l><span style=color:#9cabca>  };</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span>
<span class=giallo-l></span></code></pre><p>It may not look like much but this is actually enough to be useful. You can start composing your effects without triggering any changes to the environment. You can now do stuff like this.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>const</span><span style=color:#7e9cd8> persist</span><span style=color:#e6c384> =</span><span style=color:#9cabca> (</span><span>data</span><span style=color:#9cabca>)</span><span style=color:#957fb8> =></span><span style=color:#9cabca> {</span></span>
<span class=giallo-l><span>  console</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>log</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>`saving </span><span style=color:#9cabca>${</span><span>data</span><span style=color:#9cabca>}</span><span style=color:#98bb6c> to a database...`</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span> data</span><span style=color:#9cabca>.</span><span>length</span><span style=color:#e6c384> ?</span><span style=color:#ffa066> true</span><span style=color:#e6c384> :</span><span style=color:#ffa066> false</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>};</span></span>
<span class=giallo-l><span style=color:#957fb8>const</span><span style=color:#7e9cd8> show_message</span><span style=color:#e6c384> =</span><span> result</span><span style=color:#957fb8> =></span><span> result </span></span>
<span class=giallo-l><span style=color:#e6c384>  ?</span><span> console</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>log</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>'we good'</span><span style=color:#9cabca>)</span><span> </span></span>
<span class=giallo-l><span style=color:#e6c384>  :</span><span> console</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>log</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>'we not good'</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>const</span><span> save</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> Effect</span><span style=color:#9cabca>(</span><span>persist</span><span style=color:#9cabca>).</span><span style=color:#7e9cd8>map</span><span style=color:#9cabca>(</span><span>show_message</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>save</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>run</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>'some stuff'</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#727169>// saving some stuff to a database...</span></span>
<span class=giallo-l><span style=color:#727169>// we good</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>save</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>run</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>''</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#727169>// saving  to a database...</span></span>
<span class=giallo-l><span style=color:#727169>// we not good </span></span></code></pre><p>If you have used <code>Array.map</code> to compose data transformations you'll be feeling right at home when using <code>Effect</code>, all you have to do is provide the functions with the side effect and at the of the chain the resulting <code>Effect</code> will know what to do when you are ready to call it.<p>I've only scratched the surface of what you can do with <code>Effect</code>, if you want to learn more try to search the term <code>functor</code> and <code>IO Monad</code>, I promise you is going to be fun.<h2 id=what-now>What now?</h2><p>Now you click on the link in the end of the post, it's a really good article (basically a better version of this one).<p>I hope now you are confident enough to start writing pure functions in your code and combine them with the convenient side effects that javascript lets you do.<h2 id=sources>Sources</h2><ul><li><a rel="noopener external" href=https://jrsinclair.com/articles/2018/how-to-deal-with-dirty-side-effects-in-your-pure-functional-javascript/ target=_blank>How to deal with dirty side effects in your pure functional JavaScript</a></ul><hr><p>Have any question? Feel free to leave a comment in one of these platform where I have shared this:<ul><li><a href=https://dev.to/vonheikemen/dealing-with-side-effects-and-pure-functions-in-javascript-16mg rel=noopener target=_blank>dev.to</a><li><a href=https://vonheikemen.hashnode.dev/dealing-with-side-effects-and-pure-functions-in-javascript rel=noopener target=_blank>Hashnode</a></ul><p>You can reach out to me on social media:<ul><li>Twitter <a rel="noopener me" href=https://twitter.com/VonHeikemen_ target=_blank> @VonHeikemen_ </a><li>Bluesky <a rel="noopener me" href=https://bsky.app/profile/vonheikemen.bsky.social target=_blank> @vonheikemen.bsky.social </a><li>Mastodon <a rel="noopener me" href=https://hachyderm.io/@vonheikemen target=_blank> @vonheikemen@hachyderm.io </a></ul><p>Thank you for reading. If you find this article useful and want to support my efforts, buy me a coffee ☕</p><a href=https://ko-fi.com/vonheikemen style=justify-content:center;display:flex target=_blank> <img alt="Buy Me A Coffee" src="https://storage.ko-fi.com/cdn/kofi2.png?v=3" style=width:217px!important;height:60px!important> </a></div></div>