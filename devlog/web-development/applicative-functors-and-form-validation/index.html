<!doctype html><html lang=en><head><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="text/html; charset=utf-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1.0,maximum-scale=1,viewport-fit=cover" name=viewport><meta content="interest-cohort=()" http-equiv=Permissions-Policy><title>
  How an applicative functor can help us validate forms | Devlog
</title><link href=https://vonheikemen.github.io/devlog/print.css media=print rel=stylesheet><link href=https://vonheikemen.github.io/devlog/styles.css rel=stylesheet><link href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface" rel=stylesheet><link href=https://vonheikemen.github.io/devlog/atom.xml rel=alternate title=RSS type=application/atom+xml><link href=https://hachyderm.io/@vonheikemen rel=me><link href=https://twitter.com/VonHeikemen_ rel=me><meta content="javascript, functional-programming, software, coding, development" name=keywords><meta content="Validating a form 'functional style'" name=description><body class=theme-base-custom><div class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><a href=https://vonheikemen.github.io/devlog/><h1>Devlog</h1></a></div><ul class=sidebar-nav><li class=sidebar-nav-item><a href=/>whoami</a><li class=sidebar-nav-item><a href=https://vonheikemen.github.io/devlog/tags/>Explore tags</a><li class=sidebar-nav-item><a href=https://vonheikemen.github.io/devlog/es/>Devlog en español</a><li class=sidebar-nav-item><a href=https://vonheikemen.github.io/devlog/atom.xml>RSS</a></ul> © 2020-2026 Heiker Curiel</div></div><div class="content container"><div class=post><h1 class=post-title>How an applicative functor can help us validate forms</h1><span class=post-date>2021-10-03 | 5 min read | <a href=https://vonheikemen.github.io/devlog/es/web-development/applicative-functors-and-form-validation/> Leer en español </a> </span><p>We will 'play' with applicative functors. To be more specific we will use it to validate some user input that comes from a form.<p>If you don't know what's an applicative maybe you want like summary or something... it ain't going happen. Still haven't found a way to explain them without telling you a bunch of stuff you won't need.<p>If you really, really want to know more about applicatives I recommend reading at least one of these.<ul><li><a href=https://vonheikemen.github.io/devlog/web-development/learn-fp/the-power-of-map/>Speaking of functors.</a><li><a href=https://vonheikemen.github.io/devlog/web-development/learn-fp/applicative-functors/>Have you met applicative functors?</a><li><a href=https://vonheikemen.github.io/devlog/web-development/tagged-unions-and-fantasy-land/>Exploring Fantasy Land.</a></ul><p>For now I'll tell you with an example one of the problems we can solve using applicatives.<h2 id=imagine>Imagine</h2><p>Imagine a situation like this: you have some value and a regular function, you want to apply the function to the value.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>const</span><span> value</span><span style=color:#e6c384> =</span><span style=color:#d27e99> 1</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#957fb8>const</span><span style=color:#7e9cd8> fn</span><span style=color:#e6c384> =</span><span style=color:#9cabca> (</span><span>x</span><span style=color:#9cabca>)</span><span style=color:#957fb8> =></span><span> x</span><span style=color:#e6c384> +</span><span style=color:#d27e99> 1</span><span style=color:#9cabca>;</span></span></code></pre><p>The solution is quite simple.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#7e9cd8>fn</span><span style=color:#9cabca>(</span><span>value</span><span style=color:#9cabca>);</span><span style=color:#727169> // => 2</span></span></code></pre><p>All good. No need for fancy stuff. But now let's say <code>value</code> and <code>fn</code> are both "trapped" inside a data structure (could be anything).<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>const</span><span> Value</span><span style=color:#e6c384> =</span><span style=color:#9cabca> [</span><span style=color:#d27e99>1</span><span style=color:#9cabca>];</span></span>
<span class=giallo-l><span style=color:#957fb8>const</span><span> Fn</span><span style=color:#e6c384> =</span><span style=color:#9cabca> [(</span><span>x</span><span style=color:#9cabca>)</span><span style=color:#957fb8> =></span><span> x</span><span style=color:#e6c384> +</span><span style=color:#d27e99> 1</span><span style=color:#9cabca>];</span></span></code></pre><p>So we have things inside arrays. Okay. But what happens if we want to apply the function? How do we proceed? Like this?<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#9cabca>[</span><span>Fn</span><span style=color:#9cabca>[</span><span style=color:#d27e99>0</span><span style=color:#9cabca>](</span><span>Value</span><span style=color:#9cabca>[</span><span style=color:#d27e99>0</span><span style=color:#9cabca>])];</span><span style=color:#727169> // => [2]</span></span></code></pre><p>Oh, that can't be right. In an ideal world we could do something like this.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span>Value</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>ap</span><span style=color:#9cabca>(</span><span>Fn</span><span style=color:#9cabca>);</span><span style=color:#727169> // => [2]</span></span></code></pre><p>What we want to treat this apply operation like another method in our structure.<p>The bad news is that we don't live in a world where arrays can do that. The good news is we can implement <code>.ap</code> ourselves.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>const</span><span> List</span><span style=color:#e6c384> =</span><span style=color:#9cabca> {</span></span>
<span class=giallo-l><span style=color:#7e9cd8>  ap</span><span style=color:#9cabca>(</span><span>Fn</span><span style=color:#9cabca>,</span><span> Value</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>    return</span><span> Value</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>flatMap</span><span style=color:#9cabca>(</span><span>x</span><span style=color:#957fb8> =></span><span> Fn</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>map</span><span style=color:#9cabca>(</span><span>f</span><span style=color:#957fb8> =></span><span style=color:#7e9cd8> f</span><span style=color:#9cabca>(</span><span>x</span><span style=color:#9cabca>)));</span></span>
<span class=giallo-l><span style=color:#9cabca>  }</span></span>
<span class=giallo-l><span style=color:#9cabca>};</span></span></code></pre><p>With this little helper we can solve our problem.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>const</span><span> Value</span><span style=color:#e6c384> =</span><span style=color:#9cabca> [</span><span style=color:#d27e99>1</span><span style=color:#9cabca>];</span></span>
<span class=giallo-l><span style=color:#957fb8>const</span><span> Fn</span><span style=color:#e6c384> =</span><span style=color:#9cabca> [(</span><span>x</span><span style=color:#9cabca>)</span><span style=color:#957fb8> =></span><span> x</span><span style=color:#e6c384> +</span><span style=color:#d27e99> 1</span><span style=color:#9cabca>];</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>List</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>ap</span><span style=color:#9cabca>(</span><span>Fn</span><span style=color:#9cabca>,</span><span> Value</span><span style=color:#9cabca>);</span><span style=color:#727169> // => [2]</span></span></code></pre><h2 id=the-next-step>The next step</h2><p>Let's put our attention in another structure: objects.<p>Imagine the same situation but this time the things we want to use are inside an object with the same "shape".<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>const</span><span> Value</span><span style=color:#e6c384> =</span><span style=color:#9cabca> {</span><span>email</span><span style=color:#9cabca>:</span><span style=color:#98bb6c> 'this@example.com'</span><span style=color:#9cabca>};</span></span>
<span class=giallo-l><span style=color:#957fb8>const</span><span> Fn</span><span style=color:#e6c384> =</span><span style=color:#9cabca> {</span><span style=color:#7e9cd8>email</span><span style=color:#9cabca>: (</span><span>input</span><span style=color:#9cabca>)</span><span style=color:#957fb8> =></span><span> input</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>includes</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>'@'</span><span style=color:#9cabca>)};</span></span></code></pre><p>What do we do? We'll take the value from one key and applied to the function with that same key.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>const</span><span> Obj</span><span style=color:#e6c384> =</span><span style=color:#9cabca> {</span></span>
<span class=giallo-l><span style=color:#7e9cd8>  ap</span><span style=color:#9cabca>(</span><span>Fn</span><span style=color:#9cabca>,</span><span> Data</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8>    const</span><span> result</span><span style=color:#e6c384> =</span><span style=color:#9cabca> {};</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>    for</span><span style=color:#9cabca>(</span><span style=color:#957fb8>let</span><span> key</span><span style=color:#e6c384> in</span><span> Data</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span>      result</span><span style=color:#9cabca>[</span><span>key</span><span style=color:#9cabca>]</span><span style=color:#e6c384> =</span><span> Fn</span><span style=color:#9cabca>[</span><span>key</span><span style=color:#9cabca>](</span><span>Data</span><span style=color:#9cabca>[</span><span>key</span><span style=color:#9cabca>]);</span></span>
<span class=giallo-l><span style=color:#9cabca>    }</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>    return</span><span> result</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>  }</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>And now we test.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>const</span><span> Value</span><span style=color:#e6c384> =</span><span style=color:#9cabca> {</span><span>email</span><span style=color:#9cabca>:</span><span style=color:#98bb6c> 'this@example.com'</span><span style=color:#9cabca>};</span></span>
<span class=giallo-l><span style=color:#957fb8>const</span><span> Fn</span><span style=color:#e6c384> =</span><span style=color:#9cabca> {</span><span style=color:#7e9cd8>email</span><span style=color:#9cabca>: (</span><span>input</span><span style=color:#9cabca>)</span><span style=color:#957fb8> =></span><span> input</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>includes</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>'@'</span><span style=color:#9cabca>)};</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>Obj</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>ap</span><span style=color:#9cabca>(</span><span>Fn</span><span style=color:#9cabca>,</span><span> Value</span><span style=color:#9cabca>);</span><span style=color:#727169> // => {email: true}</span></span></code></pre><h2 id=let-s-compose>Let's compose</h2><p>We are making some good progress. We can apply one validation, but do you think that's enough? Probably not. There is a good chance we need to tell the user what they did wrong. Also, it would be a nice if we could apply more than one validation.<p>I want a list of pairs. Each pair will have a function and a message. Something like this.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#9cabca>[</span></span>
<span class=giallo-l><span style=color:#9cabca>  [</span><span>long_enough</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> 'Come on, try again.'</span><span style=color:#9cabca>],</span></span>
<span class=giallo-l><span style=color:#9cabca>  [</span><span>is_email</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> 'Totally not an email.'</span><span style=color:#9cabca>]</span></span>
<span class=giallo-l><span style=color:#9cabca>]</span></span></code></pre><p>If the function returns <code>false</code> then message will be added to an array. Simple, right? Let's just turn that idea into a function.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> validate</span><span style=color:#9cabca>(</span><span>validations</span><span style=color:#9cabca>,</span><span> input</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span> error</span><span style=color:#e6c384> =</span><span style=color:#9cabca> [];</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  for</span><span style=color:#9cabca>(</span><span style=color:#957fb8>let</span><span style=color:#9cabca> [</span><span>validation</span><span style=color:#9cabca>,</span><span> msg</span><span style=color:#9cabca>]</span><span style=color:#e6c384> of</span><span> validations</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8>    const</span><span> is_valid</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> validation</span><span style=color:#9cabca>(</span><span>input</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>    if</span><span style=color:#9cabca>(</span><span style=color:#e6c384>!</span><span>is_valid</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span>      error</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>push</span><span style=color:#9cabca>(</span><span>msg</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>    }</span></span>
<span class=giallo-l><span style=color:#9cabca>  }</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span> error</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>Notice the <code>input</code> is the last parameter, that's because I want partially apply the function. Basically, I want to "bind" the <code>validations</code> parameter to a value without executing the function. For this I'll just use <code>Function.bind</code>.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span>validate</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>bind</span><span style=color:#9cabca>(</span><span style=color:#ffa066>null</span><span style=color:#9cabca>, [</span></span>
<span class=giallo-l><span style=color:#9cabca>  [</span><span>long_enough</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> 'Come on, try again.'</span><span style=color:#9cabca>],</span></span>
<span class=giallo-l><span style=color:#9cabca>  [</span><span>is_email</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> 'Totally not an email.'</span><span style=color:#9cabca>]</span></span>
<span class=giallo-l><span style=color:#9cabca>]);</span></span></code></pre><p>There are other ways to achieve this effect but I like <code>.bind</code>.<p>Anyway, now let's create the validation that we want to use.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> long_enough</span><span style=color:#9cabca>(</span><span>input</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span> input</span><span style=color:#9cabca>.</span><span>length</span><span style=color:#e6c384> >=</span><span style=color:#d27e99> 2</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> is_email</span><span style=color:#9cabca>(</span><span>input</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span> input</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>includes</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>"@"</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> no_numbers</span><span style=color:#9cabca>(</span><span>input</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span style=color:#e6c384> !</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>/</span><span style=color:#c0a36e>\d</span><span style=color:#98bb6c>/</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>test</span><span style=color:#9cabca>(</span><span>input</span><span style=color:#9cabca>));</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>Now we can put everything together to make a test.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>const</span><span> input</span><span style=color:#e6c384> =</span><span style=color:#9cabca> {</span></span>
<span class=giallo-l><span>  name</span><span style=color:#9cabca>:</span><span style=color:#98bb6c> '1'</span><span style=color:#9cabca>,</span></span>
<span class=giallo-l><span>  email</span><span style=color:#9cabca>:</span><span style=color:#98bb6c> 'a'</span></span>
<span class=giallo-l><span style=color:#9cabca>};</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>const</span><span> validations</span><span style=color:#e6c384> =</span><span style=color:#9cabca> {</span></span>
<span class=giallo-l><span>  name</span><span style=color:#9cabca>:</span><span> validate</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>bind</span><span style=color:#9cabca>(</span><span style=color:#ffa066>null</span><span style=color:#9cabca>, [</span></span>
<span class=giallo-l><span style=color:#9cabca>    [</span><span>long_enough</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> 'Come on, try again.'</span><span style=color:#9cabca>],</span></span>
<span class=giallo-l><span style=color:#9cabca>    [</span><span>no_numbers</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> "Don't get smart. No numbers."</span><span style=color:#9cabca>]</span></span>
<span class=giallo-l><span style=color:#9cabca>  ]),</span></span>
<span class=giallo-l><span>  email</span><span style=color:#9cabca>:</span><span> validate</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>bind</span><span style=color:#9cabca>(</span><span style=color:#ffa066>null</span><span style=color:#9cabca>, [</span></span>
<span class=giallo-l><span style=color:#9cabca>    [</span><span>long_enough</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> 'Am I a joke to you?'</span><span style=color:#9cabca>],</span></span>
<span class=giallo-l><span style=color:#9cabca>    [</span><span>is_email</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> 'Totally not an email.'</span><span style=color:#9cabca>]</span></span>
<span class=giallo-l><span style=color:#9cabca>  ])</span></span>
<span class=giallo-l><span style=color:#9cabca>};</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>Obj</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>ap</span><span style=color:#9cabca>(</span><span>validations</span><span style=color:#9cabca>,</span><span> input</span><span style=color:#9cabca>);</span></span></code></pre><p><code>Obj.ap</code> should return this.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#9cabca>{</span></span>
<span class=giallo-l><span style=color:#7aa89f>  name</span><span style=color:#9cabca>: [</span></span>
<span class=giallo-l><span style=color:#98bb6c>    "Come on, try again."</span><span style=color:#9cabca>,</span></span>
<span class=giallo-l><span style=color:#98bb6c>    "Don't get smart. No numbers."</span></span>
<span class=giallo-l><span style=color:#9cabca>  ],</span></span>
<span class=giallo-l><span style=color:#7aa89f>  email</span><span style=color:#9cabca>: [</span></span>
<span class=giallo-l><span style=color:#98bb6c>    "Am I a joke to you?"</span><span style=color:#9cabca>,</span></span>
<span class=giallo-l><span style=color:#98bb6c>    "Totally not an email."</span></span>
<span class=giallo-l><span style=color:#9cabca>  ]</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>If we want to check if the form is actually valid we would have to check if any of the keys has an error message.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> is_valid</span><span style=color:#9cabca>(</span><span>form_errors</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span style=color:#7e9cd8> is_empty</span><span style=color:#e6c384> =</span><span> msg</span><span style=color:#957fb8> =></span><span style=color:#e6c384> !</span><span>msg</span><span style=color:#9cabca>.</span><span>length</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span> Object</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>values</span><span style=color:#9cabca>(</span><span>form_errors</span><span style=color:#9cabca>).</span><span style=color:#7e9cd8>every</span><span style=color:#9cabca>(</span><span>is_empty</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#7e9cd8>is_valid</span><span style=color:#9cabca>(</span><span>Obj</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>ap</span><span style=color:#9cabca>(</span><span>validations</span><span style=color:#9cabca>,</span><span> input</span><span style=color:#9cabca>));</span></span></code></pre><p>After this all we need to do is show the error messages (if there are any) to the user. This part of the process will be very different depending on the thing you're building. I can't really show you an example that is generic and good enough for everyone. What I can do is make this imaginary scenerio a little bit more specific.<h2 id=a-register-form>A register form</h2><p>Let's assume each field in our form looks like this in our html.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=html><span class=giallo-l><span style=color:#9cabca>&lt;</span><span style=color:#e6c384>div</span><span style=color:#957fb8> class</span><span style=color:#9cabca>=</span><span style=color:#98bb6c>"field"</span><span style=color:#9cabca>></span></span>
<span class=giallo-l><span style=color:#9cabca>  &lt;</span><span style=color:#e6c384>label</span><span style=color:#957fb8> class</span><span style=color:#9cabca>=</span><span style=color:#98bb6c>"label"</span><span style=color:#9cabca>></span><span>Name of field:</span><span style=color:#9cabca>&lt;/</span><span style=color:#e6c384>label</span><span style=color:#9cabca>></span></span>
<span class=giallo-l><span style=color:#9cabca>  &lt;</span><span style=color:#e6c384>div</span><span style=color:#957fb8> class</span><span style=color:#9cabca>=</span><span style=color:#98bb6c>"control"</span><span style=color:#9cabca>></span></span>
<span class=giallo-l><span style=color:#9cabca>    &lt;</span><span style=color:#e6c384>input</span><span style=color:#957fb8> name</span><span style=color:#9cabca>=</span><span style=color:#98bb6c>"field-name"</span><span style=color:#957fb8> class</span><span style=color:#9cabca>=</span><span style=color:#98bb6c>"input"</span><span style=color:#957fb8> type</span><span style=color:#9cabca>=</span><span style=color:#98bb6c>"text"</span><span style=color:#9cabca>></span></span>
<span class=giallo-l><span style=color:#9cabca>  &lt;/</span><span style=color:#e6c384>div</span><span style=color:#9cabca>></span></span>
<span class=giallo-l><span style=color:#9cabca>  &lt;</span><span style=color:#e6c384>ul</span><span style=color:#957fb8> data-errors</span><span style=color:#9cabca>=</span><span style=color:#98bb6c>"field-name"</span><span style=color:#9cabca>>&lt;/</span><span style=color:#e6c384>ul</span><span style=color:#9cabca>></span></span>
<span class=giallo-l><span style=color:#9cabca>&lt;/</span><span style=color:#e6c384>div</span><span style=color:#9cabca>></span></span></code></pre><p>When the input fails the validation we want to show the list of messages in the <code>ul</code> element.<p>Let's start with something basic, add a listener to the <code>submit</code> event in the form.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> submit</span><span style=color:#9cabca>(</span><span>event</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span>  event</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>preventDefault</span><span style=color:#9cabca>();</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span>
<span class=giallo-l></span>
<span class=giallo-l></span>
<span class=giallo-l><span>document</span><span style=color:#9cabca>.</span><span>forms</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>namedItem</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>"myform"</span><span style=color:#9cabca>)</span></span>
<span class=giallo-l><span style=color:#9cabca>  .</span><span style=color:#7e9cd8>addEventListener</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>"submit"</span><span style=color:#9cabca>,</span><span> submit</span><span style=color:#9cabca>);</span></span></code></pre><p>Now we gather the data from the user. This time around we need more than just the input, we'll also need the name of the field. So our objects are going to be a bit more complex.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> collect_data</span><span style=color:#9cabca>(</span><span>form</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span> result</span><span style=color:#e6c384> =</span><span style=color:#9cabca> {};</span></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span> formdata</span><span style=color:#e6c384> = new</span><span style=color:#7e9cd8> FormData</span><span style=color:#9cabca>(</span><span>form</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  for</span><span style=color:#9cabca> (</span><span style=color:#957fb8>let</span><span> entry</span><span style=color:#e6c384> of</span><span> formdata</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>entries</span><span style=color:#9cabca>()) {</span></span>
<span class=giallo-l><span>    result</span><span style=color:#9cabca>[</span><span>entry</span><span style=color:#9cabca>[</span><span style=color:#d27e99>0</span><span style=color:#9cabca>]]</span><span style=color:#e6c384> =</span><span style=color:#9cabca> {</span></span>
<span class=giallo-l><span>      field</span><span style=color:#9cabca>:</span><span> entry</span><span style=color:#9cabca>[</span><span style=color:#d27e99>0</span><span style=color:#9cabca>],</span></span>
<span class=giallo-l><span>      value</span><span style=color:#9cabca>:</span><span> entry</span><span style=color:#9cabca>[</span><span style=color:#d27e99>1</span><span style=color:#9cabca>],</span></span>
<span class=giallo-l><span style=color:#9cabca>    };</span></span>
<span class=giallo-l><span style=color:#9cabca>  }</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span> result</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>We add it to the <code>submit</code> function.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> submit</span><span style=color:#9cabca>(</span><span>event</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span>  event</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>preventDefault</span><span style=color:#9cabca>();</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span> input</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> collect_data</span><span style=color:#9cabca>(</span><span style=color:#ff5d62>this</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span>  console</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>log</span><span style=color:#9cabca>(</span><span>input</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>At this point we need to apply the validations but the current version of <code>validate</code> will not be enough. Now we need to handle an object instead of a plain string.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=diff><span class=giallo-l><span style=color:#9cabca>-</span><span style=color:#c34043> function validate(validations, input) {</span></span>
<span class=giallo-l><span style=color:#9cabca>-</span><span style=color:#c34043>   const error = [];</span></span>
<span class=giallo-l><span style=color:#9cabca>+</span><span style=color:#76946a> function validate(validations, field) {</span></span>
<span class=giallo-l><span style=color:#9cabca>+</span><span style=color:#76946a>   const result = {...field};</span></span>
<span class=giallo-l><span style=color:#9cabca>+</span><span style=color:#76946a>   result.errors = [];</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>    for(let [validation, msg] of validations) {</span></span>
<span class=giallo-l><span style=color:#9cabca>-</span><span style=color:#c34043>     const is_valid = validation(input);</span></span>
<span class=giallo-l><span style=color:#9cabca>+</span><span style=color:#76946a>     result.is_valid = validation(field.value);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#9cabca>-</span><span style=color:#c34043>     if(!is_valid) {</span></span>
<span class=giallo-l><span style=color:#9cabca>-</span><span style=color:#c34043>       error.push(msg);</span></span>
<span class=giallo-l><span style=color:#9cabca>+</span><span style=color:#76946a>     if(!result.is_valid) {</span></span>
<span class=giallo-l><span style=color:#9cabca>+</span><span style=color:#76946a>       result.errors.push(msg);</span></span>
<span class=giallo-l><span>      }</span></span>
<span class=giallo-l><span>    }</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#9cabca>-</span><span style=color:#c34043>   return error;</span></span>
<span class=giallo-l><span style=color:#9cabca>+</span><span style=color:#76946a>   return result;</span></span>
<span class=giallo-l><span>  }</span></span></code></pre><p>So now we pass <code>field.value</code> to the validation. And also instead of returning an array, we return an object with this shape.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#9cabca>{</span></span>
<span class=giallo-l><span style=color:#7aa89f>  field</span><span style=color:#9cabca>:</span><span> String</span><span style=color:#9cabca>,</span></span>
<span class=giallo-l><span style=color:#7aa89f>  value</span><span style=color:#9cabca>:</span><span> String</span><span style=color:#9cabca>,</span></span>
<span class=giallo-l><span style=color:#7aa89f>  is_valid</span><span style=color:#9cabca>:</span><span> Boolean</span><span style=color:#9cabca>,</span></span>
<span class=giallo-l><span style=color:#7aa89f>  errors</span><span style=color:#9cabca>:</span><span> Array</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>We do this because we'll need all this extra data after the validation process.<p>Just like before, let's pretend we're just validating a name and an email. We'll use the same functions as before with our new <code>validate</code>.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> submit</span><span style=color:#9cabca>(</span><span>event</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span>  event</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>preventDefault</span><span style=color:#9cabca>();</span></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span> input</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> collect_data</span><span style=color:#9cabca>(</span><span style=color:#ff5d62>this</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span> validations</span><span style=color:#e6c384> =</span><span style=color:#9cabca> {</span></span>
<span class=giallo-l><span>    name</span><span style=color:#9cabca>:</span><span> validate</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>bind</span><span style=color:#9cabca>(</span><span style=color:#ffa066>null</span><span style=color:#9cabca>, [</span></span>
<span class=giallo-l><span style=color:#9cabca>      [</span><span>long_enough</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> 'Come on, try again.'</span><span style=color:#9cabca>],</span></span>
<span class=giallo-l><span style=color:#9cabca>      [</span><span>no_numbers</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> "Don't get smart. No numbers."</span><span style=color:#9cabca>]</span></span>
<span class=giallo-l><span style=color:#9cabca>    ]),</span></span>
<span class=giallo-l><span>    email</span><span style=color:#9cabca>:</span><span> validate</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>bind</span><span style=color:#9cabca>(</span><span style=color:#ffa066>null</span><span style=color:#9cabca>, [</span></span>
<span class=giallo-l><span style=color:#9cabca>      [</span><span>long_enough</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> 'Am I a joke to you?'</span><span style=color:#9cabca>],</span></span>
<span class=giallo-l><span style=color:#9cabca>      [</span><span>is_email</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> 'Totally not an email.'</span><span style=color:#9cabca>]</span></span>
<span class=giallo-l><span style=color:#9cabca>    ])</span></span>
<span class=giallo-l><span style=color:#9cabca>  };</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span> formdata</span><span style=color:#e6c384> =</span><span> Obj</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>ap</span><span style=color:#9cabca>(</span><span>validations</span><span style=color:#9cabca>,</span><span> input</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span>  console</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>log</span><span style=color:#9cabca>(</span><span>formdata</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>But you know what? I want to do something funny. I want to take <code>validations</code> out of there. I'll be turning that into a function using <code>Obj.ap.bind</code>.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>const</span><span> validate_form</span><span style=color:#e6c384> =</span><span> Obj</span><span style=color:#9cabca>.</span><span>ap</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>bind</span><span style=color:#9cabca>(</span><span style=color:#ffa066>null</span><span style=color:#9cabca>, {</span></span>
<span class=giallo-l><span>  name</span><span style=color:#9cabca>:</span><span> validate</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>bind</span><span style=color:#9cabca>(</span><span style=color:#ffa066>null</span><span style=color:#9cabca>, [</span></span>
<span class=giallo-l><span style=color:#9cabca>    [</span><span>long_enough</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> 'Come on, try again.'</span><span style=color:#9cabca>],</span></span>
<span class=giallo-l><span style=color:#9cabca>    [</span><span>no_numbers</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> "Don't get smart. No numbers."</span><span style=color:#9cabca>]</span></span>
<span class=giallo-l><span style=color:#9cabca>  ]),</span></span>
<span class=giallo-l><span>  email</span><span style=color:#9cabca>:</span><span> validate</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>bind</span><span style=color:#9cabca>(</span><span style=color:#ffa066>null</span><span style=color:#9cabca>, [</span></span>
<span class=giallo-l><span style=color:#9cabca>    [</span><span>long_enough</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> 'Am I a joke to you?'</span><span style=color:#9cabca>],</span></span>
<span class=giallo-l><span style=color:#9cabca>    [</span><span>is_email</span><span style=color:#9cabca>,</span><span style=color:#98bb6c> 'Totally not an email.'</span><span style=color:#9cabca>]</span></span>
<span class=giallo-l><span style=color:#9cabca>  ])</span></span>
<span class=giallo-l><span style=color:#9cabca>});</span></span></code></pre><p>With this our function <code>submit</code> can be a little bit more declarative.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> submit</span><span style=color:#9cabca>(</span><span>event</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span>  event</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>preventDefault</span><span style=color:#9cabca>();</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span> input</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> collect_data</span><span style=color:#9cabca>(</span><span style=color:#ff5d62>this</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span> formdata</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> validate_form</span><span style=color:#9cabca>(</span><span>input</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>  console</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>log</span><span style=color:#9cabca>(</span><span>formdata</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>With validations out of the way, we need to check if the form is actually valid. To do this we will check if <code>.is_valid</code> is <code>true</code> in every field. If the form is valid we want to send the data somewhere, else we would show the error messages.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> is_valid</span><span style=color:#9cabca>(</span><span>formdata</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  return</span><span> Object</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>values</span><span style=color:#9cabca>(</span><span>formdata</span><span style=color:#9cabca>).</span><span style=color:#7e9cd8>every</span><span style=color:#9cabca>((</span><span>field</span><span style=color:#9cabca>)</span><span style=color:#957fb8> =></span><span> field</span><span style=color:#9cabca>.</span><span style=color:#e6c384>is_valid</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> submit</span><span style=color:#9cabca>(</span><span>event</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span>  event</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>preventDefault</span><span style=color:#9cabca>();</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span> input</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> collect_data</span><span style=color:#9cabca>(</span><span style=color:#ff5d62>this</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span> formdata</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> validate_form</span><span style=color:#9cabca>(</span><span>input</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  if</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>is_valid</span><span style=color:#9cabca>(</span><span>formdata</span><span style=color:#9cabca>)) {</span></span>
<span class=giallo-l><span style=color:#7e9cd8>    send_data</span><span style=color:#9cabca>(</span><span>input</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>  }</span><span style=color:#957fb8;font-weight:700> else</span><span style=color:#9cabca> {</span></span>
<span class=giallo-l><span style=color:#727169>    // show errors</span></span>
<span class=giallo-l><span style=color:#9cabca>  }</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>In this last step we'll show each error message in an <code>li</code> element inside the <code>ul</code> of each field.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> show_errors</span><span style=color:#9cabca>(</span><span>input</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span> el</span><span style=color:#e6c384> =</span><span> document</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>querySelector</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>`[data-errors=</span><span style=color:#9cabca>${</span><span>input</span><span style=color:#9cabca>.</span><span style=color:#e6c384>field</span><span style=color:#9cabca>}</span><span style=color:#98bb6c>]`</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span>  el</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>replaceChildren</span><span style=color:#9cabca>();</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  for</span><span style=color:#9cabca> (</span><span style=color:#957fb8>let</span><span> msg</span><span style=color:#e6c384> of</span><span> input</span><span style=color:#9cabca>.</span><span style=color:#e6c384>errors</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span style=color:#957fb8>    const</span><span> li</span><span style=color:#e6c384> =</span><span> document</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>createElement</span><span style=color:#9cabca>(</span><span style=color:#98bb6c>'li'</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span>    li</span><span style=color:#9cabca>.</span><span style=color:#e6c384>textContent =</span><span> msg</span><span style=color:#9cabca>;</span></span>
<span class=giallo-l><span>    el</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>appendChild</span><span style=color:#9cabca>(</span><span>li</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>  }</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>But wait... one last thing. We can't have an applicative without a <code>map</code> function. Let's fix that.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=diff><span class=giallo-l><span>  const Obj = {</span></span>
<span class=giallo-l><span style=color:#9cabca>+</span><span style=color:#76946a>   map(fn, data) {</span></span>
<span class=giallo-l><span style=color:#9cabca>+</span><span style=color:#76946a>     const result = {};</span></span>
<span class=giallo-l><span style=color:#9cabca>+</span><span style=color:#76946a>     for (let key in data) {</span></span>
<span class=giallo-l><span style=color:#9cabca>+</span><span style=color:#76946a>       result[key] = fn(data[key]);</span></span>
<span class=giallo-l><span style=color:#9cabca>+</span><span style=color:#76946a>     }</span></span>
<span class=giallo-l><span style=color:#9cabca>+</span></span>
<span class=giallo-l><span style=color:#9cabca>+</span><span style=color:#76946a>     return result;</span></span>
<span class=giallo-l><span style=color:#9cabca>+</span><span style=color:#76946a>   },</span></span>
<span class=giallo-l><span>    ap(Fn, Data) {</span></span>
<span class=giallo-l><span>      const result = {};</span></span>
<span class=giallo-l><span>      for (let key in Data) {</span></span>
<span class=giallo-l><span>        result[key] = Fn[key](Data[key]);</span></span>
<span class=giallo-l><span>      }</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>      return result;</span></span>
<span class=giallo-l><span>    }</span></span>
<span class=giallo-l><span>  };</span></span></code></pre><p>Now I feel better. We'll use this new function to show the messages.<pre class=giallo style=color:#dcd7ba;background-color:#1f1f28><code data-lang=javascript><span class=giallo-l><span style=color:#957fb8>function</span><span style=color:#7e9cd8> submit</span><span style=color:#9cabca>(</span><span>event</span><span style=color:#9cabca>) {</span></span>
<span class=giallo-l><span>  event</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>preventDefault</span><span style=color:#9cabca>();</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span> input</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> collect_data</span><span style=color:#9cabca>(</span><span style=color:#ff5d62>this</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#957fb8>  const</span><span> formdata</span><span style=color:#e6c384> =</span><span style=color:#7e9cd8> validate_form</span><span style=color:#9cabca>(</span><span>input</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#957fb8;font-weight:700>  if</span><span style=color:#9cabca>(</span><span style=color:#7e9cd8>is_valid</span><span style=color:#9cabca>(</span><span>formdata</span><span style=color:#9cabca>)) {</span></span>
<span class=giallo-l><span style=color:#7e9cd8>    send_data</span><span style=color:#9cabca>(</span><span>input</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>  }</span><span style=color:#957fb8;font-weight:700> else</span><span style=color:#9cabca> {</span></span>
<span class=giallo-l><span>    Obj</span><span style=color:#9cabca>.</span><span style=color:#7e9cd8>map</span><span style=color:#9cabca>(</span><span>show_errors</span><span style=color:#9cabca>,</span><span> formdata</span><span style=color:#9cabca>);</span></span>
<span class=giallo-l><span style=color:#9cabca>  }</span></span>
<span class=giallo-l><span style=color:#9cabca>}</span></span></code></pre><p>Yes, I know, I should be using a regular <code>for</code> loop because "side effects". We are done, let's not fight over details here.<p>To prove this stuff works I have this wonderful codepen example with a semi-functional form.<p data-pen-title="Applicative functors and form validation" style="box-sizing:border-box;border:2px solid;justify-content:center;align-items:center;height:600px;margin:1em 0;padding:1em;display:flex" class=codepen data-default-tab=js,result data-height=600 data-preview=true data-slug-hash=PojjGpM data-theme-id=dark data-user=VonHeikemen><span> See the Pen <a href=https://codepen.io/VonHeikemen/pen/PojjGpM>Applicative functors and form validation</a> by Heiker (<a href=https://codepen.io/VonHeikemen>@VonHeikemen</a>) on <a href=https://codepen.io>CodePen</a>. </span></p><script async src=https://static.codepen.io/assets/embed/ei.js></script><h2 id=conclusion>Conclusion</h2><p>We took a brief look at the <code>.ap</code> method we find in applicative functors. We learned that in javascript there is no such thing so we have to implement it ourselves. Finally we used our new found knowledge to validate a simple input.<hr><p>If you have a question you can reach out to me on social media:<ul><li>Twitter <a rel="noopener me" href=https://twitter.com/VonHeikemen_ target=_blank> @VonHeikemen_ </a><li>Bluesky <a rel="noopener me" href=https://bsky.app/profile/vonheikemen.bsky.social target=_blank> @vonheikemen.bsky.social </a><li>Mastodon <a rel="noopener me" href=https://hachyderm.io/@vonheikemen target=_blank> @vonheikemen@hachyderm.io </a></ul><p>Thank you for reading. If you find this article useful and want to support my efforts, buy me a coffee ☕</p><a href=https://ko-fi.com/vonheikemen style=justify-content:center;display:flex target=_blank> <img alt="Buy Me A Coffee" src="https://storage.ko-fi.com/cdn/kofi2.png?v=3" style=width:217px!important;height:60px!important> </a></div></div>