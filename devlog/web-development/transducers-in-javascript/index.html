<!doctype html><html lang=en><head><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="text/html; charset=utf-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1.0,maximum-scale=1,viewport-fit=cover" name=viewport><meta content="interest-cohort=()" http-equiv=Permissions-Policy><title>
  Transducers in javascript | Devlog
</title><link href=https://vonheikemen.github.io/devlog/print.css media=print rel=stylesheet><link href=https://vonheikemen.github.io/devlog/styles.css rel=stylesheet><link href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface" rel=stylesheet><link href=https://vonheikemen.github.io/devlog/atom.xml rel=alternate title=RSS type=application/atom+xml><link href=https://hachyderm.io/@vonheikemen rel=me><link href=https://twitter.com/VonHeikemen_ rel=me><meta content="javascript, functional-programming, software, coding, development" name=keywords><meta content="Digging a little bit into the world of transducers (in javascript)" name=description><body class=theme-base-custom><div class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><a href=https://vonheikemen.github.io/devlog/><h1>Devlog</h1></a></div><ul class=sidebar-nav><li class=sidebar-nav-item><a href=/>whoami</a><li class=sidebar-nav-item><a href=https://vonheikemen.github.io/devlog/tags/>Explore tags</a><li class=sidebar-nav-item><a href=https://vonheikemen.github.io/devlog/es/>Devlog en español</a><li class=sidebar-nav-item><a href=https://vonheikemen.github.io/devlog/atom.xml>RSS</a></ul> © 2020-2024 Heiker Curiel</div></div><div class="content container"><div class=post><h1 class=post-title>Transducers in javascript</h1><span class=post-date>2020-12-27 | 15 min read | <a href=https://vonheikemen.github.io/devlog/es/web-development/transducers-in-javascript/> Leer en español </a> </span><p>What if I told you we can extract the essence of list operations like <code>map</code> and <code>filter</code> and apply them in other kinds of collections beyond arrays? What if I told you that I can implement <code>filter</code> only once and apply that exact same function in multiple types of collections? That is the idea behind transducers. Today we are going to learn what are they, how they work and how can we use them.<h2 id=requirements>Requirements</h2><p>Before we begin there are a couple of things you need to know:<ul><li><a href=https://vonheikemen.github.io/devlog/web-development/learn-fp/reduce-how-and-when/>How Array.reduce works</a><li><a href=https://vonheikemen.github.io/devlog/web-development/the-case-for-reducers/>What is a reducer</a></ul><p>It would also help a lot if you are familiar with these concepts:<ul><li>First class functions<li>Higher order functions<li>Closures</ul><p>If you don't know what any of that means, don't worry too much. Just know that in javascript we can treat functions like any other type of data.<p>Let us begin.<h2 id=what-are-transducers>What are transducers?</h2><p>The word transducer has a long history. If you look for the definition you're going to find something like this:<blockquote><p>A transducer is a device that converts energy from one form to another. Usually a transducer converts a signal in one form of energy to a signal in another. -- <a href=https://en.wikipedia.org/wiki/Transducer rel=noopener target=_blank>Wikipedia</a></blockquote><p>We're definitively not talking about devices in this post. But it does come close to what we actually want. You see, transducer (in our context) will help us process data from a collection and can also potentially transform the entire collection from one data type to another.<p>This next definition gets closer to what we want to achieve:<blockquote><p>Composable algorithmic transformations</blockquote><p>I know, it doesn't seem like it helps. So, the idea here is that we can compose operations in a declarative and efficient way, that can also be used in multiple types of data. That's it. Of course it's easier said than done.<p>How do we do all that?<p>Good question. This is going to be a trip, better start with baby steps. First, let's ask ourselves...<h2 id=why>Why?</h2><p>I'll answer that with an example. Imagine a common scenario. Say that we have an array and we want to filter it. What do we do? Use <code>.filter</code>.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>const </span><span style=color:#69c>is_even </span><span style=color:#5fb3b3>= </span><span style=color:#f99157>number </span><span style=color:#c594c5>=> </span><span>number </span><span style=color:#5fb3b3>% </span><span style=color:#f99157>2 </span><span style=color:#5fb3b3>=== </span><span style=color:#f99157>0</span><span style=color:#5fb3b3>;
</span><span style=color:#c594c5>const </span><span>data </span><span style=color:#5fb3b3>= </span><span>[</span><span style=color:#f99157>1</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>2</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>3</span><span>]</span><span style=color:#5fb3b3>;
</span><span>
</span><span>data</span><span style=color:#5fb3b3>.</span><span style=color:#69c>filter</span><span>(is_even)</span><span style=color:#5fb3b3>;
</span><span style=color:#5f6364>// Array [ 2 ]
</span></code></pre><p>All looks good. Now we get a new requirement, we need to transform the values that pass the test. No problem, we can use <code>.map</code> for that.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>const </span><span style=color:#69c>is_even </span><span style=color:#5fb3b3>= </span><span style=color:#f99157>number </span><span style=color:#c594c5>=> </span><span>number </span><span style=color:#5fb3b3>% </span><span style=color:#f99157>2 </span><span style=color:#5fb3b3>=== </span><span style=color:#f99157>0</span><span style=color:#5fb3b3>;
</span><span style=color:#c594c5>const </span><span style=color:#69c>add_message </span><span style=color:#5fb3b3>= </span><span style=color:#f99157>number </span><span style=color:#c594c5>=> </span><span style=color:#5fb3b3>`</span><span style=color:#99c794>The number is: </span><span style=color:#5fb3b3>${</span><span>number</span><span style=color:#5fb3b3>}`;
</span><span>
</span><span style=color:#c594c5>const </span><span>data </span><span style=color:#5fb3b3>= </span><span>[</span><span style=color:#f99157>1</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>2</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>3</span><span>]</span><span style=color:#5fb3b3>;
</span><span>
</span><span>data</span><span style=color:#5fb3b3>.</span><span style=color:#69c>filter</span><span>(is_even)</span><span style=color:#5fb3b3>.</span><span style=color:#69c>map</span><span>(add_message)</span><span style=color:#5fb3b3>;
</span><span style=color:#5f6364>// Array [ "The number is: 2" ]
</span></code></pre><p>Great. Everything is fine... until one day, because of reasons, we are forced to change <code>data</code> and make it a <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set rel=noopener target=_blank>Set</a>. After we make the change we see this.<pre style=color:#cccece;background-color:#2b2c2f><code><span>Uncaught TypeError: data.filter is not a function
</span></code></pre><p>How can we solve this? One way would be using a <code>for..of</code> loop.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>const </span><span style=color:#69c>is_even </span><span style=color:#5fb3b3>= </span><span style=color:#f99157>number </span><span style=color:#c594c5>=> </span><span>number </span><span style=color:#5fb3b3>% </span><span style=color:#f99157>2 </span><span style=color:#5fb3b3>=== </span><span style=color:#f99157>0</span><span style=color:#5fb3b3>;
</span><span style=color:#c594c5>const </span><span style=color:#69c>add_message </span><span style=color:#5fb3b3>= </span><span style=color:#f99157>number </span><span style=color:#c594c5>=> </span><span style=color:#5fb3b3>`</span><span style=color:#99c794>The number is: </span><span style=color:#5fb3b3>${</span><span>number</span><span style=color:#5fb3b3>}`;
</span><span>
</span><span style=color:#c594c5>const </span><span>data </span><span style=color:#5fb3b3>= new </span><span>Set([</span><span style=color:#f99157>1</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>2</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>3</span><span>])</span><span style=color:#5fb3b3>;
</span><span style=color:#c594c5>const </span><span>filtered </span><span style=color:#5fb3b3>= new </span><span>Set()</span><span style=color:#5fb3b3>;
</span><span>
</span><span style=color:#c594c5>for</span><span>(</span><span style=color:#c594c5>let </span><span>number </span><span style=color:#5fb3b3>of </span><span>data) </span><span style=color:#5fb3b3>{
</span><span>  </span><span style=color:#c594c5>if</span><span>(</span><span style=color:#69c>is_even</span><span>(number)) </span><span style=color:#5fb3b3>{
</span><span>    filtered</span><span style=color:#5fb3b3>.</span><span style=color:#69c>add</span><span>(</span><span style=color:#69c>add_message</span><span>(number))</span><span style=color:#5fb3b3>;
</span><span>  </span><span style=color:#5fb3b3>}
</span><span style=color:#5fb3b3>}
</span><span>
</span><span>filtered</span><span style=color:#5fb3b3>;
</span><span style=color:#5f6364>// Set [ "The number is: 2" ]
</span></code></pre><p>The good news is this would work on any data type that implements the <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols rel=noopener target=_blank>iterable protocol</a>. The bad news is that in order to add another "operation" we need to change the code inside the <code>for</code> loop.<p>Wait... what's wrong with that?<p>Bear with me for a moment. Let's compare. Say that we have our loop.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>for</span><span>(</span><span style=color:#c594c5>let </span><span>number </span><span style=color:#5fb3b3>of </span><span>data) </span><span style=color:#5fb3b3>{
</span><span>
</span><span style=color:#5fb3b3>}
</span></code></pre><p>What do we do when we want to filter? Add code inside the block.<pre class=language-diff data-lang=diff style=color:#cccece;background-color:#2b2c2f><code class=language-diff data-lang=diff><span>  for(let number of data) {
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>   if(is_even(number)) {
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>     filtered.add(number);
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>   }
</span><span>  }
</span></code></pre><p>What do we do when we want to transform a value? Add code inside the block.<pre class=language-diff data-lang=diff style=color:#cccece;background-color:#2b2c2f><code class=language-diff data-lang=diff><span>  for(let number of data) {
</span><span>    if(is_even(number)) {
</span><span style=color:#5fb3b3>-</span><span style=color:#ec5f67>     filtered.add(number);
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>     filtered.add(add_message(number));
</span><span>    }
</span><span>  }
</span></code></pre><p>This is going to happen every time we want to add a feature to our loop. Ever heard of the phrase "open for extension, but closed for modification."? That's exactly what I want. Right now to extend the <code>for</code> loop I need to modify it, it's not like is a terrible idea, is just that we can find a more "elegant" way to achieve our goal.<p>Now let's take a look at our first version, the one that had <code>data</code> as an array. We want to filter, what do we do? Add a function.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span>data</span><span style=color:#5fb3b3>.</span><span style=color:#69c>filter</span><span>(is_even)</span><span style=color:#5fb3b3>;
</span></code></pre><p>We want to transform things, what do we do? Add a function.<pre class=language-diff data-lang=diff style=color:#cccece;background-color:#2b2c2f><code class=language-diff data-lang=diff><span style=color:#5fb3b3>-</span><span style=color:#ec5f67> data.filter(is_even);
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794> data.filter(is_even).map(add_message);
</span></code></pre><p>See what I mean? I'm not going to claim this is better, let's just say it's more "expressive". In this case when we want to extend our process we compose functions.<p>But as we all know this is not a perfect solution. We already came across a problem: not every collection implements these methods. Another problem that may arise has to do with performance. Each method is the equivalent of a <code>for</code> loop, so it may not be the best idea to have a long chain of <code>filter</code>s and <code>map</code>s.<p>This is where transducers shine, with them we can build a chain of operations in a way that's efficient and declarative. They are not going to be as fast as a <code>for</code> loop, but it may be good way to improve performance when you have a long chain of functions and a collection with many, many items.<p>Unlike array methods transducers are not attached to a prototype, this gives us the opportunity to reuse the exact same function in multiple types of collections. We could for example implement <code>filter</code> as a transducer once and use that with arrays, <code>Set</code>s, <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function* rel=noopener target=_blank>generators</a> and other types. Sound great, right?<h2 id=how-do-they-work>How do they work?</h2><p>The magic behind transducers lies in a term I mentioned in the requirements section: <code>reducer</code>. Specifically higher order <code>reducer</code>s.<p>"Higher order reducer". Now that's a lot. Breathe, take a moment, move on when you're ready.<p>For the time being you can think of transducers as functions that take a <code>reducer</code> as an argument and return another <code>reducer</code>. It turns out that (with a little bit of magic) we can combine <code>reducer</code>s using function composition. This handy little feature is the one that will allow us to make a chain of operations like the one in our example where we had <code>filter</code> and then <code>map</code>. Now, it won't look exactly the same, our transducers would compose like this.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#69c>compose</span><span>(</span><span style=color:#69c>filter</span><span>(is_even)</span><span style=color:#5fb3b3>, </span><span style=color:#69c>map</span><span>(add_message))</span><span style=color:#5fb3b3>;
</span></code></pre><p>Before you ask, there is nothing magical in <code>compose</code>. That is a fairly generic function. The only thing it does is passing values from one function to the next. We can implement that ourselves.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>function </span><span style=color:#69c>compose</span><span style=color:#5fb3b3>(...</span><span style=color:#f99157>fns</span><span style=color:#5fb3b3>) {
</span><span>  </span><span style=color:#c594c5>const </span><span style=color:#69c>apply </span><span style=color:#5fb3b3>= (</span><span style=color:#f99157>arg</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>fn</span><span style=color:#5fb3b3>) </span><span style=color:#c594c5>=> </span><span style=color:#69c>fn</span><span>(arg)</span><span style=color:#5fb3b3>;
</span><span>  </span><span style=color:#c594c5>return </span><span style=color:#5fb3b3>(</span><span style=color:#f99157>initial</span><span style=color:#5fb3b3>) </span><span style=color:#c594c5>=> </span><span>fns</span><span style=color:#5fb3b3>.</span><span style=color:#69c>reduceRight</span><span>(apply</span><span style=color:#5fb3b3>, </span><span>initial)</span><span style=color:#5fb3b3>;
</span><span style=color:#5fb3b3>}
</span></code></pre><p>When we combine transducers using <code>compose</code> what we get in return is another transducer. But that's not the end of the story, because a transducer returns a <code>reducer</code> we need to do something with that, and what other function do you know that needs a <code>reducer</code>? Our friend <code>reduce</code>, of course. We'll be treating <code>reduce</code> like a protocol, it will give us the opportunity to process each item in the collection and also transform the collection itself.<p>Enough theory for now, let's do something. Let's make a <code>filter</code> transducer.<h3 id=making-a-transducer>Making a transducer</h3><h4 id=step-1-gather-all-the-arguments>Step 1: Gather all the arguments</h4><p>First things first, we have to create the function and gather everything we need. What do we need? A function that should return <code>true</code> or <code>false</code>, a predicate.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>function </span><span style=color:#69c>filter</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>predicate</span><span style=color:#5fb3b3>) {
</span><span>
</span><span style=color:#5fb3b3>}
</span></code></pre><p>That's a good start but is not enough. We know that at some point we need to compose this with another transducer. So we also need to receive a <code>reducer</code>, this will be the next "step" in the composition.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>function </span><span style=color:#69c>filter</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>predicate</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>next</span><span style=color:#5fb3b3>) {
</span><span>  
</span><span style=color:#5fb3b3>}
</span></code></pre><p>If it's still not clear, remember in our previous example we wanted this.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#69c>compose</span><span>(</span><span style=color:#69c>filter</span><span>(is_even)</span><span style=color:#5fb3b3>, </span><span style=color:#69c>map</span><span>(add_message))</span><span style=color:#5fb3b3>;
</span></code></pre><p>Here is what's going to happen, <code>map(add_message)</code> is going to give us a <code>reducer</code> and that is going to be the <code>next</code> parameter in <code>filter</code>.<p>Some of you might be thinking that's not going to work, I only pass <code>is_even</code> to <code>filter</code>, how are we going to get <code>next</code>? Let's deal with that later.<h4 id=step-2-return-a-reducer>Step 2: Return a reducer</h4><p>In practice a <code>reducer</code> is nothing more than a binary function. Let's return that.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>function </span><span style=color:#69c>filter</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>predicate</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>next</span><span style=color:#5fb3b3>) {
</span><span>  </span><span style=color:#c594c5>return function </span><span style=color:#69c>reducer</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>state</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>value</span><span style=color:#5fb3b3>) {
</span><span style=color:#5fb3b3>    </span><span style=color:#5f6364>// ???
</span><span>  </span><span style=color:#5fb3b3>};
</span><span style=color:#5fb3b3>}
</span></code></pre><h4 id=step-3-implement-the-rest>Step 3: Implement the rest</h4><p>Okay, so we are (almost) done with the structure of the transducer. What comes next is the logic for our operation. And what we want to do is copy the behavior of <code>Array.filter</code>.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>function </span><span style=color:#69c>filter</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>predicate</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>next</span><span style=color:#5fb3b3>) {
</span><span>  </span><span style=color:#c594c5>return function </span><span style=color:#69c>reducer</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>state</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>value</span><span style=color:#5fb3b3>) {
</span><span>    </span><span style=color:#c594c5>if</span><span>(</span><span style=color:#69c>predicate</span><span>(value)) </span><span style=color:#5fb3b3>{
</span><span>      </span><span style=color:#c594c5>return </span><span style=color:#69c>next</span><span>(state</span><span style=color:#5fb3b3>, </span><span>value)</span><span style=color:#5fb3b3>;
</span><span>    </span><span style=color:#5fb3b3>}
</span><span>
</span><span>    </span><span style=color:#c594c5>return </span><span>state</span><span style=color:#5fb3b3>;
</span><span>  </span><span style=color:#5fb3b3>};
</span><span style=color:#5fb3b3>}
</span></code></pre><p>In here we take the predicate, we evaluate it and decide if we want to move on to the next step.<h4 id=step-4-partial-application>Step 4: Partial application</h4><p>Here is where the magic comes. We know how we want to use <code>filter</code> but right now it's not going to work. <code>filter</code> needs to be smart enough to know when is going to execute our logic. When is that? When we have gathered all the arguments.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>function </span><span style=color:#69c>filter</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>predicate</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>next</span><span style=color:#5fb3b3>) {
</span><span>  </span><span style=color:#c594c5>if</span><span>(</span><span style=color:#ec5f67>arguments</span><span style=color:#5fb3b3>.</span><span>length </span><span style=color:#5fb3b3>=== </span><span style=color:#f99157>1</span><span>) </span><span style=color:#5fb3b3>{
</span><span>    </span><span style=color:#c594c5>return </span><span style=color:#5fb3b3>(</span><span style=color:#f99157>_next</span><span style=color:#5fb3b3>) </span><span style=color:#c594c5>=> </span><span style=color:#69c>filter</span><span>(predicate</span><span style=color:#5fb3b3>, </span><span>_next)</span><span style=color:#5fb3b3>;
</span><span>  </span><span style=color:#5fb3b3>}
</span><span>
</span><span>  </span><span style=color:#c594c5>return function </span><span style=color:#69c>reducer</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>state</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>value</span><span style=color:#5fb3b3>) {
</span><span>    </span><span style=color:#c594c5>if</span><span>(</span><span style=color:#69c>predicate</span><span>(value)) </span><span style=color:#5fb3b3>{
</span><span>      </span><span style=color:#c594c5>return </span><span style=color:#69c>next</span><span>(state</span><span style=color:#5fb3b3>, </span><span>value)</span><span style=color:#5fb3b3>;
</span><span>    </span><span style=color:#5fb3b3>}
</span><span>
</span><span>    </span><span style=color:#c594c5>return </span><span>state</span><span style=color:#5fb3b3>;
</span><span>  </span><span style=color:#5fb3b3>};
</span><span style=color:#5fb3b3>}
</span></code></pre><p>This is just one way to achieve partial application. It doesn't have to be this way.<h3 id=using-a-transducer>Using a transducer</h3><p>In theory we already have something useful. Now we need a <code>reduce</code> function. Fortunately the <code>Array</code> prototype has one that we can use. Let's start our test with just one transducer.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>const </span><span style=color:#69c>is_even </span><span style=color:#5fb3b3>= </span><span style=color:#f99157>number </span><span style=color:#c594c5>=> </span><span>number </span><span style=color:#5fb3b3>% </span><span style=color:#f99157>2 </span><span style=color:#5fb3b3>=== </span><span style=color:#f99157>0</span><span style=color:#5fb3b3>;
</span><span>
</span><span style=color:#c594c5>const </span><span>data </span><span style=color:#5fb3b3>= </span><span>[</span><span style=color:#f99157>1</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>2</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>3</span><span>]</span><span style=color:#5fb3b3>;
</span><span>
</span><span style=color:#c594c5>const </span><span style=color:#69c>combine </span><span style=color:#5fb3b3>= (</span><span style=color:#f99157>state</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>value</span><span style=color:#5fb3b3>) </span><span style=color:#c594c5>=> </span><span>(state</span><span style=color:#5fb3b3>.</span><span style=color:#69c>push</span><span>(value)</span><span style=color:#5fb3b3>, </span><span>state)</span><span style=color:#5fb3b3>;
</span><span>
</span><span>data</span><span style=color:#5fb3b3>.</span><span style=color:#69c>reduce</span><span>(</span><span style=color:#69c>filter</span><span>(is_even</span><span style=color:#5fb3b3>, </span><span>combine)</span><span style=color:#5fb3b3>, </span><span>[])</span><span style=color:#5fb3b3>;
</span><span style=color:#5f6364>// Array [ 2 ]
</span></code></pre><p>It actually works! Now let's expand our data set. Say that now we have negative numbers in <code>data</code>, but we don't want those. Let's create another filter. Here is where composition comes into play.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>const </span><span style=color:#69c>is_even </span><span style=color:#5fb3b3>= </span><span style=color:#f99157>number </span><span style=color:#c594c5>=> </span><span>number </span><span style=color:#5fb3b3>% </span><span style=color:#f99157>2 </span><span style=color:#5fb3b3>=== </span><span style=color:#f99157>0</span><span style=color:#5fb3b3>;
</span><span style=color:#c594c5>const </span><span style=color:#69c>is_positive </span><span style=color:#5fb3b3>= </span><span style=color:#f99157>number </span><span style=color:#c594c5>=> </span><span>number </span><span style=color:#5fb3b3>> </span><span style=color:#f99157>0</span><span style=color:#5fb3b3>;
</span><span>
</span><span style=color:#c594c5>const </span><span>data </span><span style=color:#5fb3b3>= </span><span>[</span><span style=color:#5fb3b3>-</span><span style=color:#f99157>2</span><span style=color:#5fb3b3>, -</span><span style=color:#f99157>1</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>0</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>1</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>2</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>3</span><span>]</span><span style=color:#5fb3b3>;
</span><span>
</span><span style=color:#c594c5>const </span><span style=color:#69c>combine </span><span style=color:#5fb3b3>= (</span><span style=color:#f99157>state</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>value</span><span style=color:#5fb3b3>) </span><span style=color:#c594c5>=> </span><span>(state</span><span style=color:#5fb3b3>.</span><span style=color:#69c>push</span><span>(value)</span><span style=color:#5fb3b3>, </span><span>state)</span><span style=color:#5fb3b3>;
</span><span>
</span><span style=color:#c594c5>const </span><span>transducer </span><span style=color:#5fb3b3>= </span><span style=color:#69c>compose</span><span>(</span><span style=color:#69c>filter</span><span>(is_positive)</span><span style=color:#5fb3b3>, </span><span style=color:#69c>filter</span><span>(is_even))</span><span style=color:#5fb3b3>;
</span><span>
</span><span>data</span><span style=color:#5fb3b3>.</span><span style=color:#69c>reduce</span><span>(</span><span style=color:#69c>transducer</span><span>(combine)</span><span style=color:#5fb3b3>, </span><span>[])</span><span style=color:#5fb3b3>;
</span><span style=color:#5f6364>// Array [ 2 ]
</span></code></pre><p>Nice, we got the same result. Let's do something else, how about adding another operation?<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>function </span><span style=color:#69c>map</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>transform</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>next</span><span style=color:#5fb3b3>) {
</span><span>  </span><span style=color:#c594c5>if</span><span>(</span><span style=color:#ec5f67>arguments</span><span style=color:#5fb3b3>.</span><span>length </span><span style=color:#5fb3b3>=== </span><span style=color:#f99157>1</span><span>) </span><span style=color:#5fb3b3>{
</span><span>    </span><span style=color:#c594c5>return </span><span style=color:#5fb3b3>(</span><span style=color:#f99157>_next</span><span style=color:#5fb3b3>) </span><span style=color:#c594c5>=> </span><span style=color:#69c>map</span><span>(transform</span><span style=color:#5fb3b3>, </span><span>_next)</span><span style=color:#5fb3b3>;
</span><span>  </span><span style=color:#5fb3b3>}
</span><span>
</span><span>  </span><span style=color:#c594c5>return function </span><span style=color:#69c>reducer</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>state</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>value</span><span style=color:#5fb3b3>) {
</span><span>    </span><span style=color:#c594c5>return </span><span style=color:#69c>next</span><span>(state</span><span style=color:#5fb3b3>, </span><span style=color:#69c>transform</span><span>(value))</span><span style=color:#5fb3b3>;
</span><span>  </span><span style=color:#5fb3b3>};
</span><span style=color:#5fb3b3>}
</span></code></pre><p>The behavior is the same from <code>Array.map</code>. In this case we transform the value before going to the next step. Let's put that in our example.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>const </span><span>data </span><span style=color:#5fb3b3>= </span><span>[</span><span style=color:#5fb3b3>-</span><span style=color:#f99157>2</span><span style=color:#5fb3b3>, -</span><span style=color:#f99157>1</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>0</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>1</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>2</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>3</span><span>]</span><span style=color:#5fb3b3>;
</span><span>
</span><span style=color:#c594c5>const </span><span>transducer </span><span style=color:#5fb3b3>= </span><span style=color:#69c>compose</span><span>(
</span><span>  </span><span style=color:#69c>filter</span><span>(is_positive)</span><span style=color:#5fb3b3>,
</span><span>  </span><span style=color:#69c>filter</span><span>(is_even)</span><span style=color:#5fb3b3>,
</span><span>  </span><span style=color:#69c>map</span><span>(add_message)
</span><span>)</span><span style=color:#5fb3b3>;
</span><span>
</span><span>data</span><span style=color:#5fb3b3>.</span><span style=color:#69c>reduce</span><span>(</span><span style=color:#69c>transducer</span><span>(combine)</span><span style=color:#5fb3b3>, </span><span>[])</span><span style=color:#5fb3b3>;
</span><span style=color:#5f6364>// Array [ "The number is: 2" ]
</span></code></pre><p>This is good, very good. There is one more detail we need to address, compatibility. I did mention that transducers work on different types but in here we are using <code>Array.reduce</code>. We actually need to control the <code>reduce</code> function, so let's make our own.<p>Since javascript has the iterable protocol, we can use that to save ourselves some troubles. With this our transducers will be compatible with multiple types of collections.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>function </span><span style=color:#69c>reduce</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>reducer</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>initial</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>collection</span><span style=color:#5fb3b3>) {
</span><span>  </span><span style=color:#c594c5>let </span><span>state </span><span style=color:#5fb3b3>= </span><span>initial</span><span style=color:#5fb3b3>;
</span><span>
</span><span>  </span><span style=color:#c594c5>for</span><span>(</span><span style=color:#c594c5>let </span><span>value </span><span style=color:#5fb3b3>of </span><span>collection) </span><span style=color:#5fb3b3>{
</span><span>    state </span><span style=color:#5fb3b3>= </span><span style=color:#69c>reducer</span><span>(state</span><span style=color:#5fb3b3>, </span><span>value)</span><span style=color:#5fb3b3>;
</span><span>  </span><span style=color:#5fb3b3>}
</span><span>
</span><span>  </span><span style=color:#c594c5>return </span><span>state</span><span style=color:#5fb3b3>;
</span><span style=color:#5fb3b3>}
</span></code></pre><p>To test this let's change our example, now <code>data</code> is going to be a <code>Set</code>. For this to work we need to change the <code>combine</code> function, so that it knows how to assemble a <code>Set</code>. We also need to change the initial value for <code>reduce</code>. Everything else stays the same.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>const </span><span>data </span><span style=color:#5fb3b3>= new </span><span>Set([</span><span style=color:#5fb3b3>-</span><span style=color:#f99157>2</span><span style=color:#5fb3b3>, -</span><span style=color:#f99157>1</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>0</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>1</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>2</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>3</span><span>])</span><span style=color:#5fb3b3>;
</span><span>
</span><span style=color:#c594c5>const </span><span style=color:#69c>combine </span><span style=color:#5fb3b3>= (</span><span style=color:#f99157>state</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>value</span><span style=color:#5fb3b3>) </span><span style=color:#c594c5>=> </span><span>state</span><span style=color:#5fb3b3>.</span><span style=color:#69c>add</span><span>(value)</span><span style=color:#5fb3b3>;
</span><span>
</span><span style=color:#c594c5>const </span><span>transducer </span><span style=color:#5fb3b3>= </span><span style=color:#69c>compose</span><span>(
</span><span>  </span><span style=color:#69c>filter</span><span>(is_positive)</span><span style=color:#5fb3b3>,
</span><span>  </span><span style=color:#69c>filter</span><span>(is_even)</span><span style=color:#5fb3b3>,
</span><span>  </span><span style=color:#69c>map</span><span>(add_message)
</span><span>)</span><span style=color:#5fb3b3>;
</span><span>
</span><span style=color:#69c>reduce</span><span>(</span><span style=color:#69c>transducer</span><span>(combine)</span><span style=color:#5fb3b3>, new </span><span>Set()</span><span style=color:#5fb3b3>, </span><span>data)</span><span style=color:#5fb3b3>;
</span><span style=color:#5f6364>// Set [ "The number is: 2" ]
</span></code></pre><p>Do note that the result doesn't have to be a <code>Set</code>, we can convert <code>data</code> from a <code>Set</code> to an <code>Array</code> if we wanted to. Again, we just need a different combine function and a new initial value in <code>reduce</code>.<p>Everything is awesome but there is one more thing we can do to improve the "experience". We can create a helper function called <code>transduce</code>, which will basically take care of some details for us.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>function </span><span style=color:#69c>transduce</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>combine</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>initial</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>transducer</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>collection</span><span style=color:#5fb3b3>) {
</span><span>  </span><span style=color:#c594c5>return </span><span style=color:#69c>reduce</span><span>(</span><span style=color:#69c>transducer</span><span>(combine)</span><span style=color:#5fb3b3>, </span><span>initial</span><span style=color:#5fb3b3>, </span><span>collection)</span><span style=color:#5fb3b3>;
</span><span style=color:#5fb3b3>}
</span></code></pre><p>It doesn't look like a big deal, I know. The benefit we get from this is greater control over the <code>reduce</code> function, now we could have multiple implementations and choose which one to use according to the type of <code>collection</code>. For now we are just going to stick with our home made <code>reduce</code>.<p>Taking this one step further, we could even match a data type with a "combine" function so it's easier to use.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>function </span><span style=color:#69c>curry</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>arity</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>fn</span><span style=color:#5fb3b3>, ...</span><span style=color:#f99157>rest</span><span style=color:#5fb3b3>) {
</span><span>  </span><span style=color:#c594c5>if </span><span>(arity </span><span style=color:#5fb3b3><= </span><span>rest</span><span style=color:#5fb3b3>.</span><span>length) </span><span style=color:#5fb3b3>{
</span><span>    </span><span style=color:#c594c5>return </span><span style=color:#69c>fn</span><span>(</span><span style=color:#5fb3b3>...</span><span>rest)</span><span style=color:#5fb3b3>;
</span><span>  </span><span style=color:#5fb3b3>}
</span><span>
</span><span>  </span><span style=color:#c594c5>return </span><span>curry</span><span style=color:#5fb3b3>.</span><span style=color:#69c>bind</span><span>(</span><span style=color:#f99157>null</span><span style=color:#5fb3b3>, </span><span>arity</span><span style=color:#5fb3b3>, </span><span>fn</span><span style=color:#5fb3b3>, ...</span><span>rest)</span><span style=color:#5fb3b3>;
</span><span style=color:#5fb3b3>}
</span><span>
</span><span style=color:#c594c5>const </span><span>Into </span><span style=color:#5fb3b3>= {
</span><span>  array</span><span style=color:#5fb3b3>: </span><span style=color:#69c>curry</span><span>(</span><span style=color:#f99157>2</span><span style=color:#5fb3b3>, </span><span style=color:#c594c5>function</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>transducer</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>collection</span><span style=color:#5fb3b3>) {
</span><span>    </span><span style=color:#c594c5>const </span><span style=color:#69c>combine </span><span style=color:#5fb3b3>= (</span><span style=color:#f99157>state</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>value</span><span style=color:#5fb3b3>) </span><span style=color:#c594c5>=> </span><span>(state</span><span style=color:#5fb3b3>.</span><span style=color:#69c>push</span><span>(value)</span><span style=color:#5fb3b3>, </span><span>state)</span><span style=color:#5fb3b3>;
</span><span>    </span><span style=color:#c594c5>return </span><span style=color:#69c>transduce</span><span>(combine</span><span style=color:#5fb3b3>, </span><span>[]</span><span style=color:#5fb3b3>, </span><span>transducer</span><span style=color:#5fb3b3>, </span><span>collection)</span><span style=color:#5fb3b3>;
</span><span>  </span><span style=color:#5fb3b3>}</span><span>)</span><span style=color:#5fb3b3>,
</span><span>  string</span><span style=color:#5fb3b3>: </span><span style=color:#69c>curry</span><span>(</span><span style=color:#f99157>2</span><span style=color:#5fb3b3>, </span><span style=color:#c594c5>function</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>transducer</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>collection</span><span style=color:#5fb3b3>) {
</span><span>    </span><span style=color:#c594c5>const </span><span style=color:#69c>combine </span><span style=color:#5fb3b3>= (</span><span style=color:#f99157>state</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>value</span><span style=color:#5fb3b3>) </span><span style=color:#c594c5>=> </span><span>state</span><span style=color:#5fb3b3>.</span><span style=color:#69c>concat</span><span>(value)</span><span style=color:#5fb3b3>;
</span><span>    </span><span style=color:#c594c5>return </span><span style=color:#69c>transduce</span><span>(combine</span><span style=color:#5fb3b3>, "", </span><span>transducer</span><span style=color:#5fb3b3>, </span><span>collection)
</span><span>  </span><span style=color:#5fb3b3>}</span><span>)</span><span style=color:#5fb3b3>,
</span><span>  set</span><span style=color:#5fb3b3>: </span><span style=color:#69c>curry</span><span>(</span><span style=color:#f99157>2</span><span style=color:#5fb3b3>, </span><span style=color:#c594c5>function</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>transducer</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>collection</span><span style=color:#5fb3b3>) {
</span><span>    </span><span style=color:#c594c5>const </span><span style=color:#69c>combine </span><span style=color:#5fb3b3>= (</span><span style=color:#f99157>state</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>value</span><span style=color:#5fb3b3>) </span><span style=color:#c594c5>=> </span><span>state</span><span style=color:#5fb3b3>.</span><span style=color:#69c>add</span><span>(value)</span><span style=color:#5fb3b3>;
</span><span>    </span><span style=color:#c594c5>return </span><span style=color:#69c>transduce</span><span>(combine</span><span style=color:#5fb3b3>, new </span><span>Set()</span><span style=color:#5fb3b3>, </span><span>transducer</span><span style=color:#5fb3b3>, </span><span>collection)</span><span style=color:#5fb3b3>;
</span><span>  </span><span style=color:#5fb3b3>}</span><span>)</span><span style=color:#5fb3b3>,
</span><span style=color:#5fb3b3>};
</span></code></pre><p>Now we can have that smart partial application but this time that effect is handled by the <code>curry</code> function. So we can use it like this.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>const </span><span>data </span><span style=color:#5fb3b3>= </span><span>[</span><span style=color:#5fb3b3>-</span><span style=color:#f99157>2</span><span style=color:#5fb3b3>, -</span><span style=color:#f99157>1</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>0</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>1</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>2</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>3</span><span>]</span><span style=color:#5fb3b3>;
</span><span>
</span><span style=color:#c594c5>const </span><span>transducer </span><span style=color:#5fb3b3>= </span><span style=color:#69c>compose</span><span>(
</span><span>  </span><span style=color:#69c>filter</span><span>(is_positive)</span><span style=color:#5fb3b3>,
</span><span>  </span><span style=color:#69c>filter</span><span>(is_even)</span><span style=color:#5fb3b3>,
</span><span>  </span><span style=color:#69c>map</span><span>(add_message)
</span><span>)</span><span style=color:#5fb3b3>;
</span><span>
</span><span>Into</span><span style=color:#5fb3b3>.</span><span style=color:#69c>array</span><span>(transducer</span><span style=color:#5fb3b3>, </span><span>data)</span><span style=color:#5fb3b3>;
</span><span style=color:#5f6364>// Array [ "The number is: 2" ]
</span></code></pre><p>Or this.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>const </span><span>some_process </span><span style=color:#5fb3b3>= </span><span>Into</span><span style=color:#5fb3b3>.</span><span style=color:#69c>array</span><span>(</span><span style=color:#69c>compose</span><span>(
</span><span>  </span><span style=color:#69c>filter</span><span>(is_positive)</span><span style=color:#5fb3b3>,
</span><span>  </span><span style=color:#69c>filter</span><span>(is_even)</span><span style=color:#5fb3b3>,
</span><span>  </span><span style=color:#69c>map</span><span>(add_message)
</span><span>))</span><span style=color:#5fb3b3>;
</span><span>
</span><span style=color:#69c>some_process</span><span>(data)</span><span style=color:#5fb3b3>;
</span><span style=color:#5f6364>// Array [ "The number is: 2" ]
</span></code></pre><blockquote><p>You can check the full example <a href=https://gist.github.com/VonHeikemen/a6b2b2e27ea999e87ebc30cf9c039295 rel=noopener target=_blank>here</a>.</blockquote><p>Now we possess truly reusable "operations". We didn't have to implement a <code>filter</code> for <code>Set</code> and another for arrays. In this contrived example it might not look like much, but imagine having an arsenal of operations like <a href=https://rxjs.dev/api rel=noopener target=_blank>RxJS</a> and being able to apply it to different kinds of collections. And the only thing you need to do to make it compatible is to provide a <code>reduce</code> function. The composition model also encourage us to solve our problems one function at a time.<p>There is one more thing you need to know.<h2 id=this-isn-t-their-final-form>This isn't their final form</h2><p>So far I've been showing transducers as functions that return a <code>reducer</code>, but that was just to show you the idea behind them. These things work but the problem is they are limited. There are a few things that our implementation doesn't support.<ul><li><p>An initialization hook: If the initial value is not provided, the transducer should have the opportunity to produce one.</p><li><p>Early termination: A transducer should be able to send a "signal" to terminate the process and return the current value processed. Almost like the <code>break</code> keyword in a <code>for</code> loop.</p><li><p>A completion hook: A function that runs at the end of the process, basically when there are no more values to process.</p></ul><p>Because of this many articles that talk about transducer tell you to use a library.<p>The only libraries I know that have support for transducers are these:<ul><li><a href=https://github.com/cognitect-labs/transducers-js rel=noopener target=_blank>transducers-js</a><li><a href=https://ramdajs.com/docs/ rel=noopener target=_blank>ramda</a></ul><h2 id=follow-the-protocol>Follow the protocol</h2><p>We know what make transducers tick, now let's find out how one might implement a transducer the right way. For this we will follow the <a href=https://github.com/cognitect-labs/transducers-js#the-transducer-protocol rel=noopener target=_blank>protocol</a> established in the <em>transducer-js</em> library.<p>The rules say that a transducer must be an object with this shape.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>const </span><span>transducer </span><span style=color:#5fb3b3>= {
</span><span>  </span><span style=color:#5fb3b3>'</span><span style=color:#99c794>@@transducer/init</span><span style=color:#5fb3b3>': </span><span style=color:#c594c5>function</span><span style=color:#5fb3b3>() {
</span><span>    </span><span style=color:#c594c5>return </span><span style=color:#5f6364>/* ???? */</span><span style=color:#5fb3b3>;
</span><span>  </span><span style=color:#5fb3b3>},
</span><span>  </span><span style=color:#5fb3b3>'</span><span style=color:#99c794>@@transducer/result</span><span style=color:#5fb3b3>': </span><span style=color:#c594c5>function</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>state</span><span style=color:#5fb3b3>) {
</span><span>    </span><span style=color:#c594c5>return </span><span>state</span><span style=color:#5fb3b3>;
</span><span>  </span><span style=color:#5fb3b3>},
</span><span>  </span><span style=color:#5fb3b3>'</span><span style=color:#99c794>@@transducer/step</span><span style=color:#5fb3b3>': </span><span style=color:#c594c5>function</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>state</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>value</span><span style=color:#5fb3b3>) {
</span><span style=color:#5fb3b3>    </span><span style=color:#5f6364>// ???
</span><span>  </span><span style=color:#5fb3b3>}
</span><span style=color:#5fb3b3>};
</span></code></pre><ul><li><p><strong>@@transducer/init</strong>: This is where we can return an initial value, if for some reason we need one. The default behavior for this is to delegate the task to the next transducer in the composition, with a little luck someone might return something useful.</p><li><p><strong>@@transducer/result</strong>: This one runs when the process in completed. As with <code>@@transducer/init</code>, the default behavior that is expected is to delegate the task to the next step.</p><li><p><strong>@@transducer/step</strong>: This is where the core logic for the transducers lies. This is basically the <code>reducer</code> function.</p></ul><p>We are not done yet, we also need a way to signal the end of the process and return the current value we have so far. For this, the protocol gives us a special object they call <code>reduced</code>. The idea is that when the <code>reduce</code> function "sees" this object it terminates the whole process. <code>reduced</code> should have this shape.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>const </span><span>reduced </span><span style=color:#5fb3b3>= {
</span><span>  </span><span style=color:#5fb3b3>'</span><span style=color:#99c794>@@transducer/reduced</span><span style=color:#5fb3b3>': </span><span style=color:#f99157>true</span><span style=color:#5fb3b3>,
</span><span>  </span><span style=color:#5fb3b3>'</span><span style=color:#99c794>@@transducer/value</span><span style=color:#5fb3b3>': </span><span>something </span><span style=color:#5f6364>// the current state of the process
</span><span style=color:#5fb3b3>};
</span></code></pre><h3 id=a-true-transducer>A true transducer</h3><p>Now it is time to apply everything we have learned so far. Let's re-implement <code>filter</code>, the right way. We can do it, it will mostly stay the same.<p>We begin with a function that returns an object.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>function </span><span style=color:#69c>filter</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>predicate</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>next</span><span style=color:#5fb3b3>) {
</span><span>  </span><span style=color:#c594c5>return </span><span style=color:#5fb3b3>{
</span><span>
</span><span>  </span><span style=color:#5fb3b3>};
</span><span style=color:#5fb3b3>}
</span></code></pre><p>For the <code>init</code> hook, what do we need to do? Nothing, really. Then we delegate.<pre class=language-diff data-lang=diff style=color:#cccece;background-color:#2b2c2f><code class=language-diff data-lang=diff><span>  function filter(predicate, next) {
</span><span>    return {
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>     '@@transducer/init': function() {
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>       return next['@@transducer/init']();
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>     },
</span><span>    };
</span><span>  }
</span></code></pre><p>When the process is completed, what do we need to do? Nothing. You know the drill.<pre class=language-diff data-lang=diff style=color:#cccece;background-color:#2b2c2f><code class=language-diff data-lang=diff><span>  function filter(predicate, next) {
</span><span>    return {
</span><span>      '@@transducer/init': function() {
</span><span>        return next['@@transducer/init']();
</span><span>      },
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>     '@@transducer/result': function(state) {
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>       return next['@@transducer/result'](state);
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>     },
</span><span>    };
</span><span>  }
</span></code></pre><p>For the grand finale, the <code>reducer</code> itself.<pre class=language-diff data-lang=diff style=color:#cccece;background-color:#2b2c2f><code class=language-diff data-lang=diff><span>  function filter(predicate, next) {
</span><span>    return {
</span><span>      '@@transducer/init': function() {
</span><span>        return next['@@transducer/init']();
</span><span>      },
</span><span>      '@@transducer/result': function(state) {
</span><span>        return next['@@transducer/result'](state);
</span><span>      },
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>     '@@transducer/step': function(state, value) {
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>       if(predicate(value)) {
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>         return next['@@transducer/step'](state, value);
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>       }
</span><span style=color:#5fb3b3>+
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>       return state;
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>     },
</span><span>    };
</span><span>  }
</span></code></pre><p>Oops, let's not forget the secret sauce.<pre class=language-diff data-lang=diff style=color:#cccece;background-color:#2b2c2f><code class=language-diff data-lang=diff><span>  function filter(predicate, next) {
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>   if(arguments.length === 1) {
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>     return (_next) => filter(predicate, _next);
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>   }
</span><span>
</span><span>    return {
</span><span>      '@@transducer/init': function() {
</span><span>        return next['@@transducer/init']();
</span><span>      },
</span><span>      '@@transducer/result': function(state) {
</span><span>        return next['@@transducer/result'](state);
</span><span>      },
</span><span>      '@@transducer/step': function(state, value) {
</span><span>        if(predicate(value)) {
</span><span>          return next['@@transducer/step'](state, value);
</span><span>        }
</span><span> 
</span><span>        return state;
</span><span>      },
</span><span>    };
</span><span>  }
</span></code></pre><p>We have our transducer, now we have a problem: we don't have a <code>reduce</code> function capable of using it.<h3 id=reduce-enhanced>reduce enhanced</h3><p>We need to do a few tweaks to our <code>reduce</code>.<p>Remember this.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>function </span><span style=color:#69c>reduce</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>reducer</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>initial</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>collection</span><span style=color:#5fb3b3>) {
</span><span>  </span><span style=color:#c594c5>let </span><span>state </span><span style=color:#5fb3b3>= </span><span>initial</span><span style=color:#5fb3b3>;
</span><span>
</span><span>  </span><span style=color:#c594c5>for</span><span>(</span><span style=color:#c594c5>let </span><span>value </span><span style=color:#5fb3b3>of </span><span>collection) </span><span style=color:#5fb3b3>{
</span><span>    state </span><span style=color:#5fb3b3>= </span><span style=color:#69c>reducer</span><span>(state</span><span style=color:#5fb3b3>, </span><span>value)</span><span style=color:#5fb3b3>;
</span><span>  </span><span style=color:#5fb3b3>}
</span><span>
</span><span>  </span><span style=color:#c594c5>return </span><span>state</span><span style=color:#5fb3b3>;
</span><span style=color:#5fb3b3>}
</span></code></pre><p>First, we need to use the <code>init</code> hook.<pre class=language-diff data-lang=diff style=color:#cccece;background-color:#2b2c2f><code class=language-diff data-lang=diff><span style=color:#5fb3b3>-</span><span style=color:#ec5f67> function reduce(reducer, initial, collection) {
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794> function reduce(transducer, initial, collection) {
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>   if(arguments.length === 2) {
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>     collection = initial;
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>     initial = transducer['@@transducer/init']();
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>   }
</span><span style=color:#5fb3b3>+
</span><span>    let state = initial;
</span><span>
</span><span>    for(let value of collection) {
</span><span>      state = reducer(state, value);
</span><span>    }
</span><span>
</span><span>    return state;
</span><span>  }
</span></code></pre><p>When the function gets two arguments the collection will be stored in <code>initial</code> and <code>collection</code> will be <code>undefined</code>, so what we do is put <code>initial</code> in <code>collection</code> and give our transducer the chance to give us an initial state.<p>Next, we call the <code>reducer</code> function, which is now in <code>@@transducer/step</code>.<pre class=language-diff data-lang=diff style=color:#cccece;background-color:#2b2c2f><code class=language-diff data-lang=diff><span>  function reduce(transducer, initial, collection) {
</span><span>    if(arguments.length === 2) {
</span><span>      collection = initial;
</span><span>      initial = transducer['@@transducer/init']();
</span><span>    }
</span><span> 
</span><span>    let state = initial;
</span><span>
</span><span>    for(let value of collection) {
</span><span style=color:#5fb3b3>-</span><span style=color:#ec5f67>     state = reducer(state, value);
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>     state = transducer['@@transducer/step'](state, value);
</span><span>    }
</span><span>
</span><span>    return state;
</span><span>  }
</span></code></pre><p>Now we need to evaluate the return value of the <code>reducer</code> and see if we should stop the process.<pre class=language-diff data-lang=diff style=color:#cccece;background-color:#2b2c2f><code class=language-diff data-lang=diff><span>  function reduce(transducer, initial, collection) {
</span><span>    if(arguments.length === 2) {
</span><span>      collection = initial;
</span><span>      initial = transducer['@@transducer/init']();
</span><span>    }
</span><span> 
</span><span>    let state = initial;
</span><span>
</span><span>    for(let value of collection) {
</span><span>      state = transducer['@@transducer/step'](state, value);
</span><span style=color:#5fb3b3>+
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>     if(state != null && state['@@transducer/reduced']) {
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>       state = state['@@transducer/value'];
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>       break;
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>     }
</span><span>    }
</span><span>
</span><span>    return state;
</span><span>  }
</span></code></pre><p>Lastly we need to make sure our transducer knows the process is done.<pre class=language-diff data-lang=diff style=color:#cccece;background-color:#2b2c2f><code class=language-diff data-lang=diff><span>  function reduce(transducer, initial, collection) {
</span><span>    if(arguments.length === 2) {
</span><span>      collection = initial;
</span><span>      initial = transducer['@@transducer/init']();
</span><span>    }
</span><span> 
</span><span>    let state = initial;
</span><span>
</span><span>    for(let value of collection) {
</span><span>      state = transducer['@@transducer/step'](state, value);
</span><span> 
</span><span>      if(state != null && state['@@transducer/reduced']) {
</span><span>        state = state['@@transducer/value'];
</span><span>        break;
</span><span>      }
</span><span>    }
</span><span>
</span><span style=color:#5fb3b3>-</span><span style=color:#ec5f67>   return state;
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>   return transducer['@@transducer/result'](state);
</span><span>  }
</span></code></pre><p>But I'm not done yet. There is an extra step I will like to do. You might notice that I renamed <code>reducer</code> to <code>transducer</code>, I would like for this to keep working with "normal" <code>reducer</code>s like the ones we use with <code>Array.reduce</code>. So, we will create a transducer that just wraps an existent <code>reducer</code>.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>function </span><span style=color:#69c>to_transducer</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>reducer</span><span style=color:#5fb3b3>) {
</span><span>  </span><span style=color:#c594c5>if</span><span>(</span><span style=color:#5fb3b3>typeof </span><span>reducer[</span><span style=color:#5fb3b3>'</span><span style=color:#99c794>@@transducer/step</span><span style=color:#5fb3b3>'</span><span>] </span><span style=color:#5fb3b3>== '</span><span style=color:#99c794>function</span><span style=color:#5fb3b3>'</span><span>) </span><span style=color:#5fb3b3>{
</span><span>    </span><span style=color:#c594c5>return </span><span>reducer</span><span style=color:#5fb3b3>;
</span><span>  </span><span style=color:#5fb3b3>}
</span><span>
</span><span>  </span><span style=color:#c594c5>return </span><span style=color:#5fb3b3>{
</span><span>    </span><span style=color:#5fb3b3>'</span><span style=color:#99c794>@@transducer/init</span><span style=color:#5fb3b3>': </span><span style=color:#c594c5>function</span><span style=color:#5fb3b3>() {
</span><span>      </span><span style=color:#c594c5>throw </span><span style=color:#5fb3b3>new </span><span>Error(</span><span style=color:#5fb3b3>'</span><span style=color:#99c794>Method not implemented</span><span style=color:#5fb3b3>'</span><span>)</span><span style=color:#5fb3b3>;
</span><span>    </span><span style=color:#5fb3b3>},
</span><span>    </span><span style=color:#5fb3b3>'</span><span style=color:#99c794>@@transducer/result</span><span style=color:#5fb3b3>': </span><span style=color:#c594c5>function</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>state</span><span style=color:#5fb3b3>) {
</span><span>      </span><span style=color:#c594c5>return </span><span>state</span><span style=color:#5fb3b3>;
</span><span>    </span><span style=color:#5fb3b3>},
</span><span>    </span><span style=color:#5fb3b3>'</span><span style=color:#99c794>@@transducer/step</span><span style=color:#5fb3b3>': </span><span style=color:#c594c5>function</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>state</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>value</span><span style=color:#5fb3b3>) {
</span><span>      </span><span style=color:#c594c5>return </span><span style=color:#69c>reducer</span><span>(state</span><span style=color:#5fb3b3>, </span><span>value)</span><span style=color:#5fb3b3>;
</span><span>    </span><span style=color:#5fb3b3>}
</span><span>  </span><span style=color:#5fb3b3>};
</span><span style=color:#5fb3b3>}
</span></code></pre><p>Now let's use it in <code>reduce</code>.<pre class=language-diff data-lang=diff style=color:#cccece;background-color:#2b2c2f><code class=language-diff data-lang=diff><span>  function reduce(transducer, initial, collection) {
</span><span style=color:#5fb3b3>+</span><span style=color:#99c794>   transducer = to_transducer(transducer);
</span><span style=color:#5fb3b3>+
</span><span>    if(arguments.length === 2) {
</span><span>      collection = initial;
</span><span>      initial = transducer['@@transducer/init']();
</span><span>    }
</span><span> 
</span><span>    let state = initial;
</span><span>
</span><span>    for(let value of collection) {
</span><span>      state = transducer['@@transducer/step'](state, value);
</span><span> 
</span><span>      if(state != null && state['@@transducer/reduced']) {
</span><span>        state = state['@@transducer/value'];
</span><span>        break;
</span><span>      }
</span><span>    }
</span><span>
</span><span>    return transducer['@@transducer/result'](state);
</span><span>  }
</span></code></pre><p>Now is time to test the result of all our hard work.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>const </span><span style=color:#69c>is_positive </span><span style=color:#5fb3b3>= </span><span style=color:#f99157>number </span><span style=color:#c594c5>=> </span><span>number </span><span style=color:#5fb3b3>> </span><span style=color:#f99157>0</span><span style=color:#5fb3b3>;
</span><span>
</span><span style=color:#c594c5>const </span><span>data </span><span style=color:#5fb3b3>= </span><span>[</span><span style=color:#5fb3b3>-</span><span style=color:#f99157>2</span><span style=color:#5fb3b3>, -</span><span style=color:#f99157>1</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>0</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>1</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>2</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>3</span><span>]</span><span style=color:#5fb3b3>;
</span><span style=color:#c594c5>const </span><span style=color:#69c>combine </span><span style=color:#5fb3b3>= (</span><span style=color:#f99157>state</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>value</span><span style=color:#5fb3b3>) </span><span style=color:#c594c5>=> </span><span>(state</span><span style=color:#5fb3b3>.</span><span style=color:#69c>push</span><span>(value)</span><span style=color:#5fb3b3>, </span><span>state)</span><span style=color:#5fb3b3>;
</span><span>
</span><span style=color:#69c>reduce</span><span>(</span><span style=color:#69c>filter</span><span>(is_positive</span><span style=color:#5fb3b3>, </span><span style=color:#69c>to_transducer</span><span>(combine))</span><span style=color:#5fb3b3>, </span><span>[]</span><span style=color:#5fb3b3>, </span><span>data)</span><span style=color:#5fb3b3>;
</span><span style=color:#5f6364>// Array(3) [ 1, 2, 3 ]
</span></code></pre><p>Awesome, everything works just fine. But this is too much work. This is why we have that <code>transduce</code> helper function, but right now it's missing something, we need to add <code>to_transducer</code>.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>function </span><span style=color:#69c>transduce</span><span style=color:#5fb3b3>(</span><span style=color:#f99157>combine</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>initial</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>transducer</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>collection</span><span style=color:#5fb3b3>) {
</span><span>  </span><span style=color:#c594c5>return </span><span style=color:#69c>reduce</span><span>(
</span><span>    </span><span style=color:#69c>transducer</span><span>(</span><span style=color:#69c>to_transducer</span><span>(combine))</span><span style=color:#5fb3b3>,
</span><span>    initial</span><span style=color:#5fb3b3>,
</span><span>    collection
</span><span>  )</span><span style=color:#5fb3b3>;
</span><span style=color:#5fb3b3>}
</span></code></pre><p>Let's go again.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>const </span><span style=color:#69c>is_positive </span><span style=color:#5fb3b3>= </span><span style=color:#f99157>number </span><span style=color:#c594c5>=> </span><span>number </span><span style=color:#5fb3b3>> </span><span style=color:#f99157>0</span><span style=color:#5fb3b3>;
</span><span>
</span><span style=color:#c594c5>const </span><span>data </span><span style=color:#5fb3b3>= </span><span>[</span><span style=color:#5fb3b3>-</span><span style=color:#f99157>2</span><span style=color:#5fb3b3>, -</span><span style=color:#f99157>1</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>0</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>1</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>2</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>3</span><span>]</span><span style=color:#5fb3b3>;
</span><span style=color:#c594c5>const </span><span style=color:#69c>combine </span><span style=color:#5fb3b3>= (</span><span style=color:#f99157>state</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>value</span><span style=color:#5fb3b3>) </span><span style=color:#c594c5>=> </span><span>(state</span><span style=color:#5fb3b3>.</span><span style=color:#69c>push</span><span>(value)</span><span style=color:#5fb3b3>, </span><span>state)</span><span style=color:#5fb3b3>;
</span><span>
</span><span style=color:#69c>transduce</span><span>(combine</span><span style=color:#5fb3b3>, </span><span>[]</span><span style=color:#5fb3b3>, </span><span style=color:#69c>filter</span><span>(is_positive)</span><span style=color:#5fb3b3>, </span><span>data)</span><span style=color:#5fb3b3>;
</span><span style=color:#5f6364>// Array(3) [ 1, 2, 3 ]
</span></code></pre><p>Now let's test the composition.<pre class=language-js data-lang=js style=color:#cccece;background-color:#2b2c2f><code class=language-js data-lang=js><span style=color:#c594c5>const </span><span style=color:#69c>is_even </span><span style=color:#5fb3b3>= </span><span style=color:#f99157>number </span><span style=color:#c594c5>=> </span><span>number </span><span style=color:#5fb3b3>% </span><span style=color:#f99157>2 </span><span style=color:#5fb3b3>=== </span><span style=color:#f99157>0</span><span style=color:#5fb3b3>;
</span><span style=color:#c594c5>const </span><span style=color:#69c>is_positive </span><span style=color:#5fb3b3>= </span><span style=color:#f99157>number </span><span style=color:#c594c5>=> </span><span>number </span><span style=color:#5fb3b3>> </span><span style=color:#f99157>0</span><span style=color:#5fb3b3>;
</span><span>
</span><span style=color:#c594c5>const </span><span>data </span><span style=color:#5fb3b3>= </span><span>[</span><span style=color:#5fb3b3>-</span><span style=color:#f99157>2</span><span style=color:#5fb3b3>, -</span><span style=color:#f99157>1</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>0</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>1</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>2</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>3</span><span>]</span><span style=color:#5fb3b3>;
</span><span style=color:#c594c5>const </span><span style=color:#69c>combine </span><span style=color:#5fb3b3>= (</span><span style=color:#f99157>state</span><span style=color:#5fb3b3>, </span><span style=color:#f99157>value</span><span style=color:#5fb3b3>) </span><span style=color:#c594c5>=> </span><span>(state</span><span style=color:#5fb3b3>.</span><span style=color:#69c>push</span><span>(value)</span><span style=color:#5fb3b3>, </span><span>state)</span><span style=color:#5fb3b3>;
</span><span>
</span><span style=color:#c594c5>const </span><span>transducer </span><span style=color:#5fb3b3>= </span><span style=color:#69c>compose</span><span>(</span><span style=color:#69c>filter</span><span>(is_positive)</span><span style=color:#5fb3b3>, </span><span style=color:#69c>filter</span><span>(is_even))</span><span style=color:#5fb3b3>;
</span><span>
</span><span style=color:#69c>transduce</span><span>(combine</span><span style=color:#5fb3b3>, </span><span>[]</span><span style=color:#5fb3b3>, </span><span>transducer</span><span style=color:#5fb3b3>, </span><span>data)</span><span style=color:#5fb3b3>;
</span><span style=color:#5f6364>// Array [ 2 ]
</span></code></pre><blockquote><p>You can check the full example <a href=https://gist.github.com/VonHeikemen/a70479feeb59a26cd5f217ea752cf115 rel=noopener target=_blank>here</a></blockquote><p>Now we are officially done. There is nothing else to do. I think you already have enough information to make your own transducers.<h2 id=conclusion>Conclusion</h2><p>You made it! You reached the end of the post. I must congratulate you, specially if you understood everything in a single read, this is not an easy one. Celebrate, you deserve it.<p>Anyway, today we learned that transducers (in javascript) are transformations that work across multiple types of collections, as long as they provide a compatible <code>reduce</code> function. They also have some handy features like early termination (just like a <code>for</code> loop), they provide hooks that run at the beginning and end of a process, and they can compose directly just like regular functions. Lastly, in theory they also should be efficient, though they are not faster than a <code>for</code> loop. Regardless, they may not be the fastest things around but their compatibility with different types of collections and the declarative nature of the composition makes them a powerful tool.<h2 id=sources>Sources</h2><ul><li><a href=https://github.com/getify/Functional-Light-JS/blob/master/manuscript/apA.md/#appendix-a-transducing rel=noopener target=_blank>Functional-Light JavaScript | Appendix A: Transducing</a><li><a href=https://www.jeremydaly.com/transducers-supercharge-functional-javascript/ rel=noopener target=_blank>Transducers: Supercharge your functional JavaScript</a><li><a href=https://jrsinclair.com/articles/2019/magical-mystical-js-transducers/ rel=noopener target=_blank>Magical, Mystical JavaScript Transducers</a><li><a href=https://medium.com/javascript-scene/transducers-efficient-data-processing-pipelines-in-javascript-7985330fe73d rel=noopener target=_blank>Transducers: Efficient Data Processing Pipelines in JavaScript</a><li><a href="https://www.youtube.com/watch?v=6mTbuzafcII" rel=noopener target=_blank>"Transducers" by Rich Hickey (video)</a><li><a href=https://github.com/cognitect-labs/transducers-js rel=noopener target=_blank>transducers-js</a></ul><hr><p>Have any question? Feel free to leave a comment in one of these platform where I have shared this:<ul><li><a href=https://dev.to/vonheikemen/transducers-in-javascript-3gfm rel=noopener target=_blank>dev.to</a><li><a href=https://vonheikemen.hashnode.dev/transducers-in-javascript rel=noopener target=_blank>Hashnode</a></ul><p>You can reach out to me on social media:<ul><li>Twitter <a rel="noopener me" href=https://twitter.com/VonHeikemen_ target=_blank> @VonHeikemen_ </a><li>Bluesky <a rel="noopener me" href=https://bsky.app/profile/vonheikemen.bsky.social target=_blank> @vonheikemen.bsky.social </a><li>Mastodon <a rel="noopener me" href=https://hachyderm.io/@vonheikemen target=_blank> @vonheikemen@hachyderm.io </a></ul><p>Thank you for reading. If you find this article useful and want to support my efforts, buy me a coffee ☕</p><a href=https://ko-fi.com/vonheikemen style=justify-content:center;display:flex target=_blank> <img alt="Buy Me A Coffee" src="https://storage.ko-fi.com/cdn/kofi2.png?v=3" style=width:217px!important;height:60px!important> </a></div></div>